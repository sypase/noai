// // // // // // "use client";

// // // // // // import axios from "axios";
// // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // import { serverURL } from "@/utils/utils";
// // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // import { FiMoon, FiSend } from "react-icons/fi";
// // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // import { motion } from "framer-motion";
// // // // // // import { trefoil } from 'ldrs';

// // // // // // trefoil.register();

// // // // // // function countWords(str: string) {
// // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // }

// // // // // // export default function Home() {
// // // // // //   const [text, setText] = useState<string>("");
// // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // //   const [messages, setMessages] = useState<{ text: string; sender: string }[]>([]);
// // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // //   const [theme, setTheme] = useState<string>("light");
// // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // //   const toggleDarkMode = (x: React.ChangeEvent<HTMLInputElement>) => {
// // // // // //     setTheme(x.target.checked ? "dark" : "light");
// // // // // //   };

// // // // // //   const sendMessage = async () => {
// // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // //     if (wordCount > 200) {
// // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // //       return;
// // // // // //     }

// // // // // //     setLoading(true);
// // // // // //     setMessages([...messages, { text, sender: "user" }]);
// // // // // //     setText("");

// // // // // //     try {
// // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // //         text: text,
// // // // // //         setting: 3,
// // // // // //         output_format: "JSON"
// // // // // //       });

// // // // // //       setLoading(false);
      
// // // // // //       const humanLikeVersions = response.data.humanLikeOutput;
      
// // // // // //       setMessages(prev => [...prev, { text: humanLikeVersions, sender: "bot" }]);
// // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // //       scrollToBottom();
// // // // // //     } catch (error: any) {
// // // // // //       setLoading(false);
// // // // // //       if (error.response?.status === 429) {
// // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // //         setTimeout(() => {
// // // // // //           window.location.href = '/signup';
// // // // // //         }, 3000);
// // // // // //       } else {
// // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // //       }
// // // // // //     }
// // // // // //   };

// // // // // //   useEffect(() => {
// // // // // //     const storedTheme = localStorage.getItem("theme") || "light";
// // // // // //     setTheme(storedTheme);
// // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // //   }, []);

// // // // // //   useEffect(() => {
// // // // // //     localStorage.setItem("theme", theme);
// // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // //   }, [theme]);

// // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // //     const newText = event.target.value;
// // // // // //     setText(newText);
// // // // // //     setWordCount(countWords(newText));
// // // // // //   };

// // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // //       event.preventDefault();
// // // // // //       sendMessage();
// // // // // //     }
// // // // // //   };

// // // // // //   const scrollToBottom = () => {
// // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // //   };

// // // // // //   useEffect(() => {
// // // // // //     scrollToBottom();
// // // // // //   }, [messages]);

// // // // // //   return (
// // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900 text-white" : "bg-white text-black"} h-screen w-screen p-5 max-sm:p-0 relative`} style={{ fontFamily: 'Apple SD Gothic Neo, sans-serif' }}>
// // // // // //       <div className="flex justify-between items-center w-full mb-8">
// // // // // //         <div>
// // // // // //           <p className={`font-semibold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"}`}>
// // // // // //             NoaiGPT
// // // // // //           </p>
// // // // // //         </div>
// // // // // //         <div className="flex items-center space-x-4">
// // // // // //           <div className="form-control">
// // // // // //             <label className="label cursor-pointer">
// // // // // //               <input type="checkbox" className={`toggle ${theme === "dark" ? "bg-indigo-400" : "bg-indigo-500"}`} checked={theme === "dark"} onChange={toggleDarkMode} />
// // // // // //               <span className="ml-2">
// // // // // //                 <FiMoon />
// // // // // //               </span>
// // // // // //             </label>
// // // // // //           </div>
// // // // // //         </div>
// // // // // //       </div>  

// // // // // //       <div className={`flex flex-col mx-auto my-8 p-5 w-full h-full rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-md`}>
// // // // // //         <div className="flex flex-col h-full overflow-y-auto p-4">
// // // // // //           {messages.map((message, index) => (
// // // // // //             <motion.div 
// // // // // //               key={index} 
// // // // // //               initial={{ opacity: 0, y: 20 }} 
// // // // // //               animate={{ opacity: 1, y: 0 }} 
// // // // // //               transition={{ duration: 0.3 }} 
// // // // // //               className={`mb-4 p-4 rounded-lg max-w-lg ${message.sender === "user" ? "bg-blue-500 text-white" : "bg-gray-300 text-black"} self-start`}
// // // // // //             >
// // // // // //               {message.text}
// // // // // //             </motion.div>
// // // // // //           ))}
// // // // // //           {loading && <Skeleton count={1} />}
// // // // // //           <div ref={messagesEndRef} />
// // // // // //         </div>
// // // // // //         <div className={`p-4 ${theme === "dark" ? "bg-gray-800" : "bg-gray-100"} flex items-center rounded-lg shadow-md fixed bottom-0 left-0 right-0 mx-5`}>
// // // // // //           <div className="flex items-center w-full rounded-lg bg-white dark:bg-white-700 border border-gray-300 dark:border-gray-600">
// // // // // //             <textarea 
// // // // // //               ref={textareaRef}
// // // // // //               className="flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none" 
// // // // // //               value={text} 
// // // // // //               onChange={handleTextAreaChange}
// // // // // //               onKeyDown={handleKeyDown}
// // // // // //               placeholder="Send message..." 
// // // // // //             />
// // // // // //             <button 
// // // // // //               className="p-3 bg-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none flex items-center" 
// // // // // //               onClick={sendMessage}
// // // // // //               disabled={loading || text.trim().length < 3}
// // // // // //             >
// // // // // //               {loading ? (
// // // // // //                 <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // // //               ) : (
// // // // // //                 <FiSend className="w-5 h-5" />
// // // // // //               )}
// // // // // //             </button>
// // // // // //           </div>
// // // // // //         </div>
// // // // // //       </div>
// // // // // //       <ToastContainer />
// // // // // //     </div>
// // // // // //   );
// // // // // // }

// // // // // "use client";

// // // // // import axios from "axios";
// // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // import { serverURL } from "@/utils/utils";
// // // // // import { useState, useEffect, useRef } from "react";
// // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // import { FiMoon, FiSend } from "react-icons/fi";
// // // // // import Skeleton from "react-loading-skeleton";
// // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // import { motion } from "framer-motion";
// // // // // import { trefoil } from 'ldrs';

// // // // // trefoil.register();

// // // // // function countWords(str: string) {
// // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // }

// // // // // export default function Home() {
// // // // //   const [text, setText] = useState<string>("");
// // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // //   const [messages, setMessages] = useState<{ text: string; sender: string }[]>([]);
// // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // //   const [theme, setTheme] = useState<string>("light");
// // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // //   const toggleDarkMode = (x: React.ChangeEvent<HTMLInputElement>) => {
// // // // //     setTheme(x.target.checked ? "dark" : "light");
// // // // //   };

// // // // //   const sendMessage = async () => {
// // // // //     if (text.trim().length < 3 || loading) return;
// // // // //     if (wordCount > 200) {
// // // // //       toast.error("Text exceeds 200 words limit.");
// // // // //       return;
// // // // //     }

// // // // //     setLoading(true);
// // // // //     setMessages([...messages, { text, sender: "user" }]);
// // // // //     setText("");

// // // // //     try {
// // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // //         text: text,
// // // // //         setting: 3,
// // // // //         output_format: "text"
// // // // //       });

// // // // //       setLoading(false);
      
// // // // //       const humanLikeVersions = response.data.humanLikeOutput;
      
// // // // //       setMessages(prev => [...prev, { text: humanLikeVersions, sender: "bot" }]);
// // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // //       scrollToBottom();
// // // // //     } catch (error: any) {
// // // // //       setLoading(false);
// // // // //       if (error.response?.status === 429) {
// // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // //         setTimeout(() => {
// // // // //           window.location.href = '/signup';
// // // // //         }, 3000);
// // // // //       } else {
// // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // //       }
// // // // //     }
// // // // //   };

// // // // //   useEffect(() => {
// // // // //     const storedTheme = localStorage.getItem("theme") || "light";
// // // // //     setTheme(storedTheme);
// // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // //   }, []);

// // // // //   useEffect(() => {
// // // // //     localStorage.setItem("theme", theme);
// // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // //   }, [theme]);

// // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // //     const newText = event.target.value;
// // // // //     setText(newText);
// // // // //     setWordCount(countWords(newText));
// // // // //   };

// // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // //       event.preventDefault();
// // // // //       sendMessage();
// // // // //     }
// // // // //   };

// // // // //   const scrollToBottom = () => {
// // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // //   };

// // // // //   useEffect(() => {
// // // // //     scrollToBottom();
// // // // //   }, [messages]);

// // // // //   return (
// // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900 text-white" : "bg-white text-black"} h-screen w-screen p-5 max-sm:p-0 relative`} style={{ fontFamily: 'Apple SD Gothic Neo, sans-serif' }}>
// // // // //       <div className="flex justify-between items-center w-full mb-4">
// // // // //         <div>
// // // // //           <p className={`font-semibold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"}`}>
// // // // //             NoaiGPT✦
// // // // //           </p>
// // // // //         </div>
// // // // //         <div className="flex items-center space-x-4">
// // // // //           <div className="form-control">
// // // // //             <label className="label cursor-pointer">
// // // // //               <input type="checkbox" className={`toggle ${theme === "dark" ? "bg-indigo-400" : "bg-indigo-500"}`} checked={theme === "dark"} onChange={toggleDarkMode} />
// // // // //               <span className="ml-2">
// // // // //                 <FiMoon />
// // // // //               </span>
// // // // //             </label>
// // // // //           </div>
// // // // //         </div>
// // // // //       </div>

// // // // //       <div className={`flex flex-col mx-auto w-full h-[calc(100vh-120px)] rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-md`}>
// // // // //         <div className="flex-grow overflow-y-auto p-4">
// // // // //           {messages.map((message, index) => (
// // // // //             <motion.div 
// // // // //               key={index} 
// // // // //               initial={{ opacity: 0, y: 20 }} 
// // // // //               animate={{ opacity: 1, y: 0 }} 
// // // // //               transition={{ duration: 0.3 }} 
// // // // //               className={`mb-4 p-4 rounded-lg max-w-lg ${message.sender === "user" ? "bg-blue-500 text-white" : "bg-gray-300 text-black"} self-start`}
// // // // //             >
// // // // //               {message.text}
// // // // //             </motion.div>
// // // // //           ))}
// // // // //           {loading && <Skeleton count={1} />}
// // // // //           <div ref={messagesEndRef} />
// // // // //         </div>
        
// // // // //         <div className={`p-4 ${theme === "dark" ? "bg-gray-700" : "bg-gray-100"} rounded-b-lg`}>
// // // // //           <div className="flex items-center w-full rounded-lg bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500">
// // // // //             <textarea 
// // // // //               ref={textareaRef}
// // // // //               className="flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none"
// // // // //               rows={3}
// // // // //               value={text} 
// // // // //               onChange={handleTextAreaChange}
// // // // //               onKeyDown={handleKeyDown}
// // // // //               placeholder="Send message..." 
// // // // //             />
// // // // //             <button 
// // // // //               className="p-3 bg-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none flex items-center" 
// // // // //               onClick={sendMessage}
// // // // //               disabled={loading || text.trim().length < 3}
// // // // //             >
// // // // //               {loading ? (
// // // // //                 <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // //               ) : (
// // // // //                 <FiSend className="w-5 h-5" />
// // // // //               )}
// // // // //             </button>
// // // // //           </div>
// // // // //         </div>
// // // // //       </div>
// // // // //       <ToastContainer />
// // // // //     </div>
// // // // //   );
// // // // // }

// // // // "use client";

// // // // import axios from "axios";
// // // // import "react-toastify/dist/ReactToastify.css";
// // // // import { serverURL } from "@/utils/utils";
// // // // import { useState, useEffect, useRef } from "react";
// // // // import { ToastContainer, toast } from "react-toastify";
// // // // import { FiMoon, FiSend } from "react-icons/fi";
// // // // import Skeleton from "react-loading-skeleton";
// // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // import { motion } from "framer-motion";
// // // // import { trefoil } from 'ldrs';

// // // // trefoil.register();

// // // // function countWords(str: string) {
// // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // }

// // // // export default function Home() {
// // // //   const [text, setText] = useState<string>("");
// // // //   const [loading, setLoading] = useState<boolean>(false);
// // // //   const [messages, setMessages] = useState<{ text: string; sender: string }[]>([]);
// // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // //   const [theme, setTheme] = useState<string>("light");
// // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // //   const toggleDarkMode = (x: React.ChangeEvent<HTMLInputElement>) => {
// // // //     setTheme(x.target.checked ? "dark" : "light");
// // // //   };

// // // //   const sendMessage = async () => {
// // // //     if (text.trim().length < 3 || loading) return;
// // // //     if (wordCount > 200) {
// // // //       toast.error("Text exceeds 200 words limit.");
// // // //       return;
// // // //     }

// // // //     setLoading(true);
// // // //     setMessages([...messages, { text, sender: "user" }]);
// // // //     setText("");

// // // //     try {
// // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // //         text: text,
// // // //         setting: 3,
// // // //         output_format: "text"
// // // //       });

// // // //       setLoading(false);
      
// // // //       const humanLikeVersions = response.data.humanLikeOutput;
      
// // // //       setMessages(prev => [...prev, { text: humanLikeVersions, sender: "bot" }]);
// // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // //       scrollToBottom();
// // // //     } catch (error: any) {
// // // //       setLoading(false);
// // // //       if (error.response?.status === 429) {
// // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // //         setTimeout(() => {
// // // //           window.location.href = '/signup';
// // // //         }, 3000);
// // // //       } else {
// // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // //       }
// // // //     }
// // // //   };

// // // //   useEffect(() => {
// // // //     const storedTheme = localStorage.getItem("theme") || "light";
// // // //     setTheme(storedTheme);
// // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // //   }, []);

// // // //   useEffect(() => {
// // // //     localStorage.setItem("theme", theme);
// // // //     document.documentElement.setAttribute("data-theme", theme);
// // // //   }, [theme]);

// // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // //     const newText = event.target.value;
// // // //     setText(newText);
// // // //     setWordCount(countWords(newText));
// // // //   };

// // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // //       event.preventDefault();
// // // //       sendMessage();
// // // //     }
// // // //   };

// // // //   const scrollToBottom = () => {
// // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // //   };

// // // //   useEffect(() => {
// // // //     scrollToBottom();
// // // //   }, [messages]);

// // // //   return (
// // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900 text-white" : "bg-white text-black"} h-screen w-screen p-5 max-sm:p-0 relative`} style={{ fontFamily: 'Apple SD Gothic Neo, sans-serif' }}>
// // // //       <div className="flex justify-between items-center w-full mb-4">
// // // //         <div>
// // // //           <p className={`font-semibold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"}`}>
// // // //             NoaiGPT✦
// // // //           </p>
// // // //         </div>
// // // //         <div className="flex items-center space-x-4">
// // // //           <div className="form-control">
// // // //             <label className="label cursor-pointer">
// // // //               <input type="checkbox" className={`toggle ${theme === "dark" ? "bg-indigo-400" : "bg-indigo-500"}`} checked={theme === "dark"} onChange={toggleDarkMode} />
// // // //               <span className="ml-2">
// // // //                 <FiMoon />
// // // //               </span>
// // // //             </label>
// // // //           </div>
// // // //         </div>
// // // //       </div>

// // // //       <div className={`flex flex-col mx-auto w-full h-[calc(100vh-120px)] rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-md`}>
// // // //         <div className="flex-grow overflow-y-auto p-4">
// // // //           {messages.map((message, index) => (
// // // //             <motion.div 
// // // //               key={index} 
// // // //               initial={{ opacity: 0, y: 20 }} 
// // // //               animate={{ opacity: 1, y: 0 }} 
// // // //               transition={{ duration: 0.3 }} 
// // // //               className={`mb-4 p-4 rounded-lg max-w-lg ${message.sender === "user" ? "bg-blue-500 text-white" : "bg-gray-300 text-black"} self-start`}
// // // //             >
// // // //               {message.text}
// // // //             </motion.div>
// // // //           ))}
// // // //           {loading && <Skeleton count={1} />}
// // // //           <div ref={messagesEndRef} />
// // // //         </div>
        
// // // //         <div className={`p-4 ${theme === "dark" ? "bg-gray-700" : "bg-gray-100"} rounded-b-lg`}>
// // // //           <div className={`flex items-center w-full rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} border ${theme === "dark" ? "border-gray-600" : "border-gray-300"}`}>
// // // //             <textarea 
// // // //               ref={textareaRef}
// // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-white" : "text-black"}`}
// // // //               rows={3}
// // // //               value={text} 
// // // //               onChange={handleTextAreaChange}
// // // //               onKeyDown={handleKeyDown}
// // // //               placeholder="Send message..." 
// // // //             />
// // // //             <button 
// // // //               className={`p-3 bg-transparent ${theme === "dark" ? "text-gray-400 hover:text-gray-200" : "text-gray-500 hover:text-gray-700"} focus:outline-none flex items-center`}
// // // //               onClick={sendMessage}
// // // //               disabled={loading || text.trim().length < 3}
// // // //             >
// // // //               {loading ? (
// // // //                 <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // //               ) : (
// // // //                 <FiSend className="w-5 h-5" />
// // // //               )}
// // // //             </button>
// // // //           </div>
// // // //         </div>
// // // //       </div>
// // // //       <ToastContainer />
// // // //     </div>
// // // //   );
// // // // }

// // // "use client";

// // // import axios from "axios";
// // // import "react-toastify/dist/ReactToastify.css";
// // // import { serverURL } from "@/utils/utils";
// // // import { useState, useEffect, useRef } from "react";
// // // import { ToastContainer, toast } from "react-toastify";
// // // import { FiMoon, FiSun, FiSend } from "react-icons/fi";
// // // import Skeleton from "react-loading-skeleton";
// // // import "react-loading-skeleton/dist/skeleton.css";
// // // import { motion } from "framer-motion";
// // // import { trefoil } from 'ldrs';

// // // trefoil.register();

// // // function countWords(str: string) {
// // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // }

// // // export default function Home() {
// // //   const [text, setText] = useState<string>("");
// // //   const [loading, setLoading] = useState<boolean>(false);
// // //   const [messages, setMessages] = useState<{ text: string; sender: string }[]>([]);
// // //   const [wordCount, setWordCount] = useState<number>(0);
// // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // //   const [theme, setTheme] = useState<string>("light");
// // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // //   const toggleTheme = () => {
// // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // //   };

// // //   const sendMessage = async () => {
// // //     if (text.trim().length < 3 || loading) return;
// // //     if (wordCount > 200) {
// // //       toast.error("Text exceeds 200 words limit.");
// // //       return;
// // //     }

// // //     setLoading(true);
// // //     setMessages([...messages, { text, sender: "user" }]);
// // //     setText("");

// // //     try {
// // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // //         text: text,
// // //         setting: 3,
// // //         output_format: "text"
// // //       });

// // //       setLoading(false);
      
// // //       const humanLikeVersions = response.data.humanLikeOutput;
      
// // //       setMessages(prev => [...prev, { text: humanLikeVersions, sender: "bot" }]);
// // //       setRemainingAttempts(response.data.remainingAttempts);
// // //       scrollToBottom();
// // //     } catch (error: any) {
// // //       setLoading(false);
// // //       if (error.response?.status === 429) {
// // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // //         setTimeout(() => {
// // //           window.location.href = '/signup';
// // //         }, 3000);
// // //       } else {
// // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // //       }
// // //     }
// // //   };

// // //   useEffect(() => {
// // //     const storedTheme = localStorage.getItem("theme") || "light";
// // //     setTheme(storedTheme);
// // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // //   }, []);

// // //   useEffect(() => {
// // //     localStorage.setItem("theme", theme);
// // //     document.documentElement.setAttribute("data-theme", theme);
// // //   }, [theme]);

// // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // //     const newText = event.target.value;
// // //     setText(newText);
// // //     setWordCount(countWords(newText));
// // //   };

// // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // //     if (event.key === 'Enter' && !event.shiftKey) {
// // //       event.preventDefault();
// // //       sendMessage();
// // //     }
// // //   };

// // //   const scrollToBottom = () => {
// // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // //   };

// // //   useEffect(() => {
// // //     scrollToBottom();
// // //   }, [messages]);

// // //   return (
// // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900 text-gray-100" : "bg-[#f0f4f8] text-gray-800"} min-h-screen w-screen p-5 max-sm:p-2`} style={{ fontFamily: 'Inter, sans-serif' }}>
// // //       <div className="flex justify-between items-center w-full mb-6">
// // //         <div>
// // //           <p className={`font-bold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-indigo-300" : "text-indigo-600"}`}>
// // //             NoaiGPT✦
// // //           </p>
// // //         </div>
// // //         <button 
// // //           onClick={toggleTheme} 
// // //           className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-yellow-300" : "bg-indigo-100 text-indigo-600"} transition-colors duration-200`}
// // //         >
// // //           {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // //         </button>
// // //       </div>

// // //       <div className={`flex flex-col mx-auto w-full max-w-4xl h-[calc(100vh-140px)] rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-lg overflow-hidden`}>
// // //         <div className="flex-grow overflow-y-auto p-6">
// // //           {messages.map((message, index) => (
// // //             <motion.div 
// // //               key={index} 
// // //               initial={{ opacity: 0, y: 20 }} 
// // //               animate={{ opacity: 1, y: 0 }} 
// // //               transition={{ duration: 0.3 }} 
// // //               className={`mb-4 p-4 rounded-lg max-w-[80%] ${
// // //                 message.sender === "user" 
// // //                   ? "bg-indigo-500 text-white self-end" 
// // //                   : `${theme === "dark" ? "bg-gray-700" : "bg-indigo-100"} ${theme === "dark" ? "text-gray-100" : "text-gray-800"} self-start`
// // //               }`}
// // //             >
// // //               {message.text}
// // //             </motion.div>
// // //           ))}
// // //           {loading && <Skeleton count={1} />}
// // //           <div ref={messagesEndRef} />
// // //         </div>
        
// // //         <div className={`p-4 ${theme === "dark" ? "bg-gray-700" : "bg-indigo-50"}`}>
// // //           <div className={`flex items-center w-full rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} border ${theme === "dark" ? "border-gray-600" : "border-indigo-200"}`}>
// // //             <textarea 
// // //               ref={textareaRef}
// // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-gray-100" : "text-gray-800"}`}
// // //               rows={3}
// // //               value={text} 
// // //               onChange={handleTextAreaChange}
// // //               onKeyDown={handleKeyDown}
// // //               placeholder="Send message..." 
// // //             />
// // //             <button 
// // //               className={`p-3 bg-transparent ${theme === "dark" ? "text-indigo-300 hover:text-indigo-200" : "text-indigo-500 hover:text-indigo-600"} focus:outline-none flex items-center transition-colors duration-200`}
// // //               onClick={sendMessage}
// // //               disabled={loading || text.trim().length < 3}
// // //             >
// // //               {loading ? (
// // //                 <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // //               ) : (
// // //                 <FiSend className="w-5 h-5" />
// // //               )}
// // //             </button>
// // //           </div>
// // //         </div>
// // //       </div>
// // //       <ToastContainer />
// // //     </div>
// // //   );
// // // }

// // "use client";

// // import axios from "axios";
// // import "react-toastify/dist/ReactToastify.css";
// // import { serverURL } from "@/utils/utils";
// // import { useState, useEffect, useRef } from "react";
// // import { ToastContainer, toast } from "react-toastify";
// // import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight } from "react-icons/fi";
// // import Skeleton from "react-loading-skeleton";
// // import "react-loading-skeleton/dist/skeleton.css";
// // import { motion } from "framer-motion";
// // import { trefoil } from 'ldrs';

// // trefoil.register();

// // function countWords(str: string) {
// //   return str.trim().split(/\s+/).filter(Boolean).length;
// // }

// // interface Message {
// //   text: string;
// //   sender: string;
// //   versions?: { text: string; confidence: number }[];
// //   currentVersionIndex?: number;
// // }

// // export default function Home() {
// //   const [text, setText] = useState<string>("");
// //   const [loading, setLoading] = useState<boolean>(false);
// //   const [messages, setMessages] = useState<Message[]>([]);
// //   const [wordCount, setWordCount] = useState<number>(0);
// //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// //   const [theme, setTheme] = useState<string>("light");
// //   const messagesEndRef = useRef<HTMLDivElement>(null);
// //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// //   const toggleTheme = () => {
// //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// //   };

// //   const sendMessage = async () => {
// //     if (text.trim().length < 3 || loading) return;
// //     if (wordCount > 200) {
// //       toast.error("Text exceeds 200 words limit.");
// //       return;
// //     }

// //     setLoading(true);
// //     setMessages([...messages, { text, sender: "user" }]);
// //     setText("");

// //     try {
// //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// //         text: text,
// //         setting: 3,
// //         output_format: "json"
// //       });

// //       setLoading(false);
      
// //       const humanLikeVersions = response.data.humanLikeVersions;
      
// //       setMessages(prev => [...prev, { 
// //         text: humanLikeVersions[0].text, 
// //         sender: "bot",
// //         versions: humanLikeVersions,
// //         currentVersionIndex: 0
// //       }]);
// //       setRemainingAttempts(response.data.remainingAttempts);
// //       scrollToBottom();
// //     } catch (error: any) {
// //       setLoading(false);
// //       if (error.response?.status === 429) {
// //         toast.error("No more free attempts. Please sign up for more rewrites.");
// //         setTimeout(() => {
// //           window.location.href = '/signup';
// //         }, 3000);
// //       } else {
// //         toast.error(error.response?.data?.error || "Something went wrong!");
// //       }
// //     }
// //   };

// //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// //     setMessages(prev => prev.map((msg, idx) => {
// //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// //         let newIndex = direction === 'next' 
// //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// //         return {
// //           ...msg,
// //           text: msg.versions[newIndex].text,
// //           currentVersionIndex: newIndex
// //         };
// //       }
// //       return msg;
// //     }));
// //   };

// //   useEffect(() => {
// //     const storedTheme = localStorage.getItem("theme") || "light";
// //     setTheme(storedTheme);
// //     document.documentElement.setAttribute("data-theme", storedTheme);
// //   }, []);

// //   useEffect(() => {
// //     localStorage.setItem("theme", theme);
// //     document.documentElement.setAttribute("data-theme", theme);
// //   }, [theme]);

// //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// //     const newText = event.target.value;
// //     setText(newText);
// //     setWordCount(countWords(newText));
// //   };

// //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// //     if (event.key === 'Enter' && !event.shiftKey) {
// //       event.preventDefault();
// //       sendMessage();
// //     }
// //   };

// //   const scrollToBottom = () => {
// //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// //   };

// //   useEffect(() => {
// //     scrollToBottom();
// //   }, [messages]);

// //   return (
// //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900 text-gray-100" : "bg-[#f0f4f8] text-gray-800"} min-h-screen w-screen p-5 max-sm:p-2`} style={{ fontFamily: 'Inter, sans-serif' }}>
// //       <div className="flex justify-between items-center w-full mb-6">
// //         <div>
// //           <p className={`font-bold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-indigo-300" : "text-indigo-600"}`}>
// //             NoaiGPT✦
// //           </p>
// //         </div>
// //         <button 
// //           onClick={toggleTheme} 
// //           className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-yellow-300" : "bg-indigo-100 text-indigo-600"} transition-colors duration-200`}
// //         >
// //           {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// //         </button>
// //       </div>

// //       <div className={`flex flex-col mx-auto w-full max-w-4xl h-[calc(100vh-140px)] rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-lg overflow-hidden`}>
// //         <div className="flex-grow overflow-y-auto p-6">
// //           {messages.map((message, index) => (
// //             <motion.div 
// //               key={index} 
// //               initial={{ opacity: 0, y: 20 }} 
// //               animate={{ opacity: 1, y: 0 }} 
// //               transition={{ duration: 0.3 }} 
// //               className={`mb-4 p-4 rounded-lg max-w-[80%] ${
// //                 message.sender === "user" 
// //                   ? "bg-indigo-500 text-white self-end" 
// //                   : `${theme === "dark" ? "bg-gray-700" : "bg-indigo-100"} ${theme === "dark" ? "text-gray-100" : "text-gray-800"} self-start`
// //               }`}
// //             >
// //               {message.text}
// //               {message.sender === "bot" && message.versions && (
// //                 <div className="mt-2 flex justify-between items-center">
// //                   <button onClick={() => changeVersion(index, 'prev')} className="text-gray-500 hover:text-gray-700">
// //                     <FiChevronLeft />
// //                   </button>
// //                   <span className="text-sm text-gray-500">
// //                     {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// //                   </span>
// //                   <button onClick={() => changeVersion(index, 'next')} className="text-gray-500 hover:text-gray-700">
// //                     <FiChevronRight />
// //                   </button>
// //                 </div>
// //               )}
// //             </motion.div>
// //           ))}
// //           {loading && <Skeleton count={1} />}
// //           <div ref={messagesEndRef} />
// //         </div>
        
// //         <div className={`p-4 ${theme === "dark" ? "bg-gray-700" : "bg-indigo-50"}`}>
// //           <div className={`flex items-center w-full rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} border ${theme === "dark" ? "border-gray-600" : "border-indigo-200"}`}>
// //             <textarea 
// //               ref={textareaRef}
// //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-gray-100" : "text-gray-800"} border-b-2 border-green-500`}
// //               rows={3}
// //               value={text} 
// //               onChange={handleTextAreaChange}
// //               onKeyDown={handleKeyDown}
// //               placeholder="Send message..." 
// //             />
// //             <button 
// //               className={`p-3 bg-transparent ${theme === "dark" ? "text-indigo-300 hover:text-indigo-200" : "text-indigo-500 hover:text-indigo-600"} focus:outline-none flex items-center transition-colors duration-200`}
// //               onClick={sendMessage}
// //               disabled={loading || text.trim().length < 3}
// //             >
// //               {loading ? (
// //                 <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// //               ) : (
// //                 <FiSend className="w-5 h-5" />
// //               )}
// //             </button>
// //           </div>
// //         </div>
// //       </div>
// //       <ToastContainer />
// //     </div>
// //   );
// // }

// "use client";

// import axios from "axios";
// import "react-toastify/dist/ReactToastify.css";
// import { serverURL } from "@/utils/utils";
// import { useState, useEffect, useRef } from "react";
// import { ToastContainer, toast } from "react-toastify";
// import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// import Skeleton from "react-loading-skeleton";
// import "react-loading-skeleton/dist/skeleton.css";
// import { motion } from "framer-motion";
// import { trefoil } from 'ldrs';

// trefoil.register();

// function countWords(str: string) {
//   return str.trim().split(/\s+/).filter(Boolean).length;
// }

// interface Message {
//   text: string;
//   sender: string;
//   versions?: { text: string; confidence: number }[];
//   currentVersionIndex?: number;
// }

// export default function Home() {
//   const [text, setText] = useState<string>("");
//   const [loading, setLoading] = useState<boolean>(false);
//   const [messages, setMessages] = useState<Message[]>([]);
//   const [wordCount, setWordCount] = useState<number>(0);
//   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
//   const [theme, setTheme] = useState<string>("light");
//   const messagesEndRef = useRef<HTMLDivElement>(null);
//   const textareaRef = useRef<HTMLTextAreaElement>(null);

//   const toggleTheme = () => {
//     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
//   };

//   const sendMessage = async () => {
//     if (text.trim().length < 3 || loading) return;
//     if (wordCount > 200) {
//       toast.error("Text exceeds 200 words limit.");
//       return;
//     }

//     setLoading(true);
//     setMessages([...messages, { text, sender: "user" }]);
//     setText("");

//     try {
//       const response = await axios.post(`${serverURL}/free/rewrite`, {
//         text: text,
//         setting: 3,
//         output_format: "json"
//       });

//       setLoading(false);
      
//       const humanLikeVersions = response.data.humanLikeVersions;
      
//       setMessages(prev => [...prev, { 
//         text: humanLikeVersions[0].text, 
//         sender: "bot",
//         versions: humanLikeVersions,
//         currentVersionIndex: 0
//       }]);
//       setRemainingAttempts(response.data.remainingAttempts);
//       scrollToBottom();
//     } catch (error: any) {
//       setLoading(false);
//       if (error.response?.status === 429) {
//         toast.error("No more free attempts. Please sign up for more rewrites.");
//         setTimeout(() => {
//           window.location.href = '/signup';
//         }, 3000);
//       } else {
//         toast.error(error.response?.data?.error || "Something went wrong!");
//       }
//     }
//   };

//   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
//     setMessages(prev => prev.map((msg, idx) => {
//       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
//         let newIndex = direction === 'next' 
//           ? (msg.currentVersionIndex + 1) % msg.versions.length
//           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
//         return {
//           ...msg,
//           text: msg.versions[newIndex].text,
//           currentVersionIndex: newIndex
//         };
//       }
//       return msg;
//     }));
//   };

//   const copyToClipboard = (text: string) => {
//     navigator.clipboard.writeText(text).then(() => {
//       toast.success("Copied to clipboard!");
//     }, (err) => {
//       console.error('Could not copy text: ', err);
//       toast.error("Failed to copy text.");
//     });
//   };

//   const redoMessage = (text: string) => {
//     setText(text);
//     textareaRef.current?.focus();
//   };

//   useEffect(() => {
//     const storedTheme = localStorage.getItem("theme") || "light";
//     setTheme(storedTheme);
//     document.documentElement.setAttribute("data-theme", storedTheme);
//   }, []);

//   useEffect(() => {
//     localStorage.setItem("theme", theme);
//     document.documentElement.setAttribute("data-theme", theme);
//   }, [theme]);

//   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
//     const newText = event.target.value;
//     setText(newText);
//     setWordCount(countWords(newText));
//   };

//   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
//     if (event.key === 'Enter' && !event.shiftKey) {
//       event.preventDefault();
//       sendMessage();
//     }
//   };

//   const scrollToBottom = () => {
//     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
//   };

//   useEffect(() => {
//     scrollToBottom();
//   }, [messages]);

//   return (
//     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900 text-gray-100" : "bg-[#f0f4f8] text-gray-800"} min-h-screen w-screen p-5 max-sm:p-2`} style={{ fontFamily: 'Inter, sans-serif' }}>
//       <div className="flex justify-between items-center w-full mb-6">
//         <div>
//           <p className={`font-bold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-indigo-300" : "text-indigo-600"}`}>
//             NoaiGPT✦
//           </p>
//         </div>
//         <button 
//           onClick={toggleTheme} 
//           className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-yellow-300" : "bg-indigo-100 text-indigo-600"} transition-colors duration-200`}
//         >
//           {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
//         </button>
//       </div>

//       <div className={`flex flex-col mx-auto w-full max-w-4xl h-[calc(100vh-140px)] rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-lg overflow-hidden`}>
//         <div className="flex-grow overflow-y-auto p-6">
//           {messages.map((message, index) => (
//             <motion.div 
//               key={index} 
//               initial={{ opacity: 0, y: 20 }} 
//               animate={{ opacity: 1, y: 0 }} 
//               transition={{ duration: 0.3 }} 
//               className={`mb-4 p-4 rounded-lg max-w-[80%] ${
//                 message.sender === "user" 
//                   ? "bg-indigo-500 text-white self-end" 
//                   : `${theme === "dark" ? "bg-gray-700" : "bg-indigo-100"} ${theme === "dark" ? "text-gray-100" : "text-gray-800"} self-start border-b-2 border-green-500`
//               }`}
//             >
//               {message.text}
//               {message.sender === "bot" && message.versions && (
//                 <div className="mt-2 flex justify-between items-center">
//                   <button onClick={() => changeVersion(index, 'prev')} className="text-gray-500 hover:text-gray-700">
//                     <FiChevronLeft />
//                   </button>
//                   <span className="text-sm text-gray-500">
//                     {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
//                   </span>
//                   <button onClick={() => changeVersion(index, 'next')} className="text-gray-500 hover:text-gray-700">
//                     <FiChevronRight />
//                   </button>
//                 </div>
//               )}
//               {message.sender === "bot" && (
//                 <div className="mt-2 flex justify-end space-x-2">
//                   <button onClick={() => copyToClipboard(message.text)} className="text-gray-500 hover:text-gray-700">
//                     <FiCopy />
//                   </button>
//                   <button onClick={() => redoMessage(message.text)} className="text-gray-500 hover:text-gray-700">
//                     <FiRefreshCw />
//                   </button>
//                 </div>
//               )}
//             </motion.div>
//           ))}
//           {loading && <Skeleton count={1} />}
//           <div ref={messagesEndRef} />
//         </div>
        
//         <div className={`p-4 ${theme === "dark" ? "bg-gray-700" : "bg-indigo-50"}`}>
//           <div className={`flex items-center w-full rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} border ${theme === "dark" ? "border-gray-600" : "border-indigo-200"}`}>
//             <textarea 
//               ref={textareaRef}
//               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-gray-100" : "text-gray-800"} border-b-2 border-green-500`}
//               rows={3}
//               value={text} 
//               onChange={handleTextAreaChange}
//               onKeyDown={handleKeyDown}
//               placeholder="Send message..." 
//             />
//             <button 
//               className={`p-3 bg-transparent ${theme === "dark" ? "text-indigo-300 hover:text-indigo-200" : "text-indigo-500 hover:text-indigo-600"} focus:outline-none flex items-center transition-colors duration-200`}
//               onClick={sendMessage}
//               disabled={loading || text.trim().length < 3}
//             >
//               {loading ? (
//                 <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
//               ) : (
//                 <FiSend className="w-5 h-5" />
//               )}
//             </button>
//           </div>
//         </div>
//       </div>
//       <ToastContainer />
//     </div>
//   );
// }

"use client";

import axios from "axios";
import "react-toastify/dist/ReactToastify.css";
import { serverURL } from "@/utils/utils";
import { useState, useEffect, useRef } from "react";
import { ToastContainer, toast } from "react-toastify";
import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw, FiUser } from "react-icons/fi";
import Skeleton from "react-loading-skeleton";
import "react-loading-skeleton/dist/skeleton.css";
import { motion } from "framer-motion";
import { trefoil } from 'ldrs';

trefoil.register();

function countWords(str: string) {
  return str.trim().split(/\s+/).filter(Boolean).length;
}

interface Message {
  text: string;
  sender: string;
  versions?: { text: string; confidence: number }[];
  currentVersionIndex?: number;
}

export default function Home() {
  const [text, setText] = useState<string>("");
  const [loading, setLoading] = useState<boolean>(false);
  const [messages, setMessages] = useState<Message[]>([]);
  const [wordCount, setWordCount] = useState<number>(0);
  const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
  const [theme, setTheme] = useState<string>("light");
  const messagesEndRef = useRef<HTMLDivElement>(null);
  const textareaRef = useRef<HTMLTextAreaElement>(null);

  const toggleTheme = () => {
    setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
  };

  const sendMessage = async () => {
    if (text.trim().length < 3 || loading) return;
    if (wordCount > 200) {
      toast.error("Text exceeds 200 words limit.");
      return;
    }

    setLoading(true);
    setMessages([...messages, { text, sender: "user" }]);
    setText("");

    try {
      const response = await axios.post(`${serverURL}/free/rewrite`, {
        text: text,
        setting: 3,
        output_format: "json"
      });

      setLoading(false);
      
      const humanLikeVersions = response.data.humanLikeVersions;
      
      setMessages(prev => [...prev, { 
        text: humanLikeVersions[0].text, 
        sender: "bot",
        versions: humanLikeVersions,
        currentVersionIndex: 0
      }]);
      setRemainingAttempts(response.data.remainingAttempts);
      scrollToBottom();
    } catch (error: any) {
      setLoading(false);
      if (error.response?.status === 429) {
        toast.error("No more free attempts. Please sign up for more rewrites.");
        setTimeout(() => {
          window.location.href = '/signup';
        }, 3000);
      } else {
        toast.error(error.response?.data?.error || "Something went wrong!");
      }
    }
  };

  const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
    setMessages(prev => prev.map((msg, idx) => {
      if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
        let newIndex = direction === 'next' 
          ? (msg.currentVersionIndex + 1) % msg.versions.length
          : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
        return {
          ...msg,
          text: msg.versions[newIndex].text,
          currentVersionIndex: newIndex
        };
      }
      return msg;
    }));
  };

  const copyToClipboard = (text: string) => {
    navigator.clipboard.writeText(text).then(() => {
      toast.success("Copied to clipboard!");
    }, (err) => {
      console.error('Could not copy text: ', err);
      toast.error("Failed to copy text.");
    });
  };

  const redoMessage = (text: string) => {
    setText(text);
    textareaRef.current?.focus();
  };

  useEffect(() => {
    const storedTheme = localStorage.getItem("theme") || "light";
    setTheme(storedTheme);
    document.documentElement.setAttribute("data-theme", storedTheme);
  }, []);

  useEffect(() => {
    localStorage.setItem("theme", theme);
    document.documentElement.setAttribute("data-theme", theme);
  }, [theme]);

  const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
    const newText = event.target.value;
    setText(newText);
    setWordCount(countWords(newText));
  };

  const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
    if (event.key === 'Enter' && !event.shiftKey) {
      event.preventDefault();
      sendMessage();
    }
  };

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  };

  useEffect(() => {
    scrollToBottom();
  }, [messages]);

  return (
    <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900 text-gray-100" : "bg-[#f0f4f8] text-gray-800"} min-h-screen w-screen p-5 max-sm:p-2`} style={{ fontFamily: 'Inter, sans-serif' }}>
      <div className="flex justify-between items-center w-full mb-6">
        <div>
          <p className={`font-bold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-teal-300" : "text-teal-600"}`}>
            NoaiGPT✦
          </p>
        </div>
        <button 
          onClick={toggleTheme} 
          className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-yellow-300" : "bg-teal-100 text-teal-600"} transition-colors duration-200`}
        >
          {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
        </button>
      </div>

      <div className={`flex flex-col mx-auto w-full max-w-6xl h-[calc(100vh-120px)] rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-xl overflow-hidden`}>
        <div className="flex-grow overflow-y-auto p-6">
          {messages.map((message, index) => (
            <motion.div 
              key={index} 
              initial={{ opacity: 0, y: 20 }} 
              animate={{ opacity: 1, y: 0 }} 
              transition={{ duration: 0.3 }} 
              className={`mb-4 flex items-start ${message.sender === "user" ? "justify-end" : "justify-start"}`}
            >
              {message.sender === "bot" && (
                <div className="w-8 h-8 rounded-full bg-teal-500 flex items-center justify-center mr-2">
                  {loading && index === messages.length - 1 ? (
                    <l-trefoil size="20" stroke="2" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="white"></l-trefoil>
                  ) : (
                    <FiUser className="text-white" />
                  )}
                </div>
              )}
              <div className={`p-4 rounded-lg max-w-[70%] ${
                message.sender === "user" 
                  ? "bg-teal-500 text-white" 
                  : `${theme === "dark" ? "bg-gray-700" : "bg-teal-100"} ${theme === "dark" ? "text-gray-100" : "text-gray-800"} border-b-2 border-teal-500`
              }`}>
                {message.text}
                {message.sender === "bot" && message.versions && (
                  <div className="mt-2 flex justify-between items-center">
                    <button onClick={() => changeVersion(index, 'prev')} className="text-gray-500 hover:text-gray-700">
                      <FiChevronLeft />
                    </button>
                    <span className="text-sm text-gray-500">
                      {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
                    </span>
                    <button onClick={() => changeVersion(index, 'next')} className="text-gray-500 hover:text-gray-700">
                      <FiChevronRight />
                    </button>
                  </div>
                )}
                {message.sender === "bot" && (
                  <div className="mt-2 flex justify-end space-x-2">
                    <button onClick={() => copyToClipboard(message.text)} className="text-gray-500 hover:text-gray-700">
                      <FiCopy />
                    </button>
                    <button onClick={() => redoMessage(message.text)} className="text-gray-500 hover:text-gray-700">
                      <FiRefreshCw />
                    </button>
                  </div>
                )}
              </div>
              {message.sender === "user" && (
                <div className="w-8 h-8 rounded-full bg-teal-500 flex items-center justify-center ml-2">
                  <FiUser className="text-white" />
                </div>
              )}
            </motion.div>
          ))}
          {loading && <Skeleton count={1} />}
          <div ref={messagesEndRef} />
        </div>
        
        <div className={`p-4 ${theme === "dark" ? "bg-gray-700" : "bg-teal-50"}`}>
          <div className={`flex items-center w-full rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} border ${theme === "dark" ? "border-gray-600" : "border-teal-200"}`}>
            <textarea 
              ref={textareaRef}
              className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-gray-100" : "text-gray-800"} border-b-2 border-teal-500`}
              rows={2}
              value={text} 
              onChange={handleTextAreaChange}
              onKeyDown={handleKeyDown}
              placeholder="Send message..." 
            />
            <button 
              className={`p-3 bg-transparent ${theme === "dark" ? "text-teal-300 hover:text-teal-200" : "text-teal-500 hover:text-teal-600"} focus:outline-none flex items-center transition-colors duration-200`}
              onClick={sendMessage}
              disabled={loading || text.trim().length < 3}
            >
              {loading ? (
                <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
              ) : (
                <FiSend className="w-5 h-5" />
              )}
            </button>
          </div>
        </div>
      </div>
      <ToastContainer />
    </div>
  );
}


// // // // // // // // // // // // // // // // // // 

// // // // // // // // // // // // // // // // // "use client";

// // // // // // // // // // // // // // // // // import axios from "axios";
// // // // // // // // // // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // // // // // // // // // import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw, FiUser } from "react-icons/fi";
// // // // // // // // // // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // // // // // // // // // import { motion } from "framer-motion";
// // // // // // // // // // // // // // // // // import { trefoil } from 'ldrs';

// // // // // // // // // // // // // // // // // trefoil.register();

// // // // // // // // // // // // // // // // // function countWords(str: string) {
// // // // // // // // // // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // interface Message {
// // // // // // // // // // // // // // // // //   text: string;
// // // // // // // // // // // // // // // // //   sender: string;
// // // // // // // // // // // // // // // // //   originalInput?: string;
// // // // // // // // // // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // // // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // export default function Home() {
// // // // // // // // // // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // // // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // // // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // // // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // // // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // // // // // // // // // //   const [theme, setTheme] = useState<string>("light");
// // // // // // // // // // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // // // // // // // // // //   const toggleTheme = () => {
// // // // // // // // // // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const sendMessage = async () => {
// // // // // // // // // // // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // // // // // // // // // // //     if (wordCount > 200) {
// // // // // // // // // // // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // // // // // // // // // // //       return;
// // // // // // // // // // // // // // // // //     }

// // // // // // // // // // // // // // // // //     setLoading(true);
// // // // // // // // // // // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // // // // // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // // // // // // // // // // //     setText("");

// // // // // // // // // // // // // // // // //     try {
// // // // // // // // // // // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // // // // // // // // // // //         text: text,
// // // // // // // // // // // // // // // // //         setting: 3,
// // // // // // // // // // // // // // // // //         output_format: "json"
// // // // // // // // // // // // // // // // //       });

// // // // // // // // // // // // // // // // //       setLoading(false);
      
// // // // // // // // // // // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // // // // // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // // // // // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // // // // // // // // // // //         sender: "bot",
// // // // // // // // // // // // // // // // //         originalInput: text,
// // // // // // // // // // // // // // // // //         versions: humanLikeVersions,
// // // // // // // // // // // // // // // // //         currentVersionIndex: 0
// // // // // // // // // // // // // // // // //       }]);
// // // // // // // // // // // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // // // // // // // // // // //       scrollToBottom();
// // // // // // // // // // // // // // // // //     } catch (error: any) {
// // // // // // // // // // // // // // // // //       setLoading(false);
// // // // // // // // // // // // // // // // //       if (error.response?.status === 429) {
// // // // // // // // // // // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // // // // // // // // // // //         setTimeout(() => {
// // // // // // // // // // // // // // // // //           window.location.href = '/signup';
// // // // // // // // // // // // // // // // //         }, 3000);
// // // // // // // // // // // // // // // // //       } else {
// // // // // // // // // // // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // //     }
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // // // // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // // // // // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // // // // // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // // // // // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // // // // // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // // // // // // // // // // //         return {
// // // // // // // // // // // // // // // // //           ...msg,
// // // // // // // // // // // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // // // // // // // // // // //           currentVersionIndex: newIndex
// // // // // // // // // // // // // // // // //         };
// // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // //       return msg;
// // // // // // // // // // // // // // // // //     }));
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // // // // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // // // // // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // // // // // // // // // // //     }, (err) => {
// // // // // // // // // // // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // // // // // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // // // // // // // // // // //     });
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // // // // // // // // // //     setText(originalInput);
// // // // // // // // // // // // // // // // //     textareaRef.current?.focus();
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "light";
// // // // // // // // // // // // // // // // //     setTheme(storedTheme);
// // // // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // // // // // // // // // //   }, []);

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // // // // // // // // // //   }, [theme]);

// // // // // // // // // // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // // // //     const newText = event.target.value;
// // // // // // // // // // // // // // // // //     setText(newText);
// // // // // // // // // // // // // // // // //     setWordCount(countWords(newText));
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // // // // // // // // // // //       event.preventDefault();
// // // // // // // // // // // // // // // // //       sendMessage();
// // // // // // // // // // // // // // // // //     }
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // // // // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     scrollToBottom();
// // // // // // // // // // // // // // // // //   }, [messages]);

// // // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-[#0A1F1C] text-[#F0F0F0]" : "bg-[#F0F0F0] text-[#0A1F1C]"} min-h-screen w-screen`} style={{ fontFamily: 'Axiforma, sans-serif' }}>
// // // // // // // // // // // // // // // // //       <div className="sticky top-0 z-10 backdrop-blur-md bg-opacity-80 border-b border-[#00FF85]">
// // // // // // // // // // // // // // // // //         <div className="flex justify-between items-center w-full p-5 max-w-6xl mx-auto">
// // // // // // // // // // // // // // // // //           <div>
// // // // // // // // // // // // // // // // //             <p className={`font-medium text-3xl max-sm:text-2xl ${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"}`}>
// // // // // // // // // // // // // // // // //               NoaiGPT
// // // // // // // // // // // // // // // // //             </p>
// // // // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // // // //           <button 
// // // // // // // // // // // // // // // // //             onClick={toggleTheme} 
// // // // // // // // // // // // // // // // //             className={`p-2 rounded-full ${theme === "dark" ? "bg-[#0A1F1C] text-[#00FF85]" : "bg-[#E0F0E9] text-[#006D3B]"} transition-colors duration-200`}
// // // // // // // // // // // // // // // // //           >
// // // // // // // // // // // // // // // // //             {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // // // // // // // // // // // // // // // //           </button>
// // // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // // //       </div>

// // // // // // // // // // // // // // // // //       <div className="flex-grow overflow-hidden">
// // // // // // // // // // // // // // // // //         <div className={`mx-auto w-full max-w-6xl h-[calc(100vh-120px)] rounded-lg ${theme === "dark" ? "bg-[#0A1F1C]" : "bg-white"} shadow-xl overflow-hidden backdrop-blur-md bg-opacity-80`}>
// // // // // // // // // // // // // // // // //           <div className="flex flex-col h-full">
// // // // // // // // // // // // // // // // //             <div className="flex-grow overflow-y-auto p-6 space-y-4">
// // // // // // // // // // // // // // // // //               <div className="h-12 bg-gradient-to-b from-transparent to-[#0A1F1C] dark:to-[#F0F0F0] opacity-20 pointer-events-none"></div>
// // // // // // // // // // // // // // // // //               {messages.map((message, index) => (
// // // // // // // // // // // // // // // // //                 <motion.div 
// // // // // // // // // // // // // // // // //                   key={index} 
// // // // // // // // // // // // // // // // //                   initial={{ opacity: 0, y: 20 }} 
// // // // // // // // // // // // // // // // //                   animate={{ opacity: 1, y: 0 }} 
// // // // // // // // // // // // // // // // //                   transition={{ duration: 0.3 }} 
// // // // // // // // // // // // // // // // //                   className="flex items-start space-x-4"
// // // // // // // // // // // // // // // // //                 >
// // // // // // // // // // // // // // // // //                   <div className={`p-4 rounded-lg flex-1 ${message.sender === "user" ? "bg-[#E0F0E9] text-[#0A1F1C]" : "bg-transparent"}`}>
// // // // // // // // // // // // // // // // //                     {message.text}
// // // // // // // // // // // // // // // // //                   </div>
// // // // // // // // // // // // // // // // //                   {message.sender === "bot" && (
// // // // // // // // // // // // // // // // //                     <div className={`p-4 rounded-lg flex-1 ${theme === "dark" ? "bg-[#006D3B]" : "bg-[#F0F0F0]"} ${theme === "dark" ? "text-[#F0F0F0]" : "text-[#0A1F1C]"}`}>
// // // // // // // // // // // // // // // // //                       {message.text}
// // // // // // // // // // // // // // // // //                       {message.versions && (
// // // // // // // // // // // // // // // // //                         <div className="mt-2 flex justify-between items-center">
// // // // // // // // // // // // // // // // //                           <button onClick={() => changeVersion(index, 'prev')} className="text-[#000000] hover:text-[#00CC6A]">
// // // // // // // // // // // // // // // // //                             <FiChevronLeft />
// // // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // // //                           <span className="text-sm text-[#000000]">
// // // // // // // // // // // // // // // // //                             {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // // // // // // // // // //                           </span>
// // // // // // // // // // // // // // // // //                           <button onClick={() => changeVersion(index, 'next')} className="text-[#000000] hover:text-[#00CC6A]">
// // // // // // // // // // // // // // // // //                             <FiChevronRight />
// // // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // // //                         </div>
// // // // // // // // // // // // // // // // //                       )}
// // // // // // // // // // // // // // // // //                       <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // // // // // // // // // //                         <button onClick={() => copyToClipboard(message.text)} className="text-[#000000] hover:text-[#00CC6A]">
// // // // // // // // // // // // // // // // //                           <FiCopy />
// // // // // // // // // // // // // // // // //                         </button>
// // // // // // // // // // // // // // // // //                         <button onClick={() => redoMessage(message.originalInput || '')} className="text-[#000000] hover:text-[#00CC6A]">
// // // // // // // // // // // // // // // // //                           <FiRefreshCw />
// // // // // // // // // // // // // // // // //                         </button>
// // // // // // // // // // // // // // // // //                       </div>
// // // // // // // // // // // // // // // // //                     </div>
// // // // // // // // // // // // // // // // //                   )}
// // // // // // // // // // // // // // // // //                 </motion.div>
// // // // // // // // // // // // // // // // //               ))}
// // // // // // // // // // // // // // // // //               {loading && <Skeleton count={1} />}
// // // // // // // // // // // // // // // // //               <div ref={messagesEndRef} />
// // // // // // // // // // // // // // // // //             </div>
            
// // // // // // // // // // // // // // // // //             <div className="p-4 bg-transparent border-t border-[#00FF85]">
// // // // // // // // // // // // // // // // //               <div className="flex items-center w-full rounded-lg border-2 border-[#00FF85] focus-within:ring-2 focus-within:ring-[#00FF85] transition-all duration-300">
// // // // // // // // // // // // // // // // //                 <textarea 
// // // // // // // // // // // // // // // // //                   ref={textareaRef}
// // // // // // // // // // // // // // // // //                   className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-[#F0F0F0]" : "text-[#0A1F1C]"} placeholder-[#006D3B]`}
// // // // // // // // // // // // // // // // //                   rows={2}
// // // // // // // // // // // // // // // // //                   value={text} 
// // // // // // // // // // // // // // // // //                   onChange={handleTextAreaChange}
// // // // // // // // // // // // // // // // //                   onKeyDown={handleKeyDown}
// // // // // // // // // // // // // // // // //                   placeholder="Type your message here..." 
// // // // // // // // // // // // // // // // //                 />
// // // // // // // // // // // // // // // // //                 <button 
// // // // // // // // // // // // // // // // //                   className="p-3 bg-[#00FF85] text-[#0A1F1C] rounded-full hover:bg-[#00CC6A] focus:outline-none flex items-center justify-center transition-colors duration-200 w-12 h-12 mr-1"
// // // // // // // // // // // // // // // // //                   onClick={sendMessage}
// // // // // // // // // // // // // // // // //                   disabled={loading || text.trim().length < 3}
// // // // // // // // // // // // // // // // //                 >
// // // // // // // // // // // // // // // // //                   {loading ? (
// // // // // // // // // // // // // // // // //                     <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // // // // // // // // // // // // // //                   ) : (
// // // // // // // // // // // // // // // // //                     <FiSend className="w-5 h-5" />
// // // // // // // // // // // // // // // // //                   )}
// // // // // // // // // // // // // // // // //                 </button>
// // // // // // // // // // // // // // // // //               </div>
// // // // // // // // // // // // // // // // //             </div>
// // // // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // // //       <ToastContainer />
// // // // // // // // // // // // // // // // //     </div>
// // // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // "use client";

// // // // // // // // // // // // // // // // // import axios from "axios";
// // // // // // // // // // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // // // // // // // // // import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw, FiUser } from "react-icons/fi";
// // // // // // // // // // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // // // // // // // // // import { motion } from "framer-motion";
// // // // // // // // // // // // // // // // // import { trefoil } from 'ldrs';

// // // // // // // // // // // // // // // // // trefoil.register();

// // // // // // // // // // // // // // // // // function countWords(str: string) {
// // // // // // // // // // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // interface Message {
// // // // // // // // // // // // // // // // //   text: string;
// // // // // // // // // // // // // // // // //   sender: string;
// // // // // // // // // // // // // // // // //   originalInput?: string;
// // // // // // // // // // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // // // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // export default function Home() {
// // // // // // // // // // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // // // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // // // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // // // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // // // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // // // // // // // // // //   const [theme, setTheme] = useState<string>("light");
// // // // // // // // // // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // // // // // // // // // //   const toggleTheme = () => {
// // // // // // // // // // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const sendMessage = async () => {
// // // // // // // // // // // // // // // // //     // ... (rest of the sendMessage function remains unchanged)
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // // // // // // // // // //     // ... (rest of the changeVersion function remains unchanged)
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // // // // // // // // // //     // ... (rest of the copyToClipboard function remains unchanged)
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // // // // // // // // // //     // ... (rest of the redoMessage function remains unchanged)
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "light";
// // // // // // // // // // // // // // // // //     setTheme(storedTheme);
// // // // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // // // // // // // // // //   }, []);

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // // // // // // // // // //   }, [theme]);

// // // // // // // // // // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // // // //     // ... (rest of the handleTextAreaChange function remains unchanged)
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // // // //     // ... (rest of the handleKeyDown function remains unchanged)
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // // // // // // // // // //     // ... (rest of the scrollToBottom function remains unchanged)
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     scrollToBottom();
// // // // // // // // // // // // // // // // //   }, [messages]);

// // // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-[#0A1F1C]" : "bg-[#F0F0F0]"} min-h-screen w-screen`} style={{ fontFamily: 'Axiforma, sans-serif' }}>
// // // // // // // // // // // // // // // // //       <div className="fixed top-0 left-0 right-0 z-50">
// // // // // // // // // // // // // // // // //         <div className="absolute inset-0 bg-gradient-to-r from-[#006D3B] to-[#00FF85] opacity-20"></div>
// // // // // // // // // // // // // // // // //         <div className="relative backdrop-blur-md bg-opacity-70 border-b border-[#00FF85]">
// // // // // // // // // // // // // // // // //           <div className="flex justify-between items-center w-full p-5 max-w-6xl mx-auto">
// // // // // // // // // // // // // // // // //             <div>
// // // // // // // // // // // // // // // // //               <p className={`font-medium text-3xl max-sm:text-2xl ${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"}`}>
// // // // // // // // // // // // // // // // //                 NoaiGPT
// // // // // // // // // // // // // // // // //               </p>
// // // // // // // // // // // // // // // // //             </div>
// // // // // // // // // // // // // // // // //             <button 
// // // // // // // // // // // // // // // // //               onClick={toggleTheme} 
// // // // // // // // // // // // // // // // //               className={`p-2 rounded-full ${theme === "dark" ? "bg-[#0A1F1C] text-[#00FF85]" : "bg-[#E0F0E9] text-[#006D3B]"} transition-colors duration-200`}
// // // // // // // // // // // // // // // // //             >
// // // // // // // // // // // // // // // // //               {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // // // // // // // // // // // // // // // //             </button>
// // // // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // // //       </div>

// // // // // // // // // // // // // // // // //       <div className="flex-grow overflow-hidden mt-20">
// // // // // // // // // // // // // // // // //         <div className={`mx-auto w-full max-w-6xl h-[calc(100vh-140px)] rounded-lg ${theme === "dark" ? "bg-[#0A1F1C]" : "bg-white"} shadow-xl overflow-hidden backdrop-blur-md bg-opacity-80`}>
// // // // // // // // // // // // // // // // //           <div className="flex flex-col h-full">
// // // // // // // // // // // // // // // // //             <div className="flex-grow overflow-y-auto p-6 space-y-4">
// // // // // // // // // // // // // // // // //               <div className="h-12 bg-gradient-to-b from-transparent to-[#0A1F1C] dark:to-[#F0F0F0] opacity-20 pointer-events-none"></div>
// // // // // // // // // // // // // // // // //               {messages.map((message, index) => (
// // // // // // // // // // // // // // // // //                 <motion.div 
// // // // // // // // // // // // // // // // //                   key={index} 
// // // // // // // // // // // // // // // // //                   initial={{ opacity: 0, y: 20 }} 
// // // // // // // // // // // // // // // // //                   animate={{ opacity: 1, y: 0 }} 
// // // // // // // // // // // // // // // // //                   transition={{ duration: 0.3 }} 
// // // // // // // // // // // // // // // // //                   className="flex items-start space-x-4"
// // // // // // // // // // // // // // // // //                 >
// // // // // // // // // // // // // // // // //                   <div className={`p-4 rounded-lg flex-1 ${message.sender === "user" ? "bg-[#E0F0E9] text-[#0A1F1C]" : "bg-transparent"}`}>
// // // // // // // // // // // // // // // // //                     {message.text}
// // // // // // // // // // // // // // // // //                   </div>
// // // // // // // // // // // // // // // // //                   {message.sender === "bot" && (
// // // // // // // // // // // // // // // // //                     <div className={`p-4 rounded-lg flex-1 ${theme === "dark" ? "bg-[#006D3B]" : "bg-[#F0F0F0]"} ${theme === "dark" ? "text-[#F0F0F0]" : "text-[#0A1F1C]"}`}>
// // // // // // // // // // // // // // // // //                       {message.text}
// // // // // // // // // // // // // // // // //                       {message.versions && (
// // // // // // // // // // // // // // // // //                         <div className="mt-2 flex justify-between items-center">
// // // // // // // // // // // // // // // // //                           <button onClick={() => changeVersion(index, 'prev')} className="text-[#00FF85] hover:text-[#00CC6A]">
// // // // // // // // // // // // // // // // //                             <FiChevronLeft />
// // // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // // //                           <span className="text-sm text-[#00FF85]">
// // // // // // // // // // // // // // // // //                             {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // // // // // // // // // //                           </span>
// // // // // // // // // // // // // // // // //                           <button onClick={() => changeVersion(index, 'next')} className="text-[#00FF85] hover:text-[#00CC6A]">
// // // // // // // // // // // // // // // // //                             <FiChevronRight />
// // // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // // //                         </div>
// // // // // // // // // // // // // // // // //                       )}
// // // // // // // // // // // // // // // // //                       <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // // // // // // // // // //                         <button onClick={() => copyToClipboard(message.text)} className="text-[#00FF85] hover:text-[#00CC6A]">
// // // // // // // // // // // // // // // // //                           <FiCopy />
// // // // // // // // // // // // // // // // //                         </button>
// // // // // // // // // // // // // // // // //                         <button onClick={() => redoMessage(message.originalInput || '')} className="text-[#00FF85] hover:text-[#00CC6A]">
// // // // // // // // // // // // // // // // //                           <FiRefreshCw />
// // // // // // // // // // // // // // // // //                         </button>
// // // // // // // // // // // // // // // // //                       </div>
// // // // // // // // // // // // // // // // //                     </div>
// // // // // // // // // // // // // // // // //                   )}
// // // // // // // // // // // // // // // // //                 </motion.div>
// // // // // // // // // // // // // // // // //               ))}
// // // // // // // // // // // // // // // // //               {loading && <Skeleton count={1} />}
// // // // // // // // // // // // // // // // //               <div ref={messagesEndRef} />
// // // // // // // // // // // // // // // // //             </div>
            
// // // // // // // // // // // // // // // // //             <div className="p-4 bg-transparent border-t border-[#00FF85]">
// // // // // // // // // // // // // // // // //               <div className="flex items-center w-full rounded-lg border-2 border-[#00FF85] focus-within:ring-2 focus-within:ring-[#00FF85] transition-all duration-300">
// // // // // // // // // // // // // // // // //                 <textarea 
// // // // // // // // // // // // // // // // //                   ref={textareaRef}
// // // // // // // // // // // // // // // // //                   className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-[#F0F0F0]" : "text-[#0A1F1C]"} placeholder-[#006D3B]`}
// // // // // // // // // // // // // // // // //                   rows={2}
// // // // // // // // // // // // // // // // //                   value={text} 
// // // // // // // // // // // // // // // // //                   onChange={handleTextAreaChange}
// // // // // // // // // // // // // // // // //                   onKeyDown={handleKeyDown}
// // // // // // // // // // // // // // // // //                   placeholder="Type your message here..." 
// // // // // // // // // // // // // // // // //                 />
// // // // // // // // // // // // // // // // //                 <button 
// // // // // // // // // // // // // // // // //                   className="p-3 bg-[#00FF85] text-[#0A1F1C] rounded-full hover:bg-[#00CC6A] focus:outline-none flex items-center justify-center transition-colors duration-200 w-12 h-12 mr-1"
// // // // // // // // // // // // // // // // //                   onClick={sendMessage}
// // // // // // // // // // // // // // // // //                   disabled={loading || text.trim().length < 3}
// // // // // // // // // // // // // // // // //                 >
// // // // // // // // // // // // // // // // //                   {loading ? (
// // // // // // // // // // // // // // // // //                     <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // // // // // // // // // // // // // //                   ) : (
// // // // // // // // // // // // // // // // //                     <FiSend className="w-5 h-5" />
// // // // // // // // // // // // // // // // //                   )}
// // // // // // // // // // // // // // // // //                 </button>
// // // // // // // // // // // // // // // // //               </div>
// // // // // // // // // // // // // // // // //             </div>
// // // // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // // //       <ToastContainer />
// // // // // // // // // // // // // // // // //     </div>
// // // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // "use client";

// // // // // // // // // // // // // // // // // import axios from "axios";
// // // // // // // // // // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // // // // // // // // // import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw, FiUser } from "react-icons/fi";
// // // // // // // // // // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // // // // // // // // // import { motion } from "framer-motion";
// // // // // // // // // // // // // // // // // import { trefoil } from 'ldrs';

// // // // // // // // // // // // // // // // // trefoil.register();

// // // // // // // // // // // // // // // // // function countWords(str: string) {
// // // // // // // // // // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // interface Message {
// // // // // // // // // // // // // // // // //   text: string;
// // // // // // // // // // // // // // // // //   sender: string;
// // // // // // // // // // // // // // // // //   originalInput?: string;
// // // // // // // // // // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // // // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // export default function Home() {
// // // // // // // // // // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // // // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // // // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // // // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // // // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // // // // // // // // // //   const [theme, setTheme] = useState<string>("light");
// // // // // // // // // // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // // // // // // // // // //   const toggleTheme = () => {
// // // // // // // // // // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const sendMessage = async () => {
// // // // // // // // // // // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // // // // // // // // // // //     if (wordCount > 200) {
// // // // // // // // // // // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // // // // // // // // // // //       return;
// // // // // // // // // // // // // // // // //     }

// // // // // // // // // // // // // // // // //     setLoading(true);
// // // // // // // // // // // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // // // // // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // // // // // // // // // // //     setText("");

// // // // // // // // // // // // // // // // //     try {
// // // // // // // // // // // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // // // // // // // // // // //         text: text,
// // // // // // // // // // // // // // // // //         setting: 3,
// // // // // // // // // // // // // // // // //         output_format: "json"
// // // // // // // // // // // // // // // // //       });

// // // // // // // // // // // // // // // // //       setLoading(false);
      
// // // // // // // // // // // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // // // // // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // // // // // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // // // // // // // // // // //         sender: "bot",
// // // // // // // // // // // // // // // // //         originalInput: text,
// // // // // // // // // // // // // // // // //         versions: humanLikeVersions,
// // // // // // // // // // // // // // // // //         currentVersionIndex: 0
// // // // // // // // // // // // // // // // //       }]);
// // // // // // // // // // // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // // // // // // // // // // //       scrollToBottom();
// // // // // // // // // // // // // // // // //     } catch (error: any) {
// // // // // // // // // // // // // // // // //       setLoading(false);
// // // // // // // // // // // // // // // // //       if (error.response?.status === 429) {
// // // // // // // // // // // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // // // // // // // // // // //         setTimeout(() => {
// // // // // // // // // // // // // // // // //           window.location.href = '/signup';
// // // // // // // // // // // // // // // // //         }, 3000);
// // // // // // // // // // // // // // // // //       } else {
// // // // // // // // // // // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // //     }
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // // // // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // // // // // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // // // // // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // // // // // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // // // // // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // // // // // // // // // // //         return {
// // // // // // // // // // // // // // // // //           ...msg,
// // // // // // // // // // // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // // // // // // // // // // //           currentVersionIndex: newIndex
// // // // // // // // // // // // // // // // //         };
// // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // //       return msg;
// // // // // // // // // // // // // // // // //     }));
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // // // // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // // // // // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // // // // // // // // // // //     }, (err) => {
// // // // // // // // // // // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // // // // // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // // // // // // // // // // //     });
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // // // // // // // // // //     setText(originalInput);
// // // // // // // // // // // // // // // // //     textareaRef.current?.focus();
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "light";
// // // // // // // // // // // // // // // // //     setTheme(storedTheme);
// // // // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // // // // // // // // // //   }, []);

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // // // // // // // // // //   }, [theme]);

// // // // // // // // // // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // // // //     const newText = event.target.value;
// // // // // // // // // // // // // // // // //     setText(newText);
// // // // // // // // // // // // // // // // //     setWordCount(countWords(newText));
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // // // // // // // // // // //       event.preventDefault();
// // // // // // // // // // // // // // // // //       sendMessage();
// // // // // // // // // // // // // // // // //     }
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // // // // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     scrollToBottom();
// // // // // // // // // // // // // // // // //   }, [messages]);

// // // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-[#0A1F1C] text-[#F0F0F0]" : "bg-[#F5F7FA] text-[#333333]"} min-h-screen w-screen`} style={{ fontFamily: 'Axiforma, sans-serif' }}>
// // // // // // // // // // // // // // // // //       <div className="fixed top-0 left-0 right-0 z-50">
// // // // // // // // // // // // // // // // //         <div className={`backdrop-blur-md ${theme === "dark" ? "bg-[#0A1F1C]/70" : "bg-[#F5F7FA]/70"}`}>
// // // // // // // // // // // // // // // // //           <div className="flex justify-between items-center w-full p-5 max-w-6xl mx-auto">
// // // // // // // // // // // // // // // // //             <div>
// // // // // // // // // // // // // // // // //               <p className={`font-semibold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"}`}>
// // // // // // // // // // // // // // // // //                 NoaiGPT
// // // // // // // // // // // // // // // // //               </p>
// // // // // // // // // // // // // // // // //             </div>
// // // // // // // // // // // // // // // // //             <button 
// // // // // // // // // // // // // // // // //               onClick={toggleTheme} 
// // // // // // // // // // // // // // // // //               className={`p-2 rounded-full ${theme === "dark" ? "bg-[#1A2F2C] text-[#00FF85]" : "bg-[#E0F0E9] text-[#006D3B]"} transition-colors duration-200`}
// // // // // // // // // // // // // // // // //             >
// // // // // // // // // // // // // // // // //               {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // // // // // // // // // // // // // // // //             </button>
// // // // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // // //       </div>

// // // // // // // // // // // // // // // // //       <div className="flex-grow overflow-hidden mt-20 px-4">
// // // // // // // // // // // // // // // // //         <div className={`mx-auto w-full max-w-4xl h-[calc(100vh-140px)] rounded-lg ${theme === "dark" ? "bg-[#1A2F2C]" : "bg-white"} shadow-xl overflow-hidden`}>
// // // // // // // // // // // // // // // // //           <div className="flex flex-col h-full">
// // // // // // // // // // // // // // // // //             <div className="flex-grow overflow-y-auto p-6 space-y-4">
// // // // // // // // // // // // // // // // //               {messages.map((message, index) => (
// // // // // // // // // // // // // // // // //                 <motion.div 
// // // // // // // // // // // // // // // // //                   key={index} 
// // // // // // // // // // // // // // // // //                   initial={{ opacity: 0, y: 20 }} 
// // // // // // // // // // // // // // // // //                   animate={{ opacity: 1, y: 0 }} 
// // // // // // // // // // // // // // // // //                   transition={{ duration: 0.3 }} 
// // // // // // // // // // // // // // // // //                   className={`flex items-start space-x-4 ${message.sender === "user" ? "justify-end" : "justify-start"}`}
// // // // // // // // // // // // // // // // //                 >
// // // // // // // // // // // // // // // // //                   <div className={`p-4 rounded-lg max-w-[70%] ${
// // // // // // // // // // // // // // // // //                     message.sender === "user" 
// // // // // // // // // // // // // // // // //                       ? "bg-[#00FF85] text-[#0A1F1C]" 
// // // // // // // // // // // // // // // // //                       : `${theme === "dark" ? "bg-[#006D3B]" : "bg-[#E0F0E9]"} ${theme === "dark" ? "text-[#F0F0F0]" : "text-[#0A1F1C]"}`
// // // // // // // // // // // // // // // // //                   }`}>
// // // // // // // // // // // // // // // // //                     {message.text}
// // // // // // // // // // // // // // // // //                     {message.sender === "bot" && message.versions && (
// // // // // // // // // // // // // // // // //                       <div className="mt-2 flex justify-between items-center">
// // // // // // // // // // // // // // // // //                         <button onClick={() => changeVersion(index, 'prev')} className={`${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"} hover:text-[#00CC6A]`}>
// // // // // // // // // // // // // // // // //                           <FiChevronLeft />
// // // // // // // // // // // // // // // // //                         </button>
// // // // // // // // // // // // // // // // //                         <span className={`text-sm ${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"}`}>
// // // // // // // // // // // // // // // // //                           {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // // // // // // // // // //                         </span>
// // // // // // // // // // // // // // // // //                         <button onClick={() => changeVersion(index, 'next')} className={`${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"} hover:text-[#00CC6A]`}>
// // // // // // // // // // // // // // // // //                           <FiChevronRight />
// // // // // // // // // // // // // // // // //                         </button>
// // // // // // // // // // // // // // // // //                       </div>
// // // // // // // // // // // // // // // // //                     )}
// // // // // // // // // // // // // // // // //                     {message.sender === "bot" && (
// // // // // // // // // // // // // // // // //                       <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // // // // // // // // // //                         <button onClick={() => copyToClipboard(message.text)} className={`${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"} hover:text-[#00CC6A]`}>
// // // // // // // // // // // // // // // // //                           <FiCopy />
// // // // // // // // // // // // // // // // //                         </button>
// // // // // // // // // // // // // // // // //                         <button onClick={() => redoMessage(message.originalInput || '')} className={`${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"} hover:text-[#00CC6A]`}>
// // // // // // // // // // // // // // // // //                           <FiRefreshCw />
// // // // // // // // // // // // // // // // //                         </button>
// // // // // // // // // // // // // // // // //                       </div>
// // // // // // // // // // // // // // // // //                     )}
// // // // // // // // // // // // // // // // //                   </div>
// // // // // // // // // // // // // // // // //                 </motion.div>
// // // // // // // // // // // // // // // // //               ))}
// // // // // // // // // // // // // // // // //               {loading && <Skeleton count={1} />}
// // // // // // // // // // // // // // // // //               <div ref={messagesEndRef} />
// // // // // // // // // // // // // // // // //             </div>
            
// // // // // // // // // // // // // // // // //             <div className="p-4 bg-transparent">
// // // // // // // // // // // // // // // // //               <div className={`flex items-center w-full rounded-lg ${theme === "dark" ? "bg-[#1A2F2C]" : "bg-[#E0F0E9]"} focus-within:ring-2 focus-within:ring-[#00FF85] transition-all duration-300`}>
// // // // // // // // // // // // // // // // //                 <textarea 
// // // // // // // // // // // // // // // // //                   ref={textareaRef}
// // // // // // // // // // // // // // // // //                   className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-[#F0F0F0]" : "text-[#0A1F1C]"} placeholder-[#006D3B]`}
// // // // // // // // // // // // // // // // //                   rows={2}
// // // // // // // // // // // // // // // // //                   value={text} 
// // // // // // // // // // // // // // // // //                   onChange={handleTextAreaChange}
// // // // // // // // // // // // // // // // //                   onKeyDown={handleKeyDown}
// // // // // // // // // // // // // // // // //                   placeholder="Type your message here..." 
// // // // // // // // // // // // // // // // //                 />
// // // // // // // // // // // // // // // // //                 <button 
// // // // // // // // // // // // // // // // //                   className="p-3 bg-[#00FF85] text-[#0A1F1C] rounded-full hover:bg-[#00CC6A] focus:outline-none flex items-center justify-center transition-colors duration-200 w-12 h-12 mr-1"
// // // // // // // // // // // // // // // // //                   onClick={sendMessage}
// // // // // // // // // // // // // // // // //                   disabled={loading || text.trim().length < 3}
// // // // // // // // // // // // // // // // //                 >
// // // // // // // // // // // // // // // // //                   {loading ? (
// // // // // // // // // // // // // // // // //                     <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // // // // // // // // // // // // // //                   ) : (
// // // // // // // // // // // // // // // // //                     <FiSend className="w-5 h-5" />
// // // // // // // // // // // // // // // // //                   )}
// // // // // // // // // // // // // // // // //                 </button>
// // // // // // // // // // // // // // // // //               </div>
// // // // // // // // // // // // // // // // //             </div>
// // // // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // // //       <ToastContainer />
// // // // // // // // // // // // // // // // //     </div>
// // // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // // "use client";

// // // // // // // // // // // // // // // // // import axios from "axios";
// // // // // // // // // // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // // // // // // // // // import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // // // // // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // // // // // // // // // import { motion, AnimatePresence } from "framer-motion";
// // // // // // // // // // // // // // // // // import { trefoil } from 'ldrs';

// // // // // // // // // // // // // // // // // trefoil.register();

// // // // // // // // // // // // // // // // // function countWords(str: string) {
// // // // // // // // // // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // interface Message {
// // // // // // // // // // // // // // // // //   text: string;
// // // // // // // // // // // // // // // // //   sender: string;
// // // // // // // // // // // // // // // // //   originalInput?: string;
// // // // // // // // // // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // // // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // export default function Home() {
// // // // // // // // // // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // // // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // // // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // // // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // // // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // // // // // // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // // // // // // // // // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // // // // // // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // // // // // // // // // //   const toggleTheme = () => {
// // // // // // // // // // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const sendMessage = async () => {
// // // // // // // // // // // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // // // // // // // // // // //     if (wordCount > 200) {
// // // // // // // // // // // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // // // // // // // // // // //       return;
// // // // // // // // // // // // // // // // //     }

// // // // // // // // // // // // // // // // //     setLoading(true);
// // // // // // // // // // // // // // // // //     setShowChat(true);
// // // // // // // // // // // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // // // // // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // // // // // // // // // // //     setText("");

// // // // // // // // // // // // // // // // //     try {
// // // // // // // // // // // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // // // // // // // // // // //         text: text,
// // // // // // // // // // // // // // // // //         setting: 3,
// // // // // // // // // // // // // // // // //         output_format: "json"
// // // // // // // // // // // // // // // // //       });

// // // // // // // // // // // // // // // // //       setLoading(false);
      
// // // // // // // // // // // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // // // // // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // // // // // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // // // // // // // // // // //         sender: "bot",
// // // // // // // // // // // // // // // // //         originalInput: text,
// // // // // // // // // // // // // // // // //         versions: humanLikeVersions,
// // // // // // // // // // // // // // // // //         currentVersionIndex: 0
// // // // // // // // // // // // // // // // //       }]);
// // // // // // // // // // // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // // // // // // // // // // //       scrollToBottom();
// // // // // // // // // // // // // // // // //     } catch (error: any) {
// // // // // // // // // // // // // // // // //       setLoading(false);
// // // // // // // // // // // // // // // // //       if (error.response?.status === 429) {
// // // // // // // // // // // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // // // // // // // // // // //         setTimeout(() => {
// // // // // // // // // // // // // // // // //           window.location.href = '/signup';
// // // // // // // // // // // // // // // // //         }, 3000);
// // // // // // // // // // // // // // // // //       } else {
// // // // // // // // // // // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // //     }
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // // // // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // // // // // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // // // // // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // // // // // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // // // // // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // // // // // // // // // // //         return {
// // // // // // // // // // // // // // // // //           ...msg,
// // // // // // // // // // // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // // // // // // // // // // //           currentVersionIndex: newIndex
// // // // // // // // // // // // // // // // //         };
// // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // //       return msg;
// // // // // // // // // // // // // // // // //     }));
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // // // // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // // // // // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // // // // // // // // // // //     }, (err) => {
// // // // // // // // // // // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // // // // // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // // // // // // // // // // //     });
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // // // // // // // // // //     setText(originalInput);
// // // // // // // // // // // // // // // // //     textareaRef.current?.focus();
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // // // // // // // // // // // // //     setTheme(storedTheme);
// // // // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // // // // // // // // // //   }, []);

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // // // // // // // // // //   }, [theme]);

// // // // // // // // // // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // // // //     const newText = event.target.value;
// // // // // // // // // // // // // // // // //     setText(newText);
// // // // // // // // // // // // // // // // //     setWordCount(countWords(newText));
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // // // // // // // // // // //       event.preventDefault();
// // // // // // // // // // // // // // // // //       sendMessage();
// // // // // // // // // // // // // // // // //     }
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // // // // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     scrollToBottom();
// // // // // // // // // // // // // // // // //   }, [messages]);

// // // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-[#0A1F1C] text-[#00FF85]" : "bg-[#E0F0E9] text-[#006D3B]"} min-h-screen w-screen`} style={{ fontFamily: 'Axiforma, sans-serif' }}>
// // // // // // // // // // // // // // // // //       <div className="fixed top-0 left-0 right-0 z-50">
// // // // // // // // // // // // // // // // //         <div className={`backdrop-blur-md ${theme === "dark" ? "bg-[#0A1F1C]/70" : "bg-[#E0F0E9]/70"}`}>
// // // // // // // // // // // // // // // // //           <div className="flex justify-between items-center w-full p-5 max-w-6xl mx-auto">
// // // // // // // // // // // // // // // // //             <div>
// // // // // // // // // // // // // // // // //               <p className="font-semibold text-3xl max-sm:text-2xl">
// // // // // // // // // // // // // // // // //                 NoaiGPT
// // // // // // // // // // // // // // // // //               </p>
// // // // // // // // // // // // // // // // //             </div>
// // // // // // // // // // // // // // // // //             <button 
// // // // // // // // // // // // // // // // //               onClick={toggleTheme} 
// // // // // // // // // // // // // // // // //               className={`p-2 rounded-full ${theme === "dark" ? "bg-[#1A2F2C] text-[#00FF85]" : "bg-[#006D3B] text-[#E0F0E9]"} transition-colors duration-200`}
// // // // // // // // // // // // // // // // //             >
// // // // // // // // // // // // // // // // //               {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // // // // // // // // // // // // // // // //             </button>
// // // // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // // //       </div>

// // // // // // // // // // // // // // // // //       <div className="flex-grow overflow-hidden mt-20 px-4">
// // // // // // // // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl h-[calc(100vh-140px)] rounded-lg overflow-hidden">
// // // // // // // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // // // // // // //             {!showChat && (
// // // // // // // // // // // // // // // // //               <motion.div
// // // // // // // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // // // // // // //                 className="text-center p-8"
// // // // // // // // // // // // // // // // //               >
// // // // // // // // // // // // // // // // //                 <h1 className="text-4xl font-bold mb-4">Welcome to NoaiGPT</h1>
// // // // // // // // // // // // // // // // //                 <p className="text-xl mb-8">
// // // // // // // // // // // // // // // // //                   NoaiGPT is a human-like paraphraser that bypasses all AI detection systems. 
// // // // // // // // // // // // // // // // //                   Our advanced technology ensures your text remains undetectable while maintaining its original meaning.
// // // // // // // // // // // // // // // // //                 </p>
// // // // // // // // // // // // // // // // //                 <p className="text-lg mb-4">
// // // // // // // // // // // // // // // // //                   Start by typing your text below and experience the power of human-like paraphrasing!
// // // // // // // // // // // // // // // // //                 </p>
// // // // // // // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // // // // // // //             )}
// // // // // // // // // // // // // // // // //           </AnimatePresence>

// // // // // // // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // // // // // // //             {showChat && (
// // // // // // // // // // // // // // // // //               <motion.div
// // // // // // // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // // // // // // //                 className="flex-grow overflow-y-auto p-6 space-y-4"
// // // // // // // // // // // // // // // // //               >
// // // // // // // // // // // // // // // // //                 {messages.map((message, index) => (
// // // // // // // // // // // // // // // // //                   <motion.div 
// // // // // // // // // // // // // // // // //                     key={index} 
// // // // // // // // // // // // // // // // //                     initial={{ opacity: 0, y: 20 }} 
// // // // // // // // // // // // // // // // //                     animate={{ opacity: 1, y: 0 }} 
// // // // // // // // // // // // // // // // //                     transition={{ duration: 0.3 }} 
// // // // // // // // // // // // // // // // //                     className={`flex items-start space-x-4 ${message.sender === "user" ? "justify-end" : "justify-start"}`}
// // // // // // // // // // // // // // // // //                   >
// // // // // // // // // // // // // // // // //                     <div className={`p-4 rounded-lg max-w-[70%] ${
// // // // // // // // // // // // // // // // //                       message.sender === "user" 
// // // // // // // // // // // // // // // // //                         ? "bg-[#00FF85] text-[#0A1F1C]" 
// // // // // // // // // // // // // // // // //                         : `${theme === "dark" ? "bg-[#006D3B]" : "bg-[#E0F0E9]"} ${theme === "dark" ? "text-[#00FF85]" : "text-[#0A1F1C]"}`
// // // // // // // // // // // // // // // // //                     }`}>
// // // // // // // // // // // // // // // // //                       {message.text}
// // // // // // // // // // // // // // // // //                       {message.sender === "bot" && message.versions && (
// // // // // // // // // // // // // // // // //                         <div className="mt-2 flex justify-between items-center">
// // // // // // // // // // // // // // // // //                           <button onClick={() => changeVersion(index, 'prev')} className="text-[#00FF85] hover:text-[#E0F0E9]">
// // // // // // // // // // // // // // // // //                             <FiChevronLeft />
// // // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // // //                           <span className="text-sm text-[#00FF85]">
// // // // // // // // // // // // // // // // //                             {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // // // // // // // // // //                           </span>
// // // // // // // // // // // // // // // // //                           <button onClick={() => changeVersion(index, 'next')} className="text-[#00FF85] hover:text-[#E0F0E9]">
// // // // // // // // // // // // // // // // //                             <FiChevronRight />
// // // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // // //                         </div>
// // // // // // // // // // // // // // // // //                       )}
// // // // // // // // // // // // // // // // //                       {message.sender === "bot" && (
// // // // // // // // // // // // // // // // //                         <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // // // // // // // // // //                           <button onClick={() => copyToClipboard(message.text)} className="text-[#00FF85] hover:text-[#E0F0E9]">
// // // // // // // // // // // // // // // // //                             <FiCopy />
// // // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // // //                           <button onClick={() => redoMessage(message.originalInput || '')} className="text-[#00FF85] hover:text-[#E0F0E9]">
// // // // // // // // // // // // // // // // //                             <FiRefreshCw />
// // // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // // //                         </div>
// // // // // // // // // // // // // // // // //                       )}
// // // // // // // // // // // // // // // // //                     </div>
// // // // // // // // // // // // // // // // //                   </motion.div>
// // // // // // // // // // // // // // // // //                 ))}
// // // // // // // // // // // // // // // // //                 {loading && <Skeleton count={1} />}
// // // // // // // // // // // // // // // // //                 <div ref={messagesEndRef} />
// // // // // // // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // // // // // // //             )}
// // // // // // // // // // // // // // // // //           </AnimatePresence>
          
// // // // // // // // // // // // // // // // //           <div className="p-4 bg-transparent">
// // // // // // // // // // // // // // // // //             <div className={`flex items-center w-full rounded-lg ${theme === "dark" ? "bg-[#1A2F2C]" : "bg-[#006D3B]"} focus-within:ring-2 focus-within:ring-[#00FF85] transition-all duration-300`}>
// // // // // // // // // // // // // // // // //               <textarea 
// // // // // // // // // // // // // // // // //                 ref={textareaRef}
// // // // // // // // // // // // // // // // //                 className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-[#00FF85]" : "text-[#E0F0E9]"} placeholder-[#00FF85]`}
// // // // // // // // // // // // // // // // //                 rows={2}
// // // // // // // // // // // // // // // // //                 value={text} 
// // // // // // // // // // // // // // // // //                 onChange={handleTextAreaChange}
// // // // // // // // // // // // // // // // //                 onKeyDown={handleKeyDown}
// // // // // // // // // // // // // // // // //                 placeholder="Type your message here..." 
// // // // // // // // // // // // // // // // //               />
// // // // // // // // // // // // // // // // //               <button 
// // // // // // // // // // // // // // // // //                 className="p-3 bg-[#00FF85] text-[#0A1F1C] rounded-full hover:bg-[#E0F0E9] focus:outline-none flex items-center justify-center transition-colors duration-200 w-12 h-12 mr-1"
// // // // // // // // // // // // // // // // //                 onClick={sendMessage}
// // // // // // // // // // // // // // // // //                 disabled={loading || text.trim().length < 3}
// // // // // // // // // // // // // // // // //               >
// // // // // // // // // // // // // // // // //                 {loading ? (
// // // // // // // // // // // // // // // // //                   <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // // // // // // // // // // // // // //                 ) : (
// // // // // // // // // // // // // // // // //                   <FiSend className="w-5 h-5" />
// // // // // // // // // // // // // // // // //                 )}
// // // // // // // // // // // // // // // // //               </button>
// // // // // // // // // // // // // // // // //             </div>
// // // // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // // //       <ToastContainer />
// // // // // // // // // // // // // // // // //     </div>
// // // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // "use client";

// // // // // // // // // // // // // // // // // import axios from "axios";
// // // // // // // // // // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // // // // // // // // // import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // // // // // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // // // // // // // // // import { motion, AnimatePresence } from "framer-motion";
// // // // // // // // // // // // // // // // // import { trefoil } from 'ldrs';

// // // // // // // // // // // // // // // // // trefoil.register();

// // // // // // // // // // // // // // // // // function countWords(str: string) {
// // // // // // // // // // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // interface Message {
// // // // // // // // // // // // // // // // //   text: string;
// // // // // // // // // // // // // // // // //   sender: string;
// // // // // // // // // // // // // // // // //   originalInput?: string;
// // // // // // // // // // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // // // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // export default function Home() {
// // // // // // // // // // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // // // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // // // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // // // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // // // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // // // // // // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // // // // // // // // // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // // // // // // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // // // // // // // // // //   const toggleTheme = () => {
// // // // // // // // // // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const sendMessage = async () => {
// // // // // // // // // // // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // // // // // // // // // // //     if (wordCount > 200) {
// // // // // // // // // // // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // // // // // // // // // // //       return;
// // // // // // // // // // // // // // // // //     }

// // // // // // // // // // // // // // // // //     setLoading(true);
// // // // // // // // // // // // // // // // //     setShowChat(true);
// // // // // // // // // // // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // // // // // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // // // // // // // // // // //     setText("");

// // // // // // // // // // // // // // // // //     try {
// // // // // // // // // // // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // // // // // // // // // // //         text: text,
// // // // // // // // // // // // // // // // //         setting: 3,
// // // // // // // // // // // // // // // // //         output_format: "json"
// // // // // // // // // // // // // // // // //       });

// // // // // // // // // // // // // // // // //       setLoading(false);
      
// // // // // // // // // // // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // // // // // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // // // // // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // // // // // // // // // // //         sender: "bot",
// // // // // // // // // // // // // // // // //         originalInput: text,
// // // // // // // // // // // // // // // // //         versions: humanLikeVersions,
// // // // // // // // // // // // // // // // //         currentVersionIndex: 0
// // // // // // // // // // // // // // // // //       }]);
// // // // // // // // // // // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // // // // // // // // // // //       scrollToBottom();
// // // // // // // // // // // // // // // // //     } catch (error: any) {
// // // // // // // // // // // // // // // // //       setLoading(false);
// // // // // // // // // // // // // // // // //       if (error.response?.status === 429) {
// // // // // // // // // // // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // // // // // // // // // // //         setTimeout(() => {
// // // // // // // // // // // // // // // // //           window.location.href = '/signup';
// // // // // // // // // // // // // // // // //         }, 3000);
// // // // // // // // // // // // // // // // //       } else {
// // // // // // // // // // // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // //     }
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // // // // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // // // // // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // // // // // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // // // // // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // // // // // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // // // // // // // // // // //         return {
// // // // // // // // // // // // // // // // //           ...msg,
// // // // // // // // // // // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // // // // // // // // // // //           currentVersionIndex: newIndex
// // // // // // // // // // // // // // // // //         };
// // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // //       return msg;
// // // // // // // // // // // // // // // // //     }));
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // // // // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // // // // // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // // // // // // // // // // //     }, (err) => {
// // // // // // // // // // // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // // // // // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // // // // // // // // // // //     });
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // // // // // // // // // //     setText(originalInput);
// // // // // // // // // // // // // // // // //     textareaRef.current?.focus();
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // // // // // // // // // // // // //     setTheme(storedTheme);
// // // // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // // // // // // // // // //   }, []);

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // // // // // // // // // //   }, [theme]);

// // // // // // // // // // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // // // //     const newText = event.target.value;
// // // // // // // // // // // // // // // // //     setText(newText);
// // // // // // // // // // // // // // // // //     setWordCount(countWords(newText));
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // // // // // // // // // // //       event.preventDefault();
// // // // // // // // // // // // // // // // //       sendMessage();
// // // // // // // // // // // // // // // // //     }
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // // // // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     scrollToBottom();
// // // // // // // // // // // // // // // // //   }, [messages]);

// // // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-[#0A1F1C]" : "bg-[#F5F7FA]"} min-h-screen w-screen`} style={{ fontFamily: 'Axiforma, sans-serif' }}>
// // // // // // // // // // // // // // // // //       <div className="fixed top-0 left-0 right-0 z-50">
// // // // // // // // // // // // // // // // //         <div className={`backdrop-blur-md ${theme === "dark" ? "bg-[#0A1F1C]/70" : "bg-[#F5F7FA]/70"}`}>
// // // // // // // // // // // // // // // // //           <div className="flex justify-between items-center w-full p-5 max-w-6xl mx-auto">
// // // // // // // // // // // // // // // // //             <div>
// // // // // // // // // // // // // // // // //               <p className={`font-semibold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"}`}>
// // // // // // // // // // // // // // // // //                 NoaiGPT
// // // // // // // // // // // // // // // // //               </p>
// // // // // // // // // // // // // // // // //             </div>
// // // // // // // // // // // // // // // // //             <button 
// // // // // // // // // // // // // // // // //               onClick={toggleTheme} 
// // // // // // // // // // // // // // // // //               className={`p-2 rounded-full ${theme === "dark" ? "bg-[#1A2F2C] text-[#00FF85]" : "bg-[#E0F0E9] text-[#006D3B]"} transition-colors duration-200`}
// // // // // // // // // // // // // // // // //             >
// // // // // // // // // // // // // // // // //               {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // // // // // // // // // // // // // // // //             </button>
// // // // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // // //       </div>

// // // // // // // // // // // // // // // // //       <div className="flex-grow overflow-hidden mt-20 px-4 mb-24">
// // // // // // // // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl rounded-lg overflow-hidden">
// // // // // // // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // // // // // // //             {!showChat && (
// // // // // // // // // // // // // // // // //               <motion.div
// // // // // // // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // // // // // // //                 className="text-center p-8"
// // // // // // // // // // // // // // // // //               >
// // // // // // // // // // // // // // // // //                 <h1 className={`text-4xl font-bold mb-4 ${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"}`}>Welcome to NoaiGPT</h1>
// // // // // // // // // // // // // // // // //                 <p className={`text-xl mb-8 ${theme === "dark" ? "text-[#E0F0E9]" : "text-[#1A2F2C]"}`}>
// // // // // // // // // // // // // // // // //                   NoaiGPT is a human-like paraphraser that bypasses all AI detection systems. 
// // // // // // // // // // // // // // // // //                   Our advanced technology ensures your text remains undetectable while maintaining its original meaning.
// // // // // // // // // // // // // // // // //                 </p>
// // // // // // // // // // // // // // // // //                 <p className={`text-lg mb-4 ${theme === "dark" ? "text-[#E0F0E9]" : "text-[#1A2F2C]"}`}>
// // // // // // // // // // // // // // // // //                   Start by typing your text below and experience the power of human-like paraphrasing!
// // // // // // // // // // // // // // // // //                 </p>
// // // // // // // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // // // // // // //             )}
// // // // // // // // // // // // // // // // //           </AnimatePresence>

// // // // // // // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // // // // // // //             {showChat && (
// // // // // // // // // // // // // // // // //               <motion.div
// // // // // // // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // // // // // // //                 className="flex-grow overflow-y-auto p-6 space-y-4 max-h-[calc(100vh-240px)]"
// // // // // // // // // // // // // // // // //               >
// // // // // // // // // // // // // // // // //                 {messages.map((message, index) => (
// // // // // // // // // // // // // // // // //                   <motion.div 
// // // // // // // // // // // // // // // // //                     key={index} 
// // // // // // // // // // // // // // // // //                     initial={{ opacity: 0, y: 20 }} 
// // // // // // // // // // // // // // // // //                     animate={{ opacity: 1, y: 0 }} 
// // // // // // // // // // // // // // // // //                     transition={{ duration: 0.3 }} 
// // // // // // // // // // // // // // // // //                     className={`flex items-start space-x-4 ${message.sender === "user" ? "justify-end" : "justify-start"}`}
// // // // // // // // // // // // // // // // //                   >
// // // // // // // // // // // // // // // // //                     <div className={`p-4 rounded-lg max-w-[70%] ${
// // // // // // // // // // // // // // // // //                       message.sender === "user" 
// // // // // // // // // // // // // // // // //                         ? "bg-[#00FF85] text-black" 
// // // // // // // // // // // // // // // // //                         : `${theme === "dark" ? "bg-[#1A2F2C]" : "bg-[#E0F0E9]"} text-black`
// // // // // // // // // // // // // // // // //                     }`}>
// // // // // // // // // // // // // // // // //                       {message.text}
// // // // // // // // // // // // // // // // //                       {message.sender === "bot" && message.versions && (
// // // // // // // // // // // // // // // // //                         <div className="mt-2 flex justify-between items-center">
// // // // // // // // // // // // // // // // //                           <button onClick={() => changeVersion(index, 'prev')} className="text-[#00FF85] hover:text-[#E0F0E9]">
// // // // // // // // // // // // // // // // //                             <FiChevronLeft />
// // // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // // //                           <span className="text-sm text-[#00FF85]">
// // // // // // // // // // // // // // // // //                             {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // // // // // // // // // //                           </span>
// // // // // // // // // // // // // // // // //                           <button onClick={() => changeVersion(index, 'next')} className="text-[#00FF85] hover:text-[#E0F0E9]">
// // // // // // // // // // // // // // // // //                             <FiChevronRight />
// // // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // // //                         </div>
// // // // // // // // // // // // // // // // //                       )}
// // // // // // // // // // // // // // // // //                       {message.sender === "bot" && (
// // // // // // // // // // // // // // // // //                         <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // // // // // // // // // //                           <button onClick={() => copyToClipboard(message.text)} className="text-[#00FF85] hover:text-[#E0F0E9]">
// // // // // // // // // // // // // // // // //                             <FiCopy />
// // // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // // //                           <button onClick={() => redoMessage(message.originalInput || '')} className="text-[#00FF85] hover:text-[#E0F0E9]">
// // // // // // // // // // // // // // // // //                             <FiRefreshCw />
// // // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // // //                         </div>
// // // // // // // // // // // // // // // // //                       )}
// // // // // // // // // // // // // // // // //                     </div>
// // // // // // // // // // // // // // // // //                   </motion.div>
// // // // // // // // // // // // // // // // //                 ))}
// // // // // // // // // // // // // // // // //                 {loading && <Skeleton count={1} />}
// // // // // // // // // // // // // // // // //                 <div ref={messagesEndRef} />
// // // // // // // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // // // // // // //             )}
// // // // // // // // // // // // // // // // //           </AnimatePresence>
// // // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // // //       </div>
      
// // // // // // // // // // // // // // // // //       <div className="fixed bottom-0 left-0 right-0 p-4 bg-transparent">
// // // // // // // // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl">
// // // // // // // // // // // // // // // // //           <div className="flex items-center w-full rounded-lg bg-transparent border-2 border-[#00FF85] focus-within:ring-2 focus-within:ring-[#00FF85] transition-all duration-300 overflow-hidden">
// // // // // // // // // // // // // // // // //             <textarea 
// // // // // // // // // // // // // // // // //               ref={textareaRef}
// // // // // // // // // // // // // // // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none text-black placeholder-gray-500`}
// // // // // // // // // // // // // // // // //               rows={2}
// // // // // // // // // // // // // // // // //               value={text} 
// // // // // // // // // // // // // // // // //               onChange={handleTextAreaChange}
// // // // // // // // // // // // // // // // //               onKeyDown={handleKeyDown}
// // // // // // // // // // // // // // // // //               placeholder="Type your message here..." 
// // // // // // // // // // // // // // // // //             />
// // // // // // // // // // // // // // // // //             <button 
// // // // // // // // // // // // // // // // //               className="p-3 bg-[#00FF85] text-black rounded-full hover:bg-[#E0F0E9] focus:outline-none flex items-center justify-center transition-colors duration-200 w-12 h-12 mr-1"
// // // // // // // // // // // // // // // // //               onClick={sendMessage}
// // // // // // // // // // // // // // // // //               disabled={loading || text.trim().length < 3}
// // // // // // // // // // // // // // // // //             >
// // // // // // // // // // // // // // // // //               {loading ? (
// // // // // // // // // // // // // // // // //                 <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // // // // // // // // // // // // // //               ) : (
// // // // // // // // // // // // // // // // //                 <FiSend className="w-5 h-5" />
// // // // // // // // // // // // // // // // //               )}
// // // // // // // // // // // // // // // // //             </button>
// // // // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // // //       </div>

// // // // // // // // // // // // // // // // //       <ToastContainer />
// // // // // // // // // // // // // // // // //     </div>
// // // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // "use client";

// // // // // // // // // // // // // // // // import axios from "axios";
// // // // // // // // // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // // // // // // // // import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // // // // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // // // // // // // // import { motion, AnimatePresence } from "framer-motion";
// // // // // // // // // // // // // // // // import { trefoil } from 'ldrs';

// // // // // // // // // // // // // // // // trefoil.register();

// // // // // // // // // // // // // // // // function countWords(str: string) {
// // // // // // // // // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // interface Message {
// // // // // // // // // // // // // // // //   text: string;
// // // // // // // // // // // // // // // //   sender: string;
// // // // // // // // // // // // // // // //   originalInput?: string;
// // // // // // // // // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // export default function Home() {
// // // // // // // // // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // // // // // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // // // // // // // // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // // // // // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // // // // // // // // //   const toggleTheme = () => {
// // // // // // // // // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // //   const sendMessage = async () => {
// // // // // // // // // // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // // // // // // // // // //     if (wordCount > 200) {
// // // // // // // // // // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // // // // // // // // // //       return;
// // // // // // // // // // // // // // // //     }

// // // // // // // // // // // // // // // //     setLoading(true);
// // // // // // // // // // // // // // // //     setShowChat(true);
// // // // // // // // // // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // // // // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // // // // // // // // // //     setText("");

// // // // // // // // // // // // // // // //     try {
// // // // // // // // // // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // // // // // // // // // //         text: text,
// // // // // // // // // // // // // // // //         setting: 3,
// // // // // // // // // // // // // // // //         output_format: "json"
// // // // // // // // // // // // // // // //       });

// // // // // // // // // // // // // // // //       setLoading(false);
      
// // // // // // // // // // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // // // // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // // // // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // // // // // // // // // //         sender: "bot",
// // // // // // // // // // // // // // // //         originalInput: text,
// // // // // // // // // // // // // // // //         versions: humanLikeVersions,
// // // // // // // // // // // // // // // //         currentVersionIndex: 0
// // // // // // // // // // // // // // // //       }]);
// // // // // // // // // // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // // // // // // // // // //       scrollToBottom();
// // // // // // // // // // // // // // // //     } catch (error: any) {
// // // // // // // // // // // // // // // //       setLoading(false);
// // // // // // // // // // // // // // // //       if (error.response?.status === 429) {
// // // // // // // // // // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // // // // // // // // // //         setTimeout(() => {
// // // // // // // // // // // // // // // //           window.location.href = '/signup';
// // // // // // // // // // // // // // // //         }, 3000);
// // // // // // // // // // // // // // // //       } else {
// // // // // // // // // // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // //     }
// // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // // // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // // // // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // // // // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // // // // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // // // // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // // // // // // // // // //         return {
// // // // // // // // // // // // // // // //           ...msg,
// // // // // // // // // // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // // // // // // // // // //           currentVersionIndex: newIndex
// // // // // // // // // // // // // // // //         };
// // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // //       return msg;
// // // // // // // // // // // // // // // //     }));
// // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // // // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // // // // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // // // // // // // // // //     }, (err) => {
// // // // // // // // // // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // // // // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // // // // // // // // // //     });
// // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // // // // // // // // //     setText(originalInput);
// // // // // // // // // // // // // // // //     textareaRef.current?.focus();
// // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // // // // // // // // // // // //     setTheme(storedTheme);
// // // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // // // // // // // // //   }, []);

// // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // // // // // // // // //   }, [theme]);

// // // // // // // // // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // // //     const newText = event.target.value;
// // // // // // // // // // // // // // // //     setText(newText);
// // // // // // // // // // // // // // // //     setWordCount(countWords(newText));
// // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // // // // // // // // // //       event.preventDefault();
// // // // // // // // // // // // // // // //       sendMessage();
// // // // // // // // // // // // // // // //     }
// // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // // // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // //     scrollToBottom();
// // // // // // // // // // // // // // // //   }, [messages]);

// // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-[#0A1F1C]" : "bg-[#F5F7FA]"} min-h-screen w-screen`} style={{ fontFamily: 'Axiforma, sans-serif' }}>
// // // // // // // // // // // // // // // //       <div className="fixed top-0 left-0 right-0 z-50">
// // // // // // // // // // // // // // // //         <div className={`backdrop-blur-md ${theme === "dark" ? "bg-[#0A1F1C]/70" : "bg-[#F5F7FA]/70"}`}>
// // // // // // // // // // // // // // // //           <div className="flex justify-between items-center w-full p-5 max-w-6xl mx-auto">
// // // // // // // // // // // // // // // //             <div>
// // // // // // // // // // // // // // // //               <p className={`font-semibold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"}`}>
// // // // // // // // // // // // // // // //                 NoaiGPT
// // // // // // // // // // // // // // // //               </p>
// // // // // // // // // // // // // // // //             </div>
// // // // // // // // // // // // // // // //             <button 
// // // // // // // // // // // // // // // //               onClick={toggleTheme} 
// // // // // // // // // // // // // // // //               className={`p-2 rounded-full ${theme === "dark" ? "bg-[#1A2F2C] text-[#00FF85]" : "bg-[#E0F0E9] text-[#006D3B]"} transition-colors duration-200`}
// // // // // // // // // // // // // // // //             >
// // // // // // // // // // // // // // // //               {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // // // // // // // // // // // // // // //             </button>
// // // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // //       </div>

// // // // // // // // // // // // // // // //       <div className="flex-grow overflow-hidden mt-20 px-4 mb-24">
// // // // // // // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl rounded-lg overflow-hidden">
// // // // // // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // // // // // //             {!showChat && (
// // // // // // // // // // // // // // // //               <motion.div
// // // // // // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // // // // // //                 className="text-center p-8"
// // // // // // // // // // // // // // // //               >
// // // // // // // // // // // // // // // //                 <h1 className={`text-4xl font-bold mb-4 ${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"}`}>Welcome to NoaiGPT</h1>
// // // // // // // // // // // // // // // //                 <p className={`text-xl mb-8 ${theme === "dark" ? "text-[#E0F0E9]" : "text-[#1A2F2C]"}`}>
// // // // // // // // // // // // // // // //                   NoaiGPT is a human-like paraphraser that bypasses all AI detection systems. 
// // // // // // // // // // // // // // // //                   Our advanced technology ensures your text remains undetectable while maintaining its original meaning.
// // // // // // // // // // // // // // // //                 </p>
// // // // // // // // // // // // // // // //                 <p className={`text-lg mb-4 ${theme === "dark" ? "text-[#E0F0E9]" : "text-[#1A2F2C]"}`}>
// // // // // // // // // // // // // // // //                   Start by typing your text below and experience the power of human-like paraphrasing!
// // // // // // // // // // // // // // // //                 </p>
// // // // // // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // // // // // //             )}
// // // // // // // // // // // // // // // //           </AnimatePresence>

// // // // // // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // // // // // //             {showChat && (
// // // // // // // // // // // // // // // //               <motion.div
// // // // // // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // // // // // //                 className="flex-grow overflow-y-auto p-6 space-y-4 max-h-[calc(100vh-240px)]"
// // // // // // // // // // // // // // // //               >
// // // // // // // // // // // // // // // //                 {messages.map((message, index) => (
// // // // // // // // // // // // // // // //                   <motion.div 
// // // // // // // // // // // // // // // //                     key={index} 
// // // // // // // // // // // // // // // //                     initial={{ opacity: 0, y: 20 }} 
// // // // // // // // // // // // // // // //                     animate={{ opacity: 1, y: 0 }} 
// // // // // // // // // // // // // // // //                     transition={{ duration: 0.3 }} 
// // // // // // // // // // // // // // // //                     className={`flex items-start space-x-4 ${message.sender === "user" ? "justify-end" : "justify-start"}`}
// // // // // // // // // // // // // // // //                   >
// // // // // // // // // // // // // // // //                     <div className={`p-4 rounded-lg max-w-[70%] ${
// // // // // // // // // // // // // // // //                       message.sender === "user" 
// // // // // // // // // // // // // // // //                         ? "bg-[#00FF85] text-black" 
// // // // // // // // // // // // // // // //                         : `${theme === "dark" ? "bg-[#1A2F2C]" : "bg-[#E0F0E9]"} text-black`
// // // // // // // // // // // // // // // //                     }`}>
// // // // // // // // // // // // // // // //                       {message.text}
// // // // // // // // // // // // // // // //                       {message.sender === "bot" && message.versions && (
// // // // // // // // // // // // // // // //                         <div className="mt-2 flex justify-between items-center">
// // // // // // // // // // // // // // // //                           <button onClick={() => changeVersion(index, 'prev')} className="text-[#000000] hover:text-[#E0F0E9]">
// // // // // // // // // // // // // // // //                             <FiChevronLeft />
// // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // //                           <span className="text-sm text-[#000000]">
// // // // // // // // // // // // // // // //                             {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // // // // // // // // //                           </span>
// // // // // // // // // // // // // // // //                           <button onClick={() => changeVersion(index, 'next')} className="text-[#000000] hover:text-[#E0F0E9]">
// // // // // // // // // // // // // // // //                             <FiChevronRight />
// // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // //                         </div>
// // // // // // // // // // // // // // // //                       )}
// // // // // // // // // // // // // // // //                       {message.sender === "bot" && (
// // // // // // // // // // // // // // // //                         <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // // // // // // // // //                           <button onClick={() => copyToClipboard(message.text)} className="text-[#000000] hover:text-[#E0F0E9]">
// // // // // // // // // // // // // // // //                             <FiCopy />
// // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // //                           <button onClick={() => redoMessage(message.originalInput || '')} className="text-[#000000] hover:text-[#E0F0E9]">
// // // // // // // // // // // // // // // //                             <FiRefreshCw />
// // // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // // //                         </div>
// // // // // // // // // // // // // // // //                       )}
// // // // // // // // // // // // // // // //                     </div>
// // // // // // // // // // // // // // // //                   </motion.div>
// // // // // // // // // // // // // // // //                 ))}
// // // // // // // // // // // // // // // //                 {loading && <Skeleton count={1} />}
// // // // // // // // // // // // // // // //                 <div ref={messagesEndRef} />
// // // // // // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // // // // // //             )}
// // // // // // // // // // // // // // // //           </AnimatePresence>
// // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // //       </div>
      
// // // // // // // // // // // // // // // //       <div className="fixed bottom-0 left-0 right-0 p-4 bg-transparent">
// // // // // // // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl">
// // // // // // // // // // // // // // // //           <div className="flex items-center w-full rounded-lg bg-transparent border-2 border-black focus-within:ring-2 focus-within:ring-[#00FF85] transition-all duration-300 overflow-hidden input-animation">
// // // // // // // // // // // // // // // //             <textarea 
// // // // // // // // // // // // // // // //               ref={textareaRef}
// // // // // // // // // // // // // // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none text-black placeholder-gray-500`}
// // // // // // // // // // // // // // // //               rows={2}
// // // // // // // // // // // // // // // //               value={text} 
// // // // // // // // // // // // // // // //               onChange={handleTextAreaChange}
// // // // // // // // // // // // // // // //               onKeyDown={handleKeyDown}
// // // // // // // // // // // // // // // //               placeholder="Type your message here..." 
// // // // // // // // // // // // // // // //             />
// // // // // // // // // // // // // // // //             <button 
// // // // // // // // // // // // // // // //               className="p-3 bg-[#00FF85] text-black rounded-full hover:bg-[#E0F0E9] focus:outline-none flex items-center justify-center transition-colors duration-200 w-12 h-12 mr-1"
// // // // // // // // // // // // // // // //               onClick={sendMessage}
// // // // // // // // // // // // // // // //               disabled={loading || text.trim().length < 3}
// // // // // // // // // // // // // // // //             >
// // // // // // // // // // // // // // // //               {loading ? (
// // // // // // // // // // // // // // // //                 <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // // // // // // // // // // // // //               ) : (
// // // // // // // // // // // // // // // //                 <FiSend className="w-5 h-5" />
// // // // // // // // // // // // // // // //               )}
// // // // // // // // // // // // // // // //             </button>
// // // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // //       <ToastContainer />
// // // // // // // // // // // // // // // //     </div>
// // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // "use client";

// // // // // // // // // // // // // // // import axios from "axios";
// // // // // // // // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // // // // // // // import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // // // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // // // // // // // import { motion, AnimatePresence } from "framer-motion";
// // // // // // // // // // // // // // // import { trefoil } from 'ldrs';

// // // // // // // // // // // // // // // trefoil.register();

// // // // // // // // // // // // // // // function countWords(str: string) {
// // // // // // // // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // interface Message {
// // // // // // // // // // // // // // //   text: string;
// // // // // // // // // // // // // // //   sender: string;
// // // // // // // // // // // // // // //   originalInput?: string;
// // // // // // // // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // export default function Home() {
// // // // // // // // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // // // // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // // // // // // // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // // // // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // // // // // // // //   const toggleTheme = () => {
// // // // // // // // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // //   const sendMessage = async () => {
// // // // // // // // // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // // // // // // // // //     if (wordCount > 200) {
// // // // // // // // // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // // // // // // // // //       return;
// // // // // // // // // // // // // // //     }

// // // // // // // // // // // // // // //     setLoading(true);
// // // // // // // // // // // // // // //     setShowChat(true);
// // // // // // // // // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // // // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // // // // // // // // //     setText("");

// // // // // // // // // // // // // // //     try {
// // // // // // // // // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // // // // // // // // //         text: text,
// // // // // // // // // // // // // // //         setting: 3,
// // // // // // // // // // // // // // //         output_format: "json"
// // // // // // // // // // // // // // //       });

// // // // // // // // // // // // // // //       setLoading(false);
      
// // // // // // // // // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // // // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // // // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // // // // // // // // //         sender: "bot",
// // // // // // // // // // // // // // //         originalInput: text,
// // // // // // // // // // // // // // //         versions: humanLikeVersions,
// // // // // // // // // // // // // // //         currentVersionIndex: 0
// // // // // // // // // // // // // // //       }]);
// // // // // // // // // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // // // // // // // // //       scrollToBottom();
// // // // // // // // // // // // // // //     } catch (error: any) {
// // // // // // // // // // // // // // //       setLoading(false);
// // // // // // // // // // // // // // //       if (error.response?.status === 429) {
// // // // // // // // // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // // // // // // // // //         setTimeout(() => {
// // // // // // // // // // // // // // //           window.location.href = '/signup';
// // // // // // // // // // // // // // //         }, 3000);
// // // // // // // // // // // // // // //       } else {
// // // // // // // // // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // //     }
// // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // // // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // // // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // // // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // // // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // // // // // // // // //         return {
// // // // // // // // // // // // // // //           ...msg,
// // // // // // // // // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // // // // // // // // //           currentVersionIndex: newIndex
// // // // // // // // // // // // // // //         };
// // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // //       return msg;
// // // // // // // // // // // // // // //     }));
// // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // // // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // // // // // // // // //     }, (err) => {
// // // // // // // // // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // // // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // // // // // // // // //     });
// // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // // // // // // // //     setText(originalInput);
// // // // // // // // // // // // // // //     textareaRef.current?.focus();
// // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // // // // // // // // // // //     setTheme(storedTheme);
// // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // // // // // // // //   }, []);

// // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // // // // // // // //   }, [theme]);

// // // // // // // // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // //     const newText = event.target.value;
// // // // // // // // // // // // // // //     setText(newText);
// // // // // // // // // // // // // // //     setWordCount(countWords(newText));
// // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // // // // // // // // //       event.preventDefault();
// // // // // // // // // // // // // // //       sendMessage();
// // // // // // // // // // // // // // //     }
// // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // // // // // // // // //   };

// // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // //     scrollToBottom();
// // // // // // // // // // // // // // //   }, [messages]);

// // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-[#0A1F1C]" : "bg-[#F5F7FA]"} min-h-screen w-screen`} style={{ fontFamily: 'Axiforma, sans-serif' }}>
// // // // // // // // // // // // // // //       <div className="fixed top-0 left-0 right-0 z-50">
// // // // // // // // // // // // // // //         <div className={`backdrop-blur-md ${theme === "dark" ? "bg-[#0A1F1C]/70" : "bg-[#F5F7FA]/70"}`}>
// // // // // // // // // // // // // // //           <div className="flex justify-between items-center w-full p-5 max-w-6xl mx-auto">
// // // // // // // // // // // // // // //             <div>
// // // // // // // // // // // // // // //               <p className={`font-semibold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"}`}>
// // // // // // // // // // // // // // //                 NoaiGPT
// // // // // // // // // // // // // // //               </p>
// // // // // // // // // // // // // // //             </div>
// // // // // // // // // // // // // // //             <button 
// // // // // // // // // // // // // // //               onClick={toggleTheme} 
// // // // // // // // // // // // // // //               className={`p-2 rounded-full ${theme === "dark" ? "bg-[#1A2F2C] text-[#00FF85]" : "bg-[#E0F0E9] text-[#006D3B]"} transition-colors duration-200`}
// // // // // // // // // // // // // // //             >
// // // // // // // // // // // // // // //               {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // // // // // // // // // // // // // //             </button>
// // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // //       </div>

// // // // // // // // // // // // // // //       <div className="flex-grow overflow-hidden mt-20 px-4 mb-24">
// // // // // // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl rounded-lg overflow-hidden">
// // // // // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // // // // //             {!showChat && (
// // // // // // // // // // // // // // //               <motion.div
// // // // // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // // // // //                 className="text-center p-8"
// // // // // // // // // // // // // // //               >
// // // // // // // // // // // // // // //                 <h1 className={`text-4xl font-bold mb-4 ${theme === "dark" ? "text-[#00FF85]" : "text-[#006D3B]"}`}>Welcome to NoaiGPT</h1>
// // // // // // // // // // // // // // //                 <p className={`text-xl mb-8 ${theme === "dark" ? "text-[#E0F0E9]" : "text-[#1A2F2C]"}`}>
// // // // // // // // // // // // // // //                   NoaiGPT is a human-like paraphraser that bypasses all AI detection systems. 
// // // // // // // // // // // // // // //                   Our advanced technology ensures your text remains undetectable while maintaining its original meaning.
// // // // // // // // // // // // // // //                 </p>
// // // // // // // // // // // // // // //                 <p className={`text-lg mb-4 ${theme === "dark" ? "text-[#E0F0E9]" : "text-[#1A2F2C]"}`}>
// // // // // // // // // // // // // // //                   Start by typing your text below and experience the power of human-like paraphrasing!
// // // // // // // // // // // // // // //                 </p>
// // // // // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // // // // //             )}
// // // // // // // // // // // // // // //           </AnimatePresence>

// // // // // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // // // // //             {showChat && (
// // // // // // // // // // // // // // //               <motion.div
// // // // // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // // // // //                 className="flex-grow overflow-y-auto p-6 space-y-4 max-h-[calc(100vh-240px)]"
// // // // // // // // // // // // // // //               >
// // // // // // // // // // // // // // //                 <div className="h-12 bg-gradient-to-b from-transparent to-[#0A1F1C] dark:to-[#F0F0F0] opacity-20 pointer-events-none"></div>
// // // // // // // // // // // // // // //                 {messages.map((message, index) => (
// // // // // // // // // // // // // // //                   <motion.div 
// // // // // // // // // // // // // // //                     key={index} 
// // // // // // // // // // // // // // //                     initial={{ opacity: 0, y: 20 }} 
// // // // // // // // // // // // // // //                     animate={{ opacity: 1, y: 0 }} 
// // // // // // // // // // // // // // //                     transition={{ duration: 0.3 }} 
// // // // // // // // // // // // // // //                     className="flex items-start space-x-4"
// // // // // // // // // // // // // // //                   >
// // // // // // // // // // // // // // //                     <div className={`p-4 rounded-lg flex-1 ${message.sender === "user" ? "bg-[#E0F0E9] text-[#0A1F1C]" : "bg-transparent"}`}>
// // // // // // // // // // // // // // //                       {message.text}
// // // // // // // // // // // // // // //                     </div>
// // // // // // // // // // // // // // //                     {message.sender === "bot" && (
// // // // // // // // // // // // // // //                       <div className={`p-4 rounded-lg flex-1 ${theme === "dark" ? "bg-[#006D3B]" : "bg-[#F0F0F0]"} ${theme === "dark" ? "text-[#F0F0F0]" : "text-[#0A1F1C]"}`}>
// // // // // // // // // // // // // // //                         {message.text}
// // // // // // // // // // // // // // //                         {message.versions && (
// // // // // // // // // // // // // // //                           <div className="mt-2 flex justify-between items-center">
// // // // // // // // // // // // // // //                             <button onClick={() => changeVersion(index, 'prev')} className="text-[#000000] hover:text-[#00CC6A]">
// // // // // // // // // // // // // // //                               <FiChevronLeft />
// // // // // // // // // // // // // // //                             </button>
// // // // // // // // // // // // // // //                             <span className="text-sm text-[#000000]">
// // // // // // // // // // // // // // //                               {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // // // // // // // //                             </span>
// // // // // // // // // // // // // // //                             <button onClick={() => changeVersion(index, 'next')} className="text-[#000000] hover:text-[#00CC6A]">
// // // // // // // // // // // // // // //                               <FiChevronRight />
// // // // // // // // // // // // // // //                             </button>
// // // // // // // // // // // // // // //                           </div>
// // // // // // // // // // // // // // //                         )}
// // // // // // // // // // // // // // //                         <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // // // // // // // //                           <button onClick={() => copyToClipboard(message.text)} className="text-[#000000] hover:text-[#00CC6A]">
// // // // // // // // // // // // // // //                             <FiCopy />
// // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // //                           <button onClick={() => redoMessage(message.originalInput || '')} className="text-[#000000] hover:text-[#00CC6A]">
// // // // // // // // // // // // // // //                             <FiRefreshCw />
// // // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // // //                         </div>
// // // // // // // // // // // // // // //                       </div>
// // // // // // // // // // // // // // //                     )}
// // // // // // // // // // // // // // //                   </motion.div>
// // // // // // // // // // // // // // //                 ))}
// // // // // // // // // // // // // // //                 {loading && <Skeleton count={1} />}
// // // // // // // // // // // // // // //                 <div ref={messagesEndRef} />
// // // // // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // // // // //             )}
// // // // // // // // // // // // // // //           </AnimatePresence>
// // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // //       </div>
      
// // // // // // // // // // // // // // //       <div className="fixed bottom-0 left-0 right-0 p-4 bg-transparent">
// // // // // // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl">
// // // // // // // // // // // // // // //           <div className="flex items-center w-full rounded-lg bg-transparent border-2 border-black focus-within:ring-2 focus-within:ring-[#00FF85] transition-all duration-300 overflow-hidden input-animation">
// // // // // // // // // // // // // // //             <textarea 
// // // // // // // // // // // // // // //               ref={textareaRef}
// // // // // // // // // // // // // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none text-black placeholder-gray-500`}
// // // // // // // // // // // // // // //               rows={2}
// // // // // // // // // // // // // // //               value={text} 
// // // // // // // // // // // // // // //               onChange={handleTextAreaChange}
// // // // // // // // // // // // // // //               onKeyDown={handleKeyDown}
// // // // // // // // // // // // // // //               placeholder="Type your message here..." 
// // // // // // // // // // // // // // //             />
// // // // // // // // // // // // // // //             <button 
// // // // // // // // // // // // // // //               className="p-3 bg-[#00FF85] text-black rounded-full hover:bg-[#E0F0E9] focus:outline-none flex items-center justify-center transition-colors duration-200 w-12 h-12 mr-1"
// // // // // // // // // // // // // // //               onClick={sendMessage}
// // // // // // // // // // // // // // //               disabled={loading || text.trim().length < 3}
// // // // // // // // // // // // // // //             >
// // // // // // // // // // // // // // //               {loading ? (
// // // // // // // // // // // // // // //                 <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // // // // // // // // // // // //               ) : (
// // // // // // // // // // // // // // //                 <FiSend className="w-5 h-5" />
// // // // // // // // // // // // // // //               )}
// // // // // // // // // // // // // // //             </button>
// // // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // //       <ToastContainer />
// // // // // // // // // // // // // // //     </div>
// // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // "use client";

// // // // // // // // // // // // // // import axios from "axios";
// // // // // // // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // // // // // // import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // // // // // // import { motion, AnimatePresence } from "framer-motion";
// // // // // // // // // // // // // // import { trefoil } from 'ldrs';

// // // // // // // // // // // // // // trefoil.register();

// // // // // // // // // // // // // // function countWords(str: string) {
// // // // // // // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // // // // // // }

// // // // // // // // // // // // // // interface Message {
// // // // // // // // // // // // // //   text: string;
// // // // // // // // // // // // // //   sender: string;
// // // // // // // // // // // // // //   originalInput?: string;
// // // // // // // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // // // // // // }

// // // // // // // // // // // // // // export default function Home() {
// // // // // // // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // // // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // // // // // // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // // // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // // // // // // //   const toggleTheme = () => {
// // // // // // // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // // // // // // //   };

// // // // // // // // // // // // // //   const sendMessage = async () => {
// // // // // // // // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // // // // // // // //     if (wordCount > 200) {
// // // // // // // // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // // // // // // // //       return;
// // // // // // // // // // // // // //     }

// // // // // // // // // // // // // //     setLoading(true);
// // // // // // // // // // // // // //     setShowChat(true);
// // // // // // // // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // // // // // // // //     setText("");

// // // // // // // // // // // // // //     try {
// // // // // // // // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // // // // // // // //         text: text,
// // // // // // // // // // // // // //         setting: 3,
// // // // // // // // // // // // // //         output_format: "json"
// // // // // // // // // // // // // //       });

// // // // // // // // // // // // // //       setLoading(false);
      
// // // // // // // // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // // // // // // // //         sender: "bot",
// // // // // // // // // // // // // //         originalInput: text,
// // // // // // // // // // // // // //         versions: humanLikeVersions,
// // // // // // // // // // // // // //         currentVersionIndex: 0
// // // // // // // // // // // // // //       }]);
// // // // // // // // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // // // // // // // //       scrollToBottom();
// // // // // // // // // // // // // //     } catch (error: any) {
// // // // // // // // // // // // // //       setLoading(false);
// // // // // // // // // // // // // //       if (error.response?.status === 429) {
// // // // // // // // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // // // // // // // //         setTimeout(() => {
// // // // // // // // // // // // // //           window.location.href = '/signup';
// // // // // // // // // // // // // //         }, 3000);
// // // // // // // // // // // // // //       } else {
// // // // // // // // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // // // // // // // //       }
// // // // // // // // // // // // // //     }
// // // // // // // // // // // // // //   };

// // // // // // // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // // // // // // // //         return {
// // // // // // // // // // // // // //           ...msg,
// // // // // // // // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // // // // // // // //           currentVersionIndex: newIndex
// // // // // // // // // // // // // //         };
// // // // // // // // // // // // // //       }
// // // // // // // // // // // // // //       return msg;
// // // // // // // // // // // // // //     }));
// // // // // // // // // // // // // //   };

// // // // // // // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // // // // // // // //     }, (err) => {
// // // // // // // // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // // // // // // // //     });
// // // // // // // // // // // // // //   };

// // // // // // // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // // // // // // //     setText(originalInput);
// // // // // // // // // // // // // //     textareaRef.current?.focus();
// // // // // // // // // // // // // //   };

// // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // // // // // // // // // //     setTheme(storedTheme);
// // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // // // // // // //   }, []);

// // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // // // // // // //   }, [theme]);

// // // // // // // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // //     const newText = event.target.value;
// // // // // // // // // // // // // //     setText(newText);
// // // // // // // // // // // // // //     setWordCount(countWords(newText));
// // // // // // // // // // // // // //   };

// // // // // // // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // // // // // // // //       event.preventDefault();
// // // // // // // // // // // // // //       sendMessage();
// // // // // // // // // // // // // //     }
// // // // // // // // // // // // // //   };

// // // // // // // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // // // // // // // //   };

// // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // //     scrollToBottom();
// // // // // // // // // // // // // //   }, [messages]);

// // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gradient-to-br from-gray-900 to-gray-800" : "bg-gradient-to-br from-gray-100 to-white"} min-h-screen w-screen font-sans`}>
// // // // // // // // // // // // // //       <div className="fixed top-0 left-0 right-0 z-50">
// // // // // // // // // // // // // //         <div className={`backdrop-blur-md ${theme === "dark" ? "bg-gray-900/70" : "bg-white/70"}`}>
// // // // // // // // // // // // // //           <div className="flex justify-between items-center w-full p-5 max-w-6xl mx-auto">
// // // // // // // // // // // // // //             <div>
// // // // // // // // // // // // // //               <p className={`font-bold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"}`}>
// // // // // // // // // // // // // //                 NoaiGPT
// // // // // // // // // // // // // //               </p>
// // // // // // // // // // // // // //             </div>
// // // // // // // // // // // // // //             <button 
// // // // // // // // // // // // // //               onClick={toggleTheme} 
// // // // // // // // // // // // // //               className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-indigo-400" : "bg-gray-200 text-indigo-600"} transition-colors duration-200`}
// // // // // // // // // // // // // //             >
// // // // // // // // // // // // // //               {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // // // // // // // // // // // // //             </button>
// // // // // // // // // // // // // //           </div>
// // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // //       </div>

// // // // // // // // // // // // // //       <div className="flex-grow overflow-hidden mt-20 px-4 mb-24">
// // // // // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl rounded-lg overflow-hidden">
// // // // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // // // //             {!showChat && (
// // // // // // // // // // // // // //               <motion.div
// // // // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // // // //                 className="text-center p-8"
// // // // // // // // // // // // // //               >
// // // // // // // // // // // // // //                 <h1 className={`text-4xl font-bold mb-4 ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"}`}>Welcome to NoaiGPT</h1>
// // // // // // // // // // // // // //                 <p className={`text-xl mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// // // // // // // // // // // // // //                   NoaiGPT is a human-like paraphraser that bypasses all AI detection systems. 
// // // // // // // // // // // // // //                   Our advanced technology ensures your text remains undetectable while maintaining its original meaning.
// // // // // // // // // // // // // //                 </p>
// // // // // // // // // // // // // //                 <p className={`text-lg mb-4 ${theme === "dark" ? "text-gray-400" : "text-gray-600"}`}>
// // // // // // // // // // // // // //                   Start by typing your text below and experience the power of human-like paraphrasing!
// // // // // // // // // // // // // //                 </p>
// // // // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // // // //             )}
// // // // // // // // // // // // // //           </AnimatePresence>

// // // // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // // // //             {showChat && (
// // // // // // // // // // // // // //               <motion.div
// // // // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // // // //                 className="flex-grow overflow-y-auto p-6 space-y-4 max-h-[calc(100vh-240px)]"
// // // // // // // // // // // // // //               >
// // // // // // // // // // // // // //                 <div className="h-12 bg-gradient-to-b from-transparent to-gray-900 dark:to-white opacity-20 pointer-events-none"></div>
// // // // // // // // // // // // // //                 {messages.map((message, index) => (
// // // // // // // // // // // // // //                   <motion.div 
// // // // // // // // // // // // // //                     key={index} 
// // // // // // // // // // // // // //                     initial={{ opacity: 0, y: 20 }} 
// // // // // // // // // // // // // //                     animate={{ opacity: 1, y: 0 }} 
// // // // // // // // // // // // // //                     transition={{ duration: 0.3 }} 
// // // // // // // // // // // // // //                     className="flex items-start space-x-4"
// // // // // // // // // // // // // //                   >
// // // // // // // // // // // // // //                     <div className={`p-4 rounded-lg flex-1 ${message.sender === "user" ? "bg-indigo-100 text-gray-800" : "bg-transparent"}`}>
// // // // // // // // // // // // // //                       {message.text}
// // // // // // // // // // // // // //                     </div>
// // // // // // // // // // // // // //                     {message.sender === "bot" && (
// // // // // // // // // // // // // //                       <div className={`p-4 rounded-lg flex-1 ${theme === "dark" ? "bg-gray-800" : "bg-gray-200"} ${theme === "dark" ? "text-gray-200" : "text-gray-800"}`}>
// // // // // // // // // // // // // //                         {message.text}
// // // // // // // // // // // // // //                         {message.versions && (
// // // // // // // // // // // // // //                           <div className="mt-2 flex justify-between items-center">
// // // // // // // // // // // // // //                             <button onClick={() => changeVersion(index, 'prev')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // // // // //                               <FiChevronLeft />
// // // // // // // // // // // // // //                             </button>
// // // // // // // // // // // // // //                             <span className="text-sm text-indigo-400">
// // // // // // // // // // // // // //                               {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // // // // // // //                             </span>
// // // // // // // // // // // // // //                             <button onClick={() => changeVersion(index, 'next')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // // // // //                               <FiChevronRight />
// // // // // // // // // // // // // //                             </button>
// // // // // // // // // // // // // //                           </div>
// // // // // // // // // // // // // //                         )}
// // // // // // // // // // // // // //                         <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // // // // // // //                           <button onClick={() => copyToClipboard(message.text)} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // // // // //                             <FiCopy />
// // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // //                           <button onClick={() => redoMessage(message.originalInput || '')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // // // // //                             <FiRefreshCw />
// // // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // // //                         </div>
// // // // // // // // // // // // // //                       </div>
// // // // // // // // // // // // // //                     )}
// // // // // // // // // // // // // //                   </motion.div>
// // // // // // // // // // // // // //                 ))}
// // // // // // // // // // // // // //                 {loading && <Skeleton count={1} />}
// // // // // // // // // // // // // //                 <div ref={messagesEndRef} />
// // // // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // // // //             )}
// // // // // // // // // // // // // //           </AnimatePresence>
// // // // // // // // // // // // // //         </div>
// // // // // // // // // // // // // //       </div>
      
// // // // // // // // // // // // // //       <div className="fixed bottom-0 left-0 right-0 p-4 bg-transparent">
// // // // // // // // // // // // // //       <div className="mx-auto w-full max-w-4xl">
// // // // // // // // // // // // // //   <div className="flex items-center w-full rounded-lg bg-transparent overflow-hidden rgb-flow">
// // // // // // // // // // // // // //     <textarea 
// // // // // // // // // // // // // //       ref={textareaRef}
// // // // // // // // // // // // // //       className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-gray-200" : "text-gray-800"} placeholder-gray-500`}
// // // // // // // // // // // // // //       rows={2}
// // // // // // // // // // // // // //       value={text} 
// // // // // // // // // // // // // //       onChange={handleTextAreaChange}
// // // // // // // // // // // // // //       onKeyDown={handleKeyDown}
// // // // // // // // // // // // // //       placeholder="Type your message here..." 
// // // // // // // // // // // // // //     />
// // // // // // // // // // // // // //     <button 
// // // // // // // // // // // // // //       className="p-3 bg-indigo-500 text-white rounded-full hover:bg-indigo-600 focus:outline-none flex items-center justify-center transition-colors duration-200 w-12 h-12 mr-1"
// // // // // // // // // // // // // //       onClick={sendMessage}
// // // // // // // // // // // // // //       disabled={loading || text.trim().length < 3}
// // // // // // // // // // // // // //     >
// // // // // // // // // // // // // //       {loading ? (
// // // // // // // // // // // // // //         <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // // // // // // // // // // //       ) : (
// // // // // // // // // // // // // //         <FiSend className="w-5 h-5" />
// // // // // // // // // // // // // //       )}
// // // // // // // // // // // // // //     </button>
// // // // // // // // // // // // // //   </div>
// // // // // // // // // // // // // // </div>
// // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // //       <ToastContainer />
// // // // // // // // // // // // // //     </div>
// // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // }

// // // // // // // // // // // // // "use client";

// // // // // // // // // // // // // import axios from "axios";
// // // // // // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // // // // // import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // // // // // import { motion, AnimatePresence } from "framer-motion";
// // // // // // // // // // // // // import { trefoil } from 'ldrs';

// // // // // // // // // // // // // trefoil.register();

// // // // // // // // // // // // // function countWords(str: string) {
// // // // // // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // // // // // }

// // // // // // // // // // // // // interface Message {
// // // // // // // // // // // // //   text: string;
// // // // // // // // // // // // //   sender: string;
// // // // // // // // // // // // //   originalInput?: string;
// // // // // // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // // // // // }

// // // // // // // // // // // // // export default function Home() {
// // // // // // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // // // // // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // // // // // //   const toggleTheme = () => {
// // // // // // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // // // // // //   };

// // // // // // // // // // // // //   const sendMessage = async () => {
// // // // // // // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // // // // // // //     if (wordCount > 200) {
// // // // // // // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // // // // // // //       return;
// // // // // // // // // // // // //     }

// // // // // // // // // // // // //     setLoading(true);
// // // // // // // // // // // // //     setShowChat(true);
// // // // // // // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // // // // // // //     setText("");

// // // // // // // // // // // // //     try {
// // // // // // // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // // // // // // //         text: text,
// // // // // // // // // // // // //         setting: 3,
// // // // // // // // // // // // //         output_format: "json"
// // // // // // // // // // // // //       });

// // // // // // // // // // // // //       setLoading(false);
      
// // // // // // // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // // // // // // //         sender: "bot",
// // // // // // // // // // // // //         originalInput: text,
// // // // // // // // // // // // //         versions: humanLikeVersions,
// // // // // // // // // // // // //         currentVersionIndex: 0
// // // // // // // // // // // // //       }]);
// // // // // // // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // // // // // // //       scrollToBottom();
// // // // // // // // // // // // //     } catch (error: any) {
// // // // // // // // // // // // //       setLoading(false);
// // // // // // // // // // // // //       if (error.response?.status === 429) {
// // // // // // // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // // // // // // //         setTimeout(() => {
// // // // // // // // // // // // //           window.location.href = '/signup';
// // // // // // // // // // // // //         }, 3000);
// // // // // // // // // // // // //       } else {
// // // // // // // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // // // // // // //       }
// // // // // // // // // // // // //     }
// // // // // // // // // // // // //   };

// // // // // // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // // // // // // //         return {
// // // // // // // // // // // // //           ...msg,
// // // // // // // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // // // // // // //           currentVersionIndex: newIndex
// // // // // // // // // // // // //         };
// // // // // // // // // // // // //       }
// // // // // // // // // // // // //       return msg;
// // // // // // // // // // // // //     }));
// // // // // // // // // // // // //   };

// // // // // // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // // // // // // //     }, (err) => {
// // // // // // // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // // // // // // //     });
// // // // // // // // // // // // //   };

// // // // // // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // // // // // //     setText(originalInput);
// // // // // // // // // // // // //     textareaRef.current?.focus();
// // // // // // // // // // // // //   };

// // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // // // // // // // // //     setTheme(storedTheme);
// // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // // // // // //   }, []);

// // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // // // // // //   }, [theme]);

// // // // // // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // //     const newText = event.target.value;
// // // // // // // // // // // // //     setText(newText);
// // // // // // // // // // // // //     setWordCount(countWords(newText));
// // // // // // // // // // // // //   };

// // // // // // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // // // // // // //       event.preventDefault();
// // // // // // // // // // // // //       sendMessage();
// // // // // // // // // // // // //     }
// // // // // // // // // // // // //   };

// // // // // // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // // // // // // //   };

// // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // //     scrollToBottom();
// // // // // // // // // // // // //   }, [messages]);

// // // // // // // // // // // // //   return (
// // // // // // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gradient-to-br from-gray-900 to-gray-800" : "bg-gradient-to-br from-gray-100 to-white"} min-h-screen w-screen font-sans`}>
// // // // // // // // // // // // //       <div className="fixed top-0 left-0 right-0 z-50">
// // // // // // // // // // // // //         <div className="backdrop-blur-md bg-transparent">
// // // // // // // // // // // // //           <div className="flex justify-between items-center w-full max-w-6xl mx-auto p-5">
// // // // // // // // // // // // //             <div>
// // // // // // // // // // // // //               <p className={`font-extrabold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"} font-display`}>
// // // // // // // // // // // // //                 NoaiGPT
// // // // // // // // // // // // //               </p>
// // // // // // // // // // // // //             </div>
// // // // // // // // // // // // //             <button 
// // // // // // // // // // // // //               onClick={toggleTheme} 
// // // // // // // // // // // // //               className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-indigo-400" : "bg-gray-200 text-indigo-600"} transition-colors duration-200`}
// // // // // // // // // // // // //             >
// // // // // // // // // // // // //               {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // // // // // // // // // // // //             </button>
// // // // // // // // // // // // //           </div>
// // // // // // // // // // // // //         </div>
// // // // // // // // // // // // //       </div>

// // // // // // // // // // // // //       <div className="flex-grow overflow-hidden mt-20 px-4 mb-24">
// // // // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl rounded-lg overflow-hidden">
// // // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // // //             {!showChat && (
// // // // // // // // // // // // //               <motion.div
// // // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // // //                 className="text-center p-8"
// // // // // // // // // // // // //               >
// // // // // // // // // // // // //                 <h1 className={`text-4xl font-bold mb-4 ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"}`}>Welcome to NoaiGPT</h1>
// // // // // // // // // // // // //                 <p className={`text-xl mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// // // // // // // // // // // // //                   NoaiGPT is a human-like paraphraser that bypasses all AI detection systems. 
// // // // // // // // // // // // //                   Our advanced technology ensures your text remains undetectable while maintaining its original meaning.
// // // // // // // // // // // // //                 </p>
// // // // // // // // // // // // //                 <p className={`text-lg mb-4 ${theme === "dark" ? "text-gray-400" : "text-gray-600"}`}>
// // // // // // // // // // // // //                   Start by typing your text below and experience the power of human-like paraphrasing!
// // // // // // // // // // // // //                 </p>
// // // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // // //             )}
// // // // // // // // // // // // //           </AnimatePresence>

// // // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // // //             {showChat && (
// // // // // // // // // // // // //               <motion.div
// // // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // // //                 className="flex-grow overflow-y-auto p-6 space-y-4 max-h-[calc(100vh-240px)]"
// // // // // // // // // // // // //               >
// // // // // // // // // // // // //                 <div className="h-12 bg-gradient-to-b from-transparent to-gray-900 dark:to-white opacity-20 pointer-events-none"></div>
// // // // // // // // // // // // //                 {messages.map((message, index) => (
// // // // // // // // // // // // //                   <motion.div 
// // // // // // // // // // // // //                     key={index} 
// // // // // // // // // // // // //                     initial={{ opacity: 0, y: 20 }} 
// // // // // // // // // // // // //                     animate={{ opacity: 1, y: 0 }} 
// // // // // // // // // // // // //                     transition={{ duration: 0.3 }} 
// // // // // // // // // // // // //                     className="flex items-start space-x-4"
// // // // // // // // // // // // //                   >
// // // // // // // // // // // // //                     <div className={`p-4 rounded-lg flex-1 ${message.sender === "user" ? "bg-indigo-100 text-gray-800" : "bg-transparent"}`}>
// // // // // // // // // // // // //                       {message.text}
// // // // // // // // // // // // //                     </div>
// // // // // // // // // // // // //                     {message.sender === "bot" && (
// // // // // // // // // // // // //                       <div className={`p-4 rounded-lg flex-1 ${theme === "dark" ? "bg-gray-800" : "bg-gray-200"} ${theme === "dark" ? "text-gray-200" : "text-gray-800"}`}>
// // // // // // // // // // // // //                         {message.text}
// // // // // // // // // // // // //                         {message.versions && (
// // // // // // // // // // // // //                           <div className="mt-2 flex justify-between items-center">
// // // // // // // // // // // // //                             <button onClick={() => changeVersion(index, 'prev')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // // // //                               <FiChevronLeft />
// // // // // // // // // // // // //                             </button>
// // // // // // // // // // // // //                             <span className="text-sm text-indigo-400">
// // // // // // // // // // // // //                               {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // // // // // //                             </span>
// // // // // // // // // // // // //                             <button onClick={() => changeVersion(index, 'next')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // // // //                               <FiChevronRight />
// // // // // // // // // // // // //                             </button>
// // // // // // // // // // // // //                           </div>
// // // // // // // // // // // // //                         )}
// // // // // // // // // // // // //                         <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // // // // // //                           <button onClick={() => copyToClipboard(message.text)} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // // // //                             <FiCopy />
// // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // //                           <button onClick={() => redoMessage(message.originalInput || '')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // // // //                             <FiRefreshCw />
// // // // // // // // // // // // //                           </button>
// // // // // // // // // // // // //                         </div>
// // // // // // // // // // // // //                       </div>
// // // // // // // // // // // // //                     )}
// // // // // // // // // // // // //                   </motion.div>
// // // // // // // // // // // // //                 ))}
// // // // // // // // // // // // //                 {loading && <Skeleton count={1} />}
// // // // // // // // // // // // //                 <div ref={messagesEndRef} />
// // // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // // //             )}
// // // // // // // // // // // // //           </AnimatePresence>
// // // // // // // // // // // // //         </div>
// // // // // // // // // // // // //       </div>
      
// // // // // // // // // // // // //       <div className="fixed bottom-0 left-0 right-0 p-4 bg-transparent">
// // // // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl">
// // // // // // // // // // // // //           <div className="flex items-center w-full rounded-lg bg-transparent overflow-hidden rgb-flow">
// // // // // // // // // // // // //             <textarea 
// // // // // // // // // // // // //               ref={textareaRef}
// // // // // // // // // // // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-gray-200" : "text-gray-800"} placeholder-gray-500`}
// // // // // // // // // // // // //               rows={2}
// // // // // // // // // // // // //               value={text} 
// // // // // // // // // // // // //               onChange={handleTextAreaChange}
// // // // // // // // // // // // //               onKeyDown={handleKeyDown}
// // // // // // // // // // // // //               placeholder="Type your message here..." 
// // // // // // // // // // // // //             />
// // // // // // // // // // // // //             <button 
// // // // // // // // // // // // //               className="p-3 bg-indigo-500 text-white rounded-full hover:bg-indigo-600 focus:outline-none flex items-center justify-center transition-colors duration-200 w-12 h-12 mr-1"
// // // // // // // // // // // // //               onClick={sendMessage}
// // // // // // // // // // // // //               disabled={loading || text.trim().length < 3}
// // // // // // // // // // // // //             >
// // // // // // // // // // // // //               {loading ? (
// // // // // // // // // // // // //                 <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // // // // // // // // // //               ) : (
// // // // // // // // // // // // //                 <FiSend className="w-5 h-5" />
// // // // // // // // // // // // //               )}
// // // // // // // // // // // // //             </button>
// // // // // // // // // // // // //           </div>
// // // // // // // // // // // // //         </div>
// // // // // // // // // // // // //       </div>
// // // // // // // // // // // // //       <ToastContainer />
// // // // // // // // // // // // //     </div>
// // // // // // // // // // // // //   );
// // // // // // // // // // // // // }
// // // // // // // // // // // // "use client";

// // // // // // // // // // // // import axios from "axios";
// // // // // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // // // // import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // // // // import { motion, AnimatePresence } from "framer-motion";
// // // // // // // // // // // // import { trefoil } from 'ldrs';

// // // // // // // // // // // // trefoil.register();

// // // // // // // // // // // // function countWords(str: string) {
// // // // // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // // // // }

// // // // // // // // // // // // interface Message {
// // // // // // // // // // // //   text: string;
// // // // // // // // // // // //   sender: string;
// // // // // // // // // // // //   originalInput?: string;
// // // // // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // // // // }

// // // // // // // // // // // // export default function Home() {
// // // // // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // // // // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // // // // //   const toggleTheme = () => {
// // // // // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // // // // //   };

// // // // // // // // // // // //   const sendMessage = async () => {
// // // // // // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // // // // // //     if (wordCount > 200) {
// // // // // // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // // // // // //       return;
// // // // // // // // // // // //     }

// // // // // // // // // // // //     setLoading(true);
// // // // // // // // // // // //     setShowChat(true);
// // // // // // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // // // // // //     setText("");

// // // // // // // // // // // //     try {
// // // // // // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // // // // // //         text: text,
// // // // // // // // // // // //         setting: 3,
// // // // // // // // // // // //         output_format: "json"
// // // // // // // // // // // //       });

// // // // // // // // // // // //       setLoading(false);
      
// // // // // // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // // // // // //         sender: "bot",
// // // // // // // // // // // //         originalInput: text,
// // // // // // // // // // // //         versions: humanLikeVersions,
// // // // // // // // // // // //         currentVersionIndex: 0
// // // // // // // // // // // //       }]);
// // // // // // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // // // // // //       scrollToBottom();
// // // // // // // // // // // //     } catch (error: any) {
// // // // // // // // // // // //       setLoading(false);
// // // // // // // // // // // //       if (error.response?.status === 429) {
// // // // // // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // // // // // //         setTimeout(() => {
// // // // // // // // // // // //           window.location.href = '/signup';
// // // // // // // // // // // //         }, 3000);
// // // // // // // // // // // //       } else {
// // // // // // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // // // // // //       }
// // // // // // // // // // // //     }
// // // // // // // // // // // //   };

// // // // // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // // // // // //         return {
// // // // // // // // // // // //           ...msg,
// // // // // // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // // // // // //           currentVersionIndex: newIndex
// // // // // // // // // // // //         };
// // // // // // // // // // // //       }
// // // // // // // // // // // //       return msg;
// // // // // // // // // // // //     }));
// // // // // // // // // // // //   };

// // // // // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // // // // // //     }, (err) => {
// // // // // // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // // // // // //     });
// // // // // // // // // // // //   };

// // // // // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // // // // //     setText(originalInput);
// // // // // // // // // // // //     textareaRef.current?.focus();
// // // // // // // // // // // //   };

// // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // // // // // // // //     setTheme(storedTheme);
// // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // // // // //   }, []);

// // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // // // // //   }, [theme]);

// // // // // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // //     const newText = event.target.value;
// // // // // // // // // // // //     setText(newText);
// // // // // // // // // // // //     setWordCount(countWords(newText));
// // // // // // // // // // // //   };

// // // // // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // // // // // //       event.preventDefault();
// // // // // // // // // // // //       sendMessage();
// // // // // // // // // // // //     }
// // // // // // // // // // // //   };

// // // // // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // // // // // //   };

// // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // //     scrollToBottom();
// // // // // // // // // // // //   }, [messages]);

// // // // // // // // // // // //   return (
// // // // // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gradient-to-br from-gray-900 to-gray-800" : "bg-gradient-to-br from-gray-100 to-white"} min-h-screen w-screen font-sans`}>
// // // // // // // // // // // //       <div className="fixed top-0 left-0 right-0 z-50">
// // // // // // // // // // // //         <div className="backdrop-blur-md bg-transparent">
// // // // // // // // // // // //           <div className="flex justify-between items-center w-full max-w-6xl mx-auto p-5">
// // // // // // // // // // // //             <div>
// // // // // // // // // // // //               <p className={`font-extrabold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"} font-display`}>
// // // // // // // // // // // //                 NoaiGPT
// // // // // // // // // // // //               </p>
// // // // // // // // // // // //             </div>
// // // // // // // // // // // //             <button 
// // // // // // // // // // // //               onClick={toggleTheme} 
// // // // // // // // // // // //               className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-indigo-400" : "bg-gray-200 text-indigo-600"} transition-colors duration-200`}
// // // // // // // // // // // //             >
// // // // // // // // // // // //               {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // // // // // // // // // // //             </button>
// // // // // // // // // // // //           </div>
// // // // // // // // // // // //         </div>
// // // // // // // // // // // //       </div>

// // // // // // // // // // // //       <div className="flex-grow overflow-hidden mt-20 px-4 mb-24">
// // // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl rounded-lg overflow-hidden">
// // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // //             {!showChat && (
// // // // // // // // // // // //               <motion.div
// // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // //                 className="text-center p-8"
// // // // // // // // // // // //               >
// // // // // // // // // // // //                 <h1 className={`text-4xl font-bold mb-4 ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"}`}>Welcome to NoaiGPT</h1>
// // // // // // // // // // // //                 <p className={`text-xl mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// // // // // // // // // // // //                   NoaiGPT is a human-like paraphraser that bypasses all AI detection systems. 
// // // // // // // // // // // //                   Our advanced technology ensures your text remains undetectable while maintaining its original meaning.
// // // // // // // // // // // //                 </p>
// // // // // // // // // // // //                 <p className={`text-lg mb-4 ${theme === "dark" ? "text-gray-400" : "text-gray-600"}`}>
// // // // // // // // // // // //                   Start by typing your text below and experience the power of human-like paraphrasing!
// // // // // // // // // // // //                 </p>
// // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // //             )}
// // // // // // // // // // // //           </AnimatePresence>

// // // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // // //             {showChat && (
// // // // // // // // // // // //               <motion.div
// // // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // // //                 className="flex-grow overflow-y-auto p-6 space-y-4 max-h-[calc(100vh-240px)]"
// // // // // // // // // // // //               >
// // // // // // // // // // // //                 <div className="h-12 bg-gradient-to-b from-transparent to-gray-900 dark:to-white opacity-20 pointer-events-none"></div>
// // // // // // // // // // // //                 {messages.map((message, index) => (
// // // // // // // // // // // //                   <motion.div 
// // // // // // // // // // // //                     key={index} 
// // // // // // // // // // // //                     initial={{ opacity: 0, y: 20 }} 
// // // // // // // // // // // //                     animate={{ opacity: 1, y: 0 }} 
// // // // // // // // // // // //                     transition={{ duration: 0.3 }} 
// // // // // // // // // // // //                     className="flex items-start space-x-4"
// // // // // // // // // // // //                   >
// // // // // // // // // // // //                     <div className={`p-4 rounded-lg flex-1 ${message.sender === "user" ? "bg-indigo-100 text-gray-800" : "bg-transparent"}`}>
// // // // // // // // // // // //                       {message.text}
// // // // // // // // // // // //                     </div>
// // // // // // // // // // // //                     {message.sender === "bot" && (
// // // // // // // // // // // //                       <div className={`p-4 rounded-lg flex-1 ${theme === "dark" ? "bg-gray-800" : "bg-gray-200"} ${theme === "dark" ? "text-gray-200" : "text-gray-800"}`}>
// // // // // // // // // // // //                         {message.text}
// // // // // // // // // // // //                         {message.versions && (
// // // // // // // // // // // //                           <div className="mt-2 flex justify-between items-center">
// // // // // // // // // // // //                             <button onClick={() => changeVersion(index, 'prev')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // // //                               <FiChevronLeft />
// // // // // // // // // // // //                             </button>
// // // // // // // // // // // //                             <span className="text-sm text-indigo-400">
// // // // // // // // // // // //                               {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // // // // //                             </span>
// // // // // // // // // // // //                             <button onClick={() => changeVersion(index, 'next')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // // //                               <FiChevronRight />
// // // // // // // // // // // //                             </button>
// // // // // // // // // // // //                           </div>
// // // // // // // // // // // //                         )}
// // // // // // // // // // // //                         <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // // // // //                           <button onClick={() => copyToClipboard(message.text)} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // // //                             <FiCopy />
// // // // // // // // // // // //                           </button>
// // // // // // // // // // // //                           <button onClick={() => redoMessage(message.originalInput || '')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // // //                             <FiRefreshCw />
// // // // // // // // // // // //                           </button>
// // // // // // // // // // // //                         </div>
// // // // // // // // // // // //                       </div>
// // // // // // // // // // // //                     )}
// // // // // // // // // // // //                   </motion.div>
// // // // // // // // // // // //                 ))}
// // // // // // // // // // // //                 {loading && <Skeleton count={1} />}
// // // // // // // // // // // //                 <div ref={messagesEndRef} />
// // // // // // // // // // // //               </motion.div>
// // // // // // // // // // // //             )}
// // // // // // // // // // // //           </AnimatePresence>
// // // // // // // // // // // //         </div>
// // // // // // // // // // // //       </div>
      
// // // // // // // // // // // //       <div className="fixed bottom-0 left-0 right-0 p-4 bg-transparent">
// // // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl">
// // // // // // // // // // // //           <div className="flex items-center w-full rounded-lg bg-transparent overflow-hidden border border-black rgb-bottom-border">
// // // // // // // // // // // //             <textarea 
// // // // // // // // // // // //               ref={textareaRef}
// // // // // // // // // // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-gray-200" : "text-gray-800"} placeholder-gray-500`}
// // // // // // // // // // // //               rows={2}
// // // // // // // // // // // //               value={text} 
// // // // // // // // // // // //               onChange={handleTextAreaChange}
// // // // // // // // // // // //               onKeyDown={handleKeyDown}
// // // // // // // // // // // //               placeholder="Type your message here..." 
// // // // // // // // // // // //             />
// // // // // // // // // // // //             <button 
// // // // // // // // // // // //               className="p-3 bg-indigo-500 text-white rounded-full hover:bg-indigo-600 focus:outline-none flex items-center justify-center transition-colors duration-200 w-12 h-12 mr-1"
// // // // // // // // // // // //               onClick={sendMessage}
// // // // // // // // // // // //               disabled={loading || text.trim().length < 3}
// // // // // // // // // // // //             >
// // // // // // // // // // // //               {loading ? (
// // // // // // // // // // // //                 <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // // // // // // // // //               ) : (
// // // // // // // // // // // //                 <FiSend className="w-5 h-5" />
// // // // // // // // // // // //               )}
// // // // // // // // // // // //             </button>
// // // // // // // // // // // //           </div>
// // // // // // // // // // // //         </div>
// // // // // // // // // // // //       </div>
// // // // // // // // // // // //       <ToastContainer />
// // // // // // // // // // // //     </div>
// // // // // // // // // // // //   );
// // // // // // // // // // // // }

// // // // // // // // // // // "use client";

// // // // // // // // // // // import axios from "axios";
// // // // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // // // import { FiMoon, FiSun, FiSend, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // // // import { motion, AnimatePresence } from "framer-motion";
// // // // // // // // // // // import { trefoil } from 'ldrs';

// // // // // // // // // // // trefoil.register();

// // // // // // // // // // // function countWords(str: string) {
// // // // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // // // }

// // // // // // // // // // // interface Message {
// // // // // // // // // // //   text: string;
// // // // // // // // // // //   sender: string;
// // // // // // // // // // //   originalInput?: string;
// // // // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // // // }

// // // // // // // // // // // export default function Home() {
// // // // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // // // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // // // //   const toggleTheme = () => {
// // // // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // // // //   };

// // // // // // // // // // //   const sendMessage = async () => {
// // // // // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // // // // //     if (wordCount > 200) {
// // // // // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // // // // //       return;
// // // // // // // // // // //     }

// // // // // // // // // // //     setLoading(true);
// // // // // // // // // // //     setShowChat(true);
// // // // // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // // // // //     setText("");

// // // // // // // // // // //     try {
// // // // // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // // // // //         text: text,
// // // // // // // // // // //         setting: 3,
// // // // // // // // // // //         output_format: "json"
// // // // // // // // // // //       });

// // // // // // // // // // //       setLoading(false);
      
// // // // // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // // // // //         sender: "bot",
// // // // // // // // // // //         originalInput: text,
// // // // // // // // // // //         versions: humanLikeVersions,
// // // // // // // // // // //         currentVersionIndex: 0
// // // // // // // // // // //       }]);
// // // // // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // // // // //       scrollToBottom();
// // // // // // // // // // //     } catch (error: any) {
// // // // // // // // // // //       setLoading(false);
// // // // // // // // // // //       if (error.response?.status === 429) {
// // // // // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // // // // //         setTimeout(() => {
// // // // // // // // // // //           window.location.href = '/signup';
// // // // // // // // // // //         }, 3000);
// // // // // // // // // // //       } else {
// // // // // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // // // // //       }
// // // // // // // // // // //     }
// // // // // // // // // // //   };

// // // // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // // // // //         return {
// // // // // // // // // // //           ...msg,
// // // // // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // // // // //           currentVersionIndex: newIndex
// // // // // // // // // // //         };
// // // // // // // // // // //       }
// // // // // // // // // // //       return msg;
// // // // // // // // // // //     }));
// // // // // // // // // // //   };

// // // // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // // // // //     }, (err) => {
// // // // // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // // // // //     });
// // // // // // // // // // //   };

// // // // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // // // //     setText(originalInput);
// // // // // // // // // // //     textareaRef.current?.focus();
// // // // // // // // // // //   };

// // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // // // // // // //     setTheme(storedTheme);
// // // // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // // // //   }, []);

// // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // // // //   }, [theme]);

// // // // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // //     const newText = event.target.value;
// // // // // // // // // // //     setText(newText);
// // // // // // // // // // //     setWordCount(countWords(newText));
// // // // // // // // // // //   };

// // // // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // // // // //       event.preventDefault();
// // // // // // // // // // //       sendMessage();
// // // // // // // // // // //     }
// // // // // // // // // // //   };

// // // // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // // // // //   };

// // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // //     scrollToBottom();
// // // // // // // // // // //   }, [messages]);

// // // // // // // // // // //   return (
// // // // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gradient-to-br from-gray-900 to-gray-800" : "bg-gradient-to-br from-gray-100 to-white"} min-h-screen w-screen font-sans`}>
// // // // // // // // // // //       <div className="fixed top-0 left-0 right-0 z-50">
// // // // // // // // // // //         <div className="backdrop-blur-md bg-transparent">
// // // // // // // // // // //           <div className="flex justify-between items-center w-full max-w-6xl mx-auto p-5">
// // // // // // // // // // //             <div>
// // // // // // // // // // //               <p className={`font-extrabold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"} font-display`}>
// // // // // // // // // // //                 NoaiGPT
// // // // // // // // // // //               </p>
// // // // // // // // // // //             </div>
// // // // // // // // // // //             <button 
// // // // // // // // // // //               onClick={toggleTheme} 
// // // // // // // // // // //               className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-indigo-400" : "bg-gray-200 text-indigo-600"} transition-colors duration-200`}
// // // // // // // // // // //             >
// // // // // // // // // // //               {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // // // // // // // // // //             </button>
// // // // // // // // // // //           </div>
// // // // // // // // // // //         </div>
// // // // // // // // // // //       </div>

// // // // // // // // // // //       <div className="flex-grow overflow-hidden mt-20 px-4 mb-24">
// // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl rounded-lg overflow-hidden">
// // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // //             {!showChat && (
// // // // // // // // // // //               <motion.div
// // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // //                 className="text-center p-8"
// // // // // // // // // // //               >
// // // // // // // // // // //                 <h1 className={`text-4xl font-bold mb-4 ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"}`}>Welcome to NoaiGPT</h1>
// // // // // // // // // // //                 <p className={`text-xl mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// // // // // // // // // // //                   NoaiGPT is a human-like paraphraser that bypasses all AI detection systems. 
// // // // // // // // // // //                   Our advanced technology ensures your text remains undetectable while maintaining its original meaning.
// // // // // // // // // // //                 </p>
// // // // // // // // // // //                 <p className={`text-lg mb-4 ${theme === "dark" ? "text-gray-400" : "text-gray-600"}`}>
// // // // // // // // // // //                   Start by typing your text below and experience the power of human-like paraphrasing!
// // // // // // // // // // //                 </p>
// // // // // // // // // // //               </motion.div>
// // // // // // // // // // //             )}
// // // // // // // // // // //           </AnimatePresence>

// // // // // // // // // // //           <AnimatePresence>
// // // // // // // // // // //             {showChat && (
// // // // // // // // // // //               <motion.div
// // // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // // //                 className="flex-grow overflow-y-auto p-6 space-y-4 max-h-[calc(100vh-240px)]"
// // // // // // // // // // //               >
// // // // // // // // // // //                 <div className="h-12 bg-gradient-to-b from-transparent to-gray-900 dark:to-white opacity-20 pointer-events-none"></div>
// // // // // // // // // // //                 {messages.map((message, index) => (
// // // // // // // // // // //                   <motion.div 
// // // // // // // // // // //                     key={index} 
// // // // // // // // // // //                     initial={{ opacity: 0, y: 20 }} 
// // // // // // // // // // //                     animate={{ opacity: 1, y: 0 }} 
// // // // // // // // // // //                     transition={{ duration: 0.3 }} 
// // // // // // // // // // //                     className="flex items-start space-x-4"
// // // // // // // // // // //                   >
// // // // // // // // // // //                     <div className={`p-4 rounded-lg flex-1 ${message.sender === "user" ? "bg-indigo-100 text-gray-800" : "bg-transparent"}`}>
// // // // // // // // // // //                       {message.text}
// // // // // // // // // // //                     </div>
// // // // // // // // // // //                     {message.sender === "bot" && (
// // // // // // // // // // //                       <div className={`p-4 rounded-lg flex-1 ${theme === "dark" ? "bg-gray-800" : "bg-gray-200"} ${theme === "dark" ? "text-gray-200" : "text-gray-800"}`}>
// // // // // // // // // // //                         {message.text}
// // // // // // // // // // //                         {message.versions && (
// // // // // // // // // // //                           <div className="mt-2 flex justify-between items-center">
// // // // // // // // // // //                             <button onClick={() => changeVersion(index, 'prev')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // //                               <FiChevronLeft />
// // // // // // // // // // //                             </button>
// // // // // // // // // // //                             <span className="text-sm text-indigo-400">
// // // // // // // // // // //                               {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // // // //                             </span>
// // // // // // // // // // //                             <button onClick={() => changeVersion(index, 'next')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // //                               <FiChevronRight />
// // // // // // // // // // //                             </button>
// // // // // // // // // // //                           </div>
// // // // // // // // // // //                         )}
// // // // // // // // // // //                         <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // // // //                           <button onClick={() => copyToClipboard(message.text)} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // //                             <FiCopy />
// // // // // // // // // // //                           </button>
// // // // // // // // // // //                           <button onClick={() => redoMessage(message.originalInput || '')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // // //                             <FiRefreshCw />
// // // // // // // // // // //                           </button>
// // // // // // // // // // //                         </div>
// // // // // // // // // // //                       </div>
// // // // // // // // // // //                     )}
// // // // // // // // // // //                   </motion.div>
// // // // // // // // // // //                 ))}
// // // // // // // // // // //                 {loading && <Skeleton count={1} />}
// // // // // // // // // // //                 <div ref={messagesEndRef} />
// // // // // // // // // // //               </motion.div>
// // // // // // // // // // //             )}
// // // // // // // // // // //           </AnimatePresence>
// // // // // // // // // // //         </div>
// // // // // // // // // // //       </div>
      
// // // // // // // // // // //       <div className="fixed bottom-0 left-0 right-0 p-4 bg-transparent">
// // // // // // // // // // //         <div className="mx-auto w-full max-w-4xl">
// // // // // // // // // // //           <div className={`flex items-center w-full rounded-lg overflow-hidden border ${theme === "dark" ? "border-gray-700" : "border-gray-300"} rgb-bottom-shadow`}>
// // // // // // // // // // //             <textarea 
// // // // // // // // // // //               ref={textareaRef}
// // // // // // // // // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-gray-200" : "text-gray-800"} placeholder-gray-500`}
// // // // // // // // // // //               rows={2}
// // // // // // // // // // //               value={text} 
// // // // // // // // // // //               onChange={handleTextAreaChange}
// // // // // // // // // // //               onKeyDown={handleKeyDown}
// // // // // // // // // // //               placeholder="Type your message here..." 
// // // // // // // // // // //             />
// // // // // // // // // // //             <button 
// // // // // // // // // // //               className="p-3 bg-indigo-500 text-white rounded-full hover:bg-indigo-600 focus:outline-none flex items-center justify-center transition-colors duration-200 w-12 h-12 mr-1"
// // // // // // // // // // //               onClick={sendMessage}
// // // // // // // // // // //               disabled={loading || text.trim().length < 3}
// // // // // // // // // // //             >
// // // // // // // // // // //               {loading ? (
// // // // // // // // // // //                 <l-trefoil size="24" stroke="3" stroke-length="0.15" bg-opacity="0.1" speed="1.4" color="currentColor"></l-trefoil>
// // // // // // // // // // //               ) : (
// // // // // // // // // // //                 <FiSend className="w-5 h-5" />
// // // // // // // // // // //               )}
// // // // // // // // // // //             </button>
// // // // // // // // // // //           </div>
// // // // // // // // // // //         </div>
// // // // // // // // // // //       </div>
// // // // // // // // // // //       <ToastContainer />
// // // // // // // // // // //     </div>
// // // // // // // // // // //   );
// // // // // // // // // // // }

// // // // // // // // // // "use client";

// // // // // // // // // // import axios from "axios";
// // // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // // import { FiMoon, FiSun, FiArrowRight, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // // import { motion, AnimatePresence } from "framer-motion";

// // // // // // // // // // function countWords(str: string) {
// // // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // // }

// // // // // // // // // // interface Message {
// // // // // // // // // //   text: string;
// // // // // // // // // //   sender: string;
// // // // // // // // // //   originalInput?: string;
// // // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // // }

// // // // // // // // // // export default function Home() {
// // // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // // //   const toggleTheme = () => {
// // // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // // //   };

// // // // // // // // // //   const sendMessage = async () => {
// // // // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // // // //     if (wordCount > 200) {
// // // // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // // // //       return;
// // // // // // // // // //     }

// // // // // // // // // //     setLoading(true);
// // // // // // // // // //     setShowChat(true);
// // // // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // // // //     setText("");

// // // // // // // // // //     try {
// // // // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // // // //         text: text,
// // // // // // // // // //         setting: 3,
// // // // // // // // // //         output_format: "json"
// // // // // // // // // //       });

// // // // // // // // // //       setLoading(false);
      
// // // // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // // // //         sender: "bot",
// // // // // // // // // //         originalInput: text,
// // // // // // // // // //         versions: humanLikeVersions,
// // // // // // // // // //         currentVersionIndex: 0
// // // // // // // // // //       }]);
// // // // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // // // //       scrollToBottom();
// // // // // // // // // //     } catch (error: any) {
// // // // // // // // // //       setLoading(false);
// // // // // // // // // //       if (error.response?.status === 429) {
// // // // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // // // //         setTimeout(() => {
// // // // // // // // // //           window.location.href = '/signup';
// // // // // // // // // //         }, 3000);
// // // // // // // // // //       } else {
// // // // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // // // //       }
// // // // // // // // // //     }
// // // // // // // // // //   };

// // // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // // // //         return {
// // // // // // // // // //           ...msg,
// // // // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // // // //           currentVersionIndex: newIndex
// // // // // // // // // //         };
// // // // // // // // // //       }
// // // // // // // // // //       return msg;
// // // // // // // // // //     }));
// // // // // // // // // //   };

// // // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // // // //     }, (err) => {
// // // // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // // // //     });
// // // // // // // // // //   };

// // // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // // //     setText(originalInput);
// // // // // // // // // //     textareaRef.current?.focus();
// // // // // // // // // //   };

// // // // // // // // // //   useEffect(() => {
// // // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // // // // // //     setTheme(storedTheme);
// // // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // // //   }, []);

// // // // // // // // // //   useEffect(() => {
// // // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // // //   }, [theme]);

// // // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // // //     const newText = event.target.value;
// // // // // // // // // //     setText(newText);
// // // // // // // // // //     setWordCount(countWords(newText));
// // // // // // // // // //   };

// // // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // // // //       event.preventDefault();
// // // // // // // // // //       sendMessage();
// // // // // // // // // //     }
// // // // // // // // // //   };

// // // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // // // //   };

// // // // // // // // // //   useEffect(() => {
// // // // // // // // // //     scrollToBottom();
// // // // // // // // // //   }, [messages]);

// // // // // // // // // //   return (
// // // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gradient-to-br from-gray-900 to-gray-800" : "bg-gradient-to-br from-gray-100 to-white"} min-h-screen w-screen font-sans`}>
// // // // // // // // // //       <div className="fixed top-0 left-0 right-0 z-50">
// // // // // // // // // //         <div className="backdrop-blur-md bg-transparent">
// // // // // // // // // //           <div className="flex justify-between items-center w-full max-w-6xl mx-auto p-5">
// // // // // // // // // //             <div>
// // // // // // // // // //               <p className={`font-extrabold text-3xl max-sm:text-2xl ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"} font-display`}>
// // // // // // // // // //                 NoaiGPT
// // // // // // // // // //               </p>
// // // // // // // // // //             </div>
// // // // // // // // // //             <button 
// // // // // // // // // //               onClick={toggleTheme} 
// // // // // // // // // //               className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-indigo-400" : "bg-gray-200 text-indigo-600"} transition-colors duration-200`}
// // // // // // // // // //             >
// // // // // // // // // //               {theme === "dark" ? <FiSun size={24} /> : <FiMoon size={24} />}
// // // // // // // // // //             </button>
// // // // // // // // // //           </div>
// // // // // // // // // //         </div>
// // // // // // // // // //       </div>

// // // // // // // // // //       <div className="flex-grow overflow-hidden mt-20 px-4 mb-24">
// // // // // // // // // //         <div className="mx-auto w-full max-w-4xl rounded-lg overflow-hidden">
// // // // // // // // // //           <AnimatePresence>
// // // // // // // // // //             {!showChat && (
// // // // // // // // // //               <motion.div
// // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // //                 className="text-center p-8"
// // // // // // // // // //               >
// // // // // // // // // //                 <h1 className={`text-4xl font-bold mb-4 ${theme === "dark" ? "text-indigo-400" : "text-indigo-600"}`}>Welcome to NoaiGPT</h1>
// // // // // // // // // //                 <p className={`text-xl mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// // // // // // // // // //                   NoaiGPT is a human-like paraphraser that bypasses all AI detection systems. 
// // // // // // // // // //                   Our advanced technology ensures your text remains undetectable while maintaining its original meaning.
// // // // // // // // // //                 </p>
// // // // // // // // // //                 <p className={`text-lg mb-4 ${theme === "dark" ? "text-gray-400" : "text-gray-600"}`}>
// // // // // // // // // //                   Start by typing your text below and experience the power of human-like paraphrasing!
// // // // // // // // // //                 </p>
// // // // // // // // // //               </motion.div>
// // // // // // // // // //             )}
// // // // // // // // // //           </AnimatePresence>

// // // // // // // // // //           <AnimatePresence>
// // // // // // // // // //             {showChat && (
// // // // // // // // // //               <motion.div
// // // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // // //                 className="flex-grow overflow-y-auto p-6 space-y-4 max-h-[calc(100vh-240px)]"
// // // // // // // // // //               >
// // // // // // // // // //                 <div className="h-12 bg-gradient-to-b from-transparent to-gray-900 dark:to-white opacity-20 pointer-events-none"></div>
// // // // // // // // // //                 {messages.map((message, index) => (
// // // // // // // // // //                   <motion.div 
// // // // // // // // // //                     key={index} 
// // // // // // // // // //                     initial={{ opacity: 0, y: 20 }} 
// // // // // // // // // //                     animate={{ opacity: 1, y: 0 }} 
// // // // // // // // // //                     transition={{ duration: 0.3 }} 
// // // // // // // // // //                     className="flex items-start space-x-4"
// // // // // // // // // //                   >
// // // // // // // // // //                     <div className={`p-4 rounded-lg flex-1 ${message.sender === "user" ? "bg-indigo-100 text-gray-800" : "bg-transparent"}`}>
// // // // // // // // // //                       {message.text}
// // // // // // // // // //                     </div>
// // // // // // // // // //                     {message.sender === "bot" && (
// // // // // // // // // //                       <div className={`p-4 rounded-lg flex-1 ${theme === "dark" ? "bg-gray-800" : "bg-gray-200"} ${theme === "dark" ? "text-gray-200" : "text-gray-800"}`}>
// // // // // // // // // //                         {message.text}
// // // // // // // // // //                         {message.versions && (
// // // // // // // // // //                           <div className="mt-2 flex justify-between items-center">
// // // // // // // // // //                             <button onClick={() => changeVersion(index, 'prev')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // //                               <FiChevronLeft />
// // // // // // // // // //                             </button>
// // // // // // // // // //                             <span className="text-sm text-indigo-400">
// // // // // // // // // //                               {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // // //                             </span>
// // // // // // // // // //                             <button onClick={() => changeVersion(index, 'next')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // //                               <FiChevronRight />
// // // // // // // // // //                             </button>
// // // // // // // // // //                           </div>
// // // // // // // // // //                         )}
// // // // // // // // // //                         <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // // //                           <button onClick={() => copyToClipboard(message.text)} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // //                             <FiCopy />
// // // // // // // // // //                           </button>
// // // // // // // // // //                           <button onClick={() => redoMessage(message.originalInput || '')} className="text-indigo-400 hover:text-indigo-600">
// // // // // // // // // //                             <FiRefreshCw />
// // // // // // // // // //                           </button>
// // // // // // // // // //                         </div>
// // // // // // // // // //                       </div>
// // // // // // // // // //                     )}
// // // // // // // // // //                   </motion.div>
// // // // // // // // // //                 ))}
// // // // // // // // // //                 {loading && <div className="loader rgb-loader"></div>}
// // // // // // // // // //                 <div ref={messagesEndRef} />
// // // // // // // // // //               </motion.div>
// // // // // // // // // //             )}
// // // // // // // // // //           </AnimatePresence>
// // // // // // // // // //         </div>
// // // // // // // // // //       </div>
      
// // // // // // // // // //       <div className="fixed bottom-0 left-0 right-0 p-4 bg-transparent">
// // // // // // // // // //         <div className="mx-auto w-full max-w-4xl">
// // // // // // // // // //           <div className={`flex items-center w-full rounded-lg overflow-hidden border ${theme === "dark" ? "border-gray-700" : "border-gray-300"} rgb-bottom-shadow`}>
// // // // // // // // // //             <textarea 
// // // // // // // // // //               ref={textareaRef}
// // // // // // // // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-gray-200" : "text-gray-800"} placeholder-gray-500`}
// // // // // // // // // //               rows={2}
// // // // // // // // // //               value={text} 
// // // // // // // // // //               onChange={handleTextAreaChange}
// // // // // // // // // //               onKeyDown={handleKeyDown}
// // // // // // // // // //               placeholder="Type your message here..." 
// // // // // // // // // //             />
// // // // // // // // // //             <button 
// // // // // // // // // //               className={`p-3 bg-indigo-500 text-white hover:bg-indigo-600 focus:outline-none flex items-center justify-center transition-colors duration-200 ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}
// // // // // // // // // //               onClick={sendMessage}
// // // // // // // // // //               disabled={loading || text.trim().length < 3}
// // // // // // // // // //             >
// // // // // // // // // //               <FiArrowRight className="w-6 h-6" />
// // // // // // // // // //             </button>
// // // // // // // // // //           </div>
// // // // // // // // // //         </div>
// // // // // // // // // //       </div>
// // // // // // // // // //       <ToastContainer />
// // // // // // // // // //     </div>
// // // // // // // // // //   );
// // // // // // // // // // }

// // // // // // // // // "use client";

// // // // // // // // // import axios from "axios";
// // // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // // import { FiMoon, FiSun, FiArrowRight, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // // import { motion, AnimatePresence } from "framer-motion";

// // // // // // // // // function countWords(str: string) {
// // // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // // }

// // // // // // // // // interface Message {
// // // // // // // // //   text: string;
// // // // // // // // //   sender: string;
// // // // // // // // //   originalInput?: string;
// // // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // // //   currentVersionIndex?: number;
// // // // // // // // // }

// // // // // // // // // export default function Home() {
// // // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // // //   const toggleTheme = () => {
// // // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // // //   };

// // // // // // // // //   const sendMessage = async () => {
// // // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // // //     if (wordCount > 200) {
// // // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // // //       return;
// // // // // // // // //     }

// // // // // // // // //     setLoading(true);
// // // // // // // // //     setShowChat(true);
// // // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // // //     setText("");

// // // // // // // // //     try {
// // // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // // //         text: text,
// // // // // // // // //         setting: 3,
// // // // // // // // //         output_format: "json"
// // // // // // // // //       });

// // // // // // // // //       setLoading(false);
      
// // // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // // //         sender: "bot",
// // // // // // // // //         originalInput: text,
// // // // // // // // //         versions: humanLikeVersions,
// // // // // // // // //         currentVersionIndex: 0
// // // // // // // // //       }]);
// // // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // // //       scrollToBottom();
// // // // // // // // //     } catch (error: any) {
// // // // // // // // //       setLoading(false);
// // // // // // // // //       if (error.response?.status === 429) {
// // // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // // //         setTimeout(() => {
// // // // // // // // //           window.location.href = '/signup';
// // // // // // // // //         }, 3000);
// // // // // // // // //       } else {
// // // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // // //       }
// // // // // // // // //     }
// // // // // // // // //   };

// // // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // // //         return {
// // // // // // // // //           ...msg,
// // // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // // //           currentVersionIndex: newIndex
// // // // // // // // //         };
// // // // // // // // //       }
// // // // // // // // //       return msg;
// // // // // // // // //     }));
// // // // // // // // //   };

// // // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // // //     }, (err) => {
// // // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // // //     });
// // // // // // // // //   };

// // // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // // //     setText(originalInput);
// // // // // // // // //     textareaRef.current?.focus();
// // // // // // // // //   };

// // // // // // // // //   useEffect(() => {
// // // // // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // // // // //     setTheme(storedTheme);
// // // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // // //   }, []);

// // // // // // // // //   useEffect(() => {
// // // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // // //   }, [theme]);

// // // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // // //     const newText = event.target.value;
// // // // // // // // //     setText(newText);
// // // // // // // // //     setWordCount(countWords(newText));
// // // // // // // // //   };

// // // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // // //       event.preventDefault();
// // // // // // // // //       sendMessage();
// // // // // // // // //     }
// // // // // // // // //   };

// // // // // // // // //   const scrollToBottom = () => {
// // // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // // //   };

// // // // // // // // //   useEffect(() => {
// // // // // // // // //     scrollToBottom();
// // // // // // // // //   }, [messages]);

// // // // // // // // //   return (
// // // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900" : "bg-gray-100"} min-h-screen w-screen font-sans`}>
// // // // // // // // //       <header className="fixed top-0 left-0 right-0 z-50 bg-opacity-90 backdrop-blur-sm">
// // // // // // // // //         <div className="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
// // // // // // // // //           <h1 className={`text-2xl font-bold ${theme === "dark" ? "text-white" : "text-gray-900"}`}>NoaiGPT</h1>
// // // // // // // // //           <button 
// // // // // // // // //             onClick={toggleTheme} 
// // // // // // // // //             className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-gray-200" : "bg-gray-200 text-gray-800"}`}
// // // // // // // // //           >
// // // // // // // // //             {theme === "dark" ? <FiSun size={20} /> : <FiMoon size={20} />}
// // // // // // // // //           </button>
// // // // // // // // //         </div>
// // // // // // // // //       </header>

// // // // // // // // //       <main className="flex-grow mt-16 mb-24 px-4 overflow-hidden">
// // // // // // // // //         <div className="max-w-3xl mx-auto">
// // // // // // // // //           <AnimatePresence>
// // // // // // // // //             {!showChat && (
// // // // // // // // //               <motion.div
// // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // //                 className="text-center py-12"
// // // // // // // // //               >
// // // // // // // // //                 <h2 className={`text-3xl font-bold mb-4 ${theme === "dark" ? "text-white" : "text-gray-900"}`}>Welcome to NoaiGPT</h2>
// // // // // // // // //                 <p className={`text-lg mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// // // // // // // // //                   Experience human-like paraphrasing that bypasses AI detection.
// // // // // // // // //                 </p>
// // // // // // // // //               </motion.div>
// // // // // // // // //             )}
// // // // // // // // //           </AnimatePresence>

// // // // // // // // //           <AnimatePresence>
// // // // // // // // //             {showChat && (
// // // // // // // // //               <motion.div
// // // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // // //                 className="space-y-4"
// // // // // // // // //               >
// // // // // // // // //                 {messages.map((message, index) => (
// // // // // // // // //                   <motion.div 
// // // // // // // // //                     key={index} 
// // // // // // // // //                     initial={{ opacity: 0, y: 20 }} 
// // // // // // // // //                     animate={{ opacity: 1, y: 0 }} 
// // // // // // // // //                     transition={{ duration: 0.3 }} 
// // // // // // // // //                     className={`p-4 rounded-lg ${
// // // // // // // // //                       message.sender === "user" 
// // // // // // // // //                         ? "bg-blue-500 text-white ml-auto" 
// // // // // // // // //                         : `${theme === "dark" ? "bg-gray-800 text-white" : "bg-white text-gray-900"}`
// // // // // // // // //                     } max-w-[80%]`}
// // // // // // // // //                   >
// // // // // // // // //                     {message.text}
// // // // // // // // //                     {message.sender === "bot" && message.versions && (
// // // // // // // // //                       <div className="mt-2 flex justify-between items-center text-sm">
// // // // // // // // //                         <button onClick={() => changeVersion(index, 'prev')} className="text-blue-300">
// // // // // // // // //                           <FiChevronLeft />
// // // // // // // // //                         </button>
// // // // // // // // //                         <span className="text-blue-300">
// // // // // // // // //                           {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // // //                         </span>
// // // // // // // // //                         <button onClick={() => changeVersion(index, 'next')} className="text-blue-300">
// // // // // // // // //                           <FiChevronRight />
// // // // // // // // //                         </button>
// // // // // // // // //                       </div>
// // // // // // // // //                     )}
// // // // // // // // //                     {message.sender === "bot" && (
// // // // // // // // //                       <div className="mt-2 flex justify-end space-x-2">
// // // // // // // // //                         <button onClick={() => copyToClipboard(message.text)} className="text-blue-300 hover:text-blue-400">
// // // // // // // // //                           <FiCopy />
// // // // // // // // //                         </button>
// // // // // // // // //                         <button onClick={() => redoMessage(message.originalInput || '')} className="text-blue-300 hover:text-blue-400">
// // // // // // // // //                           <FiRefreshCw />
// // // // // // // // //                         </button>
// // // // // // // // //                       </div>
// // // // // // // // //                     )}
// // // // // // // // //                   </motion.div>
// // // // // // // // //                 ))}
// // // // // // // // //                 {loading && <div className="loader mx-auto"></div>}
// // // // // // // // //                 <div ref={messagesEndRef} />
// // // // // // // // //               </motion.div>
// // // // // // // // //             )}
// // // // // // // // //           </AnimatePresence>
// // // // // // // // //         </div>
// // // // // // // // //       </main>
      
// // // // // // // // //       <footer className="fixed bottom-0 left-0 right-0 p-4 bg-opacity-90 backdrop-blur-sm">
// // // // // // // // //         <div className="max-w-3xl mx-auto">
// // // // // // // // //           <div className={`flex items-center rounded-lg overflow-hidden ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-lg`}>
// // // // // // // // //             <textarea 
// // // // // // // // //               ref={textareaRef}
// // // // // // // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-white" : "text-gray-900"} placeholder-gray-500`}
// // // // // // // // //               rows={1}
// // // // // // // // //               value={text} 
// // // // // // // // //               onChange={handleTextAreaChange}
// // // // // // // // //               onKeyDown={handleKeyDown}
// // // // // // // // //               placeholder="Type your message here..." 
// // // // // // // // //             />
// // // // // // // // //             <button 
// // // // // // // // //               className={`p-3 bg-blue-500 text-white hover:bg-blue-600 focus:outline-none transition-colors duration-200 ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}
// // // // // // // // //               onClick={sendMessage}
// // // // // // // // //               disabled={loading || text.trim().length < 3}
// // // // // // // // //             >
// // // // // // // // //               <FiArrowRight className="w-6 h-6" />
// // // // // // // // //             </button>
// // // // // // // // //           </div>
// // // // // // // // //         </div>
// // // // // // // // //       </footer>
// // // // // // // // //       <ToastContainer />
// // // // // // // // //     </div>
// // // // // // // // //   );
// // // // // // // // // }

// // // // // // // // "use client";

// // // // // // // // import axios from "axios";
// // // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // // import { FiMoon, FiSun, FiArrowRight, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // // import { motion, AnimatePresence } from "framer-motion";

// // // // // // // // function countWords(str: string) {
// // // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // // }

// // // // // // // // interface Message {
// // // // // // // //   text: string;
// // // // // // // //   sender: string;
// // // // // // // //   originalInput?: string;
// // // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // // //   currentVersionIndex?: number;
// // // // // // // // }

// // // // // // // // export default function Home() {
// // // // // // // //   const [text, setText] = useState<string>("");
// // // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // // //   const toggleTheme = () => {
// // // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // // //   };

// // // // // // // //   const sendMessage = async () => {
// // // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // // //     if (wordCount > 200) {
// // // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // // //       return;
// // // // // // // //     }

// // // // // // // //     setLoading(true);
// // // // // // // //     setShowChat(true);
// // // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // // //     setMessages([...messages, userMessage]);
// // // // // // // //     setText("");

// // // // // // // //     try {
// // // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // // //         text: text,
// // // // // // // //         setting: 3,
// // // // // // // //         output_format: "json"
// // // // // // // //       });

// // // // // // // //       setLoading(false);
      
// // // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // // //       setMessages(prev => [...prev, { 
// // // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // // //         sender: "bot",
// // // // // // // //         originalInput: text,
// // // // // // // //         versions: humanLikeVersions,
// // // // // // // //         currentVersionIndex: 0
// // // // // // // //       }]);
// // // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // // //       scrollToBottom();
// // // // // // // //     } catch (error: any) {
// // // // // // // //       setLoading(false);
// // // // // // // //       if (error.response?.status === 429) {
// // // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // // //         setTimeout(() => {
// // // // // // // //           window.location.href = '/signup';
// // // // // // // //         }, 3000);
// // // // // // // //       } else {
// // // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // // //       }
// // // // // // // //     }
// // // // // // // //   };

// // // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // // //         let newIndex = direction === 'next' 
// // // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // // //         return {
// // // // // // // //           ...msg,
// // // // // // // //           text: msg.versions[newIndex].text,
// // // // // // // //           currentVersionIndex: newIndex
// // // // // // // //         };
// // // // // // // //       }
// // // // // // // //       return msg;
// // // // // // // //     }));
// // // // // // // //   };

// // // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // // //       toast.success("Copied to clipboard!");
// // // // // // // //     }, (err) => {
// // // // // // // //       console.error('Could not copy text: ', err);
// // // // // // // //       toast.error("Failed to copy text.");
// // // // // // // //     });
// // // // // // // //   };

// // // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // // //     setText(originalInput);
// // // // // // // //     textareaRef.current?.focus();
// // // // // // // //   };

// // // // // // // //   useEffect(() => {
// // // // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // // // //     setTheme(storedTheme);
// // // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // // //   }, []);

// // // // // // // //   useEffect(() => {
// // // // // // // //     localStorage.setItem("theme", theme);
// // // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // // //   }, [theme]);

// // // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // // //     const newText = event.target.value;
// // // // // // // //     setText(newText);
// // // // // // // //     setWordCount(countWords(newText));
// // // // // // // //   };

// // // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // // //       event.preventDefault();
// // // // // // // //       sendMessage();
// // // // // // // //     }
// // // // // // // //   };

// // // // // // // //   const scrollToBottom = () => {
// // // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // // //   };

// // // // // // // //   useEffect(() => {
// // // // // // // //     scrollToBottom();
// // // // // // // //   }, [messages]);

// // // // // // // //   return (
// // // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900" : "bg-gray-100"} min-h-screen w-screen font-sans`}>
// // // // // // // //       <header className="fixed top-0 left-0 right-0 z-50 bg-opacity-90 backdrop-blur-sm">
// // // // // // // //         <div className="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
// // // // // // // //           <h1 className={`text-2xl font-bold ${theme === "dark" ? "text-white" : "text-gray-900"}`}>NoaiGPT</h1>
// // // // // // // //           <button 
// // // // // // // //             onClick={toggleTheme} 
// // // // // // // //             className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-gray-200" : "bg-gray-200 text-gray-800"}`}
// // // // // // // //           >
// // // // // // // //             {theme === "dark" ? <FiSun size={20} /> : <FiMoon size={20} />}
// // // // // // // //           </button>
// // // // // // // //         </div>
// // // // // // // //       </header>

// // // // // // // //       <main className="flex-grow mt-16 mb-24 px-4 overflow-hidden">
// // // // // // // //         <div className="max-w-3xl mx-auto">
// // // // // // // //           <AnimatePresence>
// // // // // // // //             {!showChat && (
// // // // // // // //               <motion.div
// // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // //                 className="text-center py-12"
// // // // // // // //               >
// // // // // // // //                 <h2 className={`text-3xl font-bold mb-4 ${theme === "dark" ? "text-white" : "text-gray-900"}`}>Welcome to NoaiGPT</h2>
// // // // // // // //                 <p className={`text-lg mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// // // // // // // //                   Experience human-like paraphrasing that bypasses AI detection.
// // // // // // // //                 </p>
// // // // // // // //               </motion.div>
// // // // // // // //             )}
// // // // // // // //           </AnimatePresence>

// // // // // // // //           <AnimatePresence>
// // // // // // // //             {showChat && (
// // // // // // // //               <motion.div
// // // // // // // //                 initial={{ opacity: 0 }}
// // // // // // // //                 animate={{ opacity: 1 }}
// // // // // // // //                 exit={{ opacity: 0 }}
// // // // // // // //                 className="space-y-4"
// // // // // // // //               >
// // // // // // // //                 {messages.map((message, index) => (
// // // // // // // //                   <motion.div 
// // // // // // // //                     key={index} 
// // // // // // // //                     initial={{ opacity: 0, y: 20 }} 
// // // // // // // //                     animate={{ opacity: 1, y: 0 }} 
// // // // // // // //                     transition={{ duration: 0.3 }} 
// // // // // // // //                     className={`p-4 rounded-lg ${
// // // // // // // //                       message.sender === "user" 
// // // // // // // //                         ? "bg-blue-500 text-white ml-auto" 
// // // // // // // //                         : `${theme === "dark" ? "bg-gray-800 text-white" : "bg-white text-gray-900"}`
// // // // // // // //                     } max-w-[80%]`}
// // // // // // // //                   >
// // // // // // // //                     {message.text}
// // // // // // // //                     {message.sender === "bot" && message.versions && (
// // // // // // // //                       <div className="mt-2 flex justify-between items-center text-sm">
// // // // // // // //                         <button onClick={() => changeVersion(index, 'prev')} className="text-blue-300">
// // // // // // // //                           <FiChevronLeft />
// // // // // // // //                         </button>
// // // // // // // //                         <span className="text-blue-300">
// // // // // // // //                           {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // // //                         </span>
// // // // // // // //                         <button onClick={() => changeVersion(index, 'next')} className="text-blue-300">
// // // // // // // //                           <FiChevronRight />
// // // // // // // //                         </button>
// // // // // // // //                       </div>
// // // // // // // //                     )}
// // // // // // // //                     {message.sender === "bot" && (
// // // // // // // //                       <div className="mt-2 flex justify-end space-x-2">
// // // // // // // //                         <button onClick={() => copyToClipboard(message.text)} className="text-blue-300 hover:text-blue-400">
// // // // // // // //                           <FiCopy />
// // // // // // // //                         </button>
// // // // // // // //                         <button onClick={() => redoMessage(message.originalInput || '')} className="text-blue-300 hover:text-blue-400">
// // // // // // // //                           <FiRefreshCw />
// // // // // // // //                         </button>
// // // // // // // //                       </div>
// // // // // // // //                     )}
// // // // // // // //                   </motion.div>
// // // // // // // //                 ))}
// // // // // // // //                 {loading && <div className="loader mx-auto"></div>}
// // // // // // // //                 <div ref={messagesEndRef} />
// // // // // // // //               </motion.div>
// // // // // // // //             )}
// // // // // // // //           </AnimatePresence>
// // // // // // // //         </div>
// // // // // // // //       </main>
      
// // // // // // // //       <footer className="fixed bottom-0 left-0 right-0 p-4 bg-opacity-90 backdrop-blur-sm">
// // // // // // // //         <div className="max-w-3xl mx-auto">
// // // // // // // //           <div className={`flex items-center rounded-lg overflow-hidden ${theme === "dark" ? "bg-gray-800" : "bg-white"} rgb-shadow`}>
// // // // // // // //             <textarea 
// // // // // // // //               ref={textareaRef}
// // // // // // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-white" : "text-gray-900"} placeholder-gray-500`}
// // // // // // // //               rows={1}
// // // // // // // //               value={text} 
// // // // // // // //               onChange={handleTextAreaChange}
// // // // // // // //               onKeyDown={handleKeyDown}
// // // // // // // //               placeholder="Type your message here..." 
// // // // // // // //             />
// // // // // // // //             <button 
// // // // // // // //               className={`p-3 text-blue-500 hover:text-blue-600 focus:outline-none transition-colors duration-200 ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}
// // // // // // // //               onClick={sendMessage}
// // // // // // // //               disabled={loading || text.trim().length < 3}
// // // // // // // //             >
// // // // // // // //               <FiArrowRight className="w-6 h-6" />
// // // // // // // //             </button>
// // // // // // // //           </div>
// // // // // // // //         </div>
// // // // // // // //       </footer>
// // // // // // // //       <ToastContainer />
// // // // // // // //     </div>
// // // // // // // //   );
// // // // // // // // }

// // // // // // // "use client";

// // // // // // // import axios from "axios";
// // // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // // import { serverURL } from "@/utils/utils";
// // // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // // import { FiMoon, FiSun, FiArrowRight, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // // import { motion, AnimatePresence } from "framer-motion";
// // // // // // // import { trefoil } from 'ldrs';

// // // // // // // trefoil.register();

// // // // // // // function countWords(str: string) {
// // // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // // }

// // // // // // // interface Message {
// // // // // // //   text: string;
// // // // // // //   sender: string;
// // // // // // //   originalInput?: string;
// // // // // // //   versions?: { text: string; confidence: number }[];
// // // // // // //   currentVersionIndex?: number;
// // // // // // // }

// // // // // // // export default function Home() {
// // // // // // //   const [text, setText] = useState<string>("");
// // // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // // //   const toggleTheme = () => {
// // // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // // //   };

// // // // // // //   const sendMessage = async () => {
// // // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // // //     if (wordCount > 200) {
// // // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // // //       return;
// // // // // // //     }

// // // // // // //     setLoading(true);
// // // // // // //     setShowChat(true);
// // // // // // //     const userMessage = { text, sender: "user" };
// // // // // // //     setMessages([...messages, userMessage]);
// // // // // // //     setText("");

// // // // // // //     try {
// // // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // // //         text: text,
// // // // // // //         setting: 3,
// // // // // // //         output_format: "json"
// // // // // // //       });

// // // // // // //       setLoading(false);
      
// // // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // // //       setMessages(prev => [...prev, { 
// // // // // // //         text: humanLikeVersions[0].text, 
// // // // // // //         sender: "bot",
// // // // // // //         originalInput: text,
// // // // // // //         versions: humanLikeVersions,
// // // // // // //         currentVersionIndex: 0
// // // // // // //       }]);
// // // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // // //       scrollToBottom();
// // // // // // //     } catch (error: any) {
// // // // // // //       setLoading(false);
// // // // // // //       if (error.response?.status === 429) {
// // // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // // //         setTimeout(() => {
// // // // // // //           window.location.href = '/signup';
// // // // // // //         }, 3000);
// // // // // // //       } else {
// // // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // // //       }
// // // // // // //     }
// // // // // // //   };

// // // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // // //     setMessages(prev => prev.map((msg, idx) => {
// // // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // // //         let newIndex = direction === 'next' 
// // // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // // //         return {
// // // // // // //           ...msg,
// // // // // // //           text: msg.versions[newIndex].text,
// // // // // // //           currentVersionIndex: newIndex
// // // // // // //         };
// // // // // // //       }
// // // // // // //       return msg;
// // // // // // //     }));
// // // // // // //   };

// // // // // // //   const copyToClipboard = (text: string) => {
// // // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // // //       toast.success("Copied to clipboard!");
// // // // // // //     }, (err) => {
// // // // // // //       console.error('Could not copy text: ', err);
// // // // // // //       toast.error("Failed to copy text.");
// // // // // // //     });
// // // // // // //   };

// // // // // // //   const redoMessage = (originalInput: string) => {
// // // // // // //     setText(originalInput);
// // // // // // //     textareaRef.current?.focus();
// // // // // // //   };

// // // // // // //   useEffect(() => {
// // // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // // //     setTheme(storedTheme);
// // // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);
// // // // // // //   }, []);

// // // // // // //   useEffect(() => {
// // // // // // //     localStorage.setItem("theme", theme);
// // // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // // //   }, [theme]);

// // // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // // //     const newText = event.target.value;
// // // // // // //     setText(newText);
// // // // // // //     setWordCount(countWords(newText));
// // // // // // //   };

// // // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // // //       event.preventDefault();
// // // // // // //       sendMessage();
// // // // // // //     }
// // // // // // //   };

// // // // // // //   const scrollToBottom = () => {
// // // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // // //   };

// // // // // // //   useEffect(() => {
// // // // // // //     scrollToBottom();
// // // // // // //   }, [messages]);

// // // // // // //   return (
// // // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900" : "bg-gray-100"} min-h-screen w-screen font-sans`}>
// // // // // // //       <header className="fixed top-0 left-0 right-0 z-50 bg-opacity-90 backdrop-blur-sm">
// // // // // // //         <div className="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
// // // // // // //           <h1 className={`text-2xl font-bold ${theme === "dark" ? "text-white" : "text-gray-900"}`}>NoaiGPT</h1>
// // // // // // //           <button 
// // // // // // //             onClick={toggleTheme} 
// // // // // // //             className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-gray-200" : "bg-gray-200 text-gray-800"}`}
// // // // // // //           >
// // // // // // //             {theme === "dark" ? <FiSun size={20} /> : <FiMoon size={20} />}
// // // // // // //           </button>
// // // // // // //         </div>
// // // // // // //       </header>

// // // // // // //       <main className="flex-grow mt-16 mb-24 px-4 overflow-hidden">
// // // // // // //         <div className="max-w-3xl mx-auto">
// // // // // // //           <AnimatePresence>
// // // // // // //             {!showChat && (
// // // // // // //               <motion.div
// // // // // // //                 initial={{ opacity: 0 }}
// // // // // // //                 animate={{ opacity: 1 }}
// // // // // // //                 exit={{ opacity: 0 }}
// // // // // // //                 className="text-center py-12"
// // // // // // //               >
// // // // // // //                 <h2 className={`text-3xl font-bold mb-4 ${theme === "dark" ? "text-white" : "text-gray-900"}`}>Welcome to NoaiGPT</h2>
// // // // // // //                 <p className={`text-lg mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// // // // // // //                   Experience human-like paraphrasing that bypasses AI detection.
// // // // // // //                 </p>
// // // // // // //               </motion.div>
// // // // // // //             )}
// // // // // // //           </AnimatePresence>

// // // // // // //           <AnimatePresence>
// // // // // // //             {showChat && (
// // // // // // //               <motion.div
// // // // // // //                 initial={{ opacity: 0 }}
// // // // // // //                 animate={{ opacity: 1 }}
// // // // // // //                 exit={{ opacity: 0 }}
// // // // // // //                 className="space-y-4"
// // // // // // //               >
// // // // // // //                 {messages.map((message, index) => (
// // // // // // //                   <motion.div 
// // // // // // //                     key={index} 
// // // // // // //                     initial={{ opacity: 0, y: 20 }} 
// // // // // // //                     animate={{ opacity: 1, y: 0 }} 
// // // // // // //                     transition={{ duration: 0.3 }} 
// // // // // // //                     className={`p-4 rounded-lg ${
// // // // // // //                       message.sender === "user" 
// // // // // // //                         ? "bg-blue-500 text-white ml-auto" 
// // // // // // //                         : `${theme === "dark" ? "bg-gray-800 text-white" : "bg-white text-gray-900"}`
// // // // // // //                     } max-w-[80%]`}
// // // // // // //                   >
// // // // // // //                     {message.text}
// // // // // // //                     {message.sender === "bot" && message.versions && (
// // // // // // //                       <div className="mt-2 flex justify-between items-center text-sm">
// // // // // // //                         <button onClick={() => changeVersion(index, 'prev')} className="text-blue-300">
// // // // // // //                           <FiChevronLeft />
// // // // // // //                         </button>
// // // // // // //                         <span className="text-blue-300">
// // // // // // //                           {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // // //                         </span>
// // // // // // //                         <button onClick={() => changeVersion(index, 'next')} className="text-blue-300">
// // // // // // //                           <FiChevronRight />
// // // // // // //                         </button>
// // // // // // //                       </div>
// // // // // // //                     )}
// // // // // // //                     {message.sender === "bot" && (
// // // // // // //                       <div className="mt-2 flex justify-end space-x-2">
// // // // // // //                         <button onClick={() => copyToClipboard(message.text)} className="text-blue-300 hover:text-blue-400">
// // // // // // //                           <FiCopy />
// // // // // // //                         </button>
// // // // // // //                         <button onClick={() => redoMessage(message.originalInput || '')} className="text-blue-300 hover:text-blue-400">
// // // // // // //                           <FiRefreshCw />
// // // // // // //                         </button>
// // // // // // //                       </div>
// // // // // // //                     )}
// // // // // // //                   </motion.div>
// // // // // // //                 ))}
// // // // // // //                 {loading && (
// // // // // // //                   <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} max-w-[80%]`}>
// // // // // // //                     <Skeleton count={3} />
// // // // // // //                   </div>
// // // // // // //                 )}
// // // // // // //                 <div ref={messagesEndRef} />
// // // // // // //               </motion.div>
// // // // // // //             )}
// // // // // // //           </AnimatePresence>
// // // // // // //         </div>
// // // // // // //       </main>
      
// // // // // // //       <footer className="fixed bottom-0 left-0 right-0 p-4 bg-opacity-90 backdrop-blur-sm">
// // // // // // //         <div className="max-w-3xl mx-auto">
// // // // // // //           <div className={`flex items-center rounded-lg overflow-hidden ${theme === "dark" ? "bg-gray-800" : "bg-white"} rgb-shadow`}>
// // // // // // //             <textarea 
// // // // // // //               ref={textareaRef}
// // // // // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-white" : "text-gray-900"} placeholder-gray-500`}
// // // // // // //               rows={1}
// // // // // // //               value={text} 
// // // // // // //               onChange={handleTextAreaChange}
// // // // // // //               onKeyDown={handleKeyDown}
// // // // // // //               placeholder="Type your message here..." 
// // // // // // //             />
// // // // // // //             <button 
// // // // // // //               className={`p-3 text-blue-500 hover:text-blue-600 focus:outline-none transition-colors duration-200 ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}
// // // // // // //               onClick={sendMessage}
// // // // // // //               disabled={loading || text.trim().length < 3}
// // // // // // //             >
// // // // // // //               {loading ? (
// // // // // // //                 <l-trefoil
// // // // // // //                   size="24"
// // // // // // //                   stroke="3"
// // // // // // //                   stroke-length="0.15"
// // // // // // //                   bg-opacity="0.1"
// // // // // // //                   speed="1.4"
// // // // // // //                   color="currentColor"
// // // // // // //                 ></l-trefoil>
// // // // // // //               ) : (
// // // // // // //                 <FiArrowRight className="w-6 h-6" />
// // // // // // //               )}
// // // // // // //             </button>
// // // // // // //           </div>
// // // // // // //         </div>
// // // // // // //       </footer>
// // // // // // //       <ToastContainer />
// // // // // // //     </div>
// // // // // // //   );
// // // // // // // }

// // // // // // "use client";

// // // // // // import axios from "axios";
// // // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // // import { serverURL } from "@/utils/utils";
// // // // // // import { useState, useEffect, useRef } from "react";
// // // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // // import { FiMoon, FiSun, FiArrowRight, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // // import Skeleton from "react-loading-skeleton";
// // // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // // import { motion } from "framer-motion";

// // // // // // function countWords(str: string) {
// // // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // // }

// // // // // // interface Message {
// // // // // //   text: string;
// // // // // //   sender: string;
// // // // // //   originalInput?: string;
// // // // // //   versions?: { text: string; confidence: number }[];
// // // // // //   currentVersionIndex?: number;
// // // // // // }

// // // // // // export default function Home() {
// // // // // //   const [text, setText] = useState<string>("");
// // // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // // //   const [showHumanCard, setShowHumanCard] = useState<boolean>(false);
// // // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // // //   const toggleTheme = () => {
// // // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // // //   };

// // // // // //   const sendMessage = async () => {
// // // // // //     if (text.trim().length < 3 || loading) return;
// // // // // //     if (wordCount > 200) {
// // // // // //       toast.error("Text exceeds 200 words limit.");
// // // // // //       return;
// // // // // //     }

// // // // // //     setLoading(true);
// // // // // //     setShowChat(true);
// // // // // //     const userMessage = { text, sender: "user" };
// // // // // //     setMessages(prevMessages => [...prevMessages, userMessage]);
// // // // // //     setText("");

// // // // // //     try {
// // // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // // //         text: text,
// // // // // //         setting: 3,
// // // // // //         output_format: "json"
// // // // // //       });

// // // // // //       setLoading(false);
      
// // // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // // //       setMessages(prevMessages => [...prevMessages, { 
// // // // // //         text: humanLikeVersions[0].text, 
// // // // // //         sender: "bot",
// // // // // //         originalInput: text,
// // // // // //         versions: humanLikeVersions,
// // // // // //         currentVersionIndex: 0
// // // // // //       }]);
// // // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // // //       scrollToBottom();
// // // // // //     } catch (error: any) {
// // // // // //       setLoading(false);
// // // // // //       if (error.response?.status === 429) {
// // // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // // //         setTimeout(() => {
// // // // // //           window.location.href = '/signup';
// // // // // //         }, 3000);
// // // // // //       } else {
// // // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // // //       }
// // // // // //     }
// // // // // //   };

// // // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // // //     setMessages(prevMessages => prevMessages.map((msg, idx) => {
// // // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // // //         let newIndex = direction === 'next' 
// // // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // // //         return {
// // // // // //           ...msg,
// // // // // //           text: msg.versions[newIndex].text,
// // // // // //           currentVersionIndex: newIndex
// // // // // //         };
// // // // // //       }
// // // // // //       return msg;
// // // // // //     }));
// // // // // //   };

// // // // // //   const copyToClipboard = (text: string) => {
// // // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // // //       toast.success("Copied to clipboard!");
// // // // // //     }, (err) => {
// // // // // //       console.error('Could not copy text: ', err);
// // // // // //       toast.error("Failed to copy text.");
// // // // // //     });
// // // // // //   };

// // // // // //   const redoMessage = (originalInput: string) => {
// // // // // //     setText(originalInput);
// // // // // //     textareaRef.current?.focus();
// // // // // //   };

// // // // // //   useEffect(() => {
// // // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // // //     setTheme(storedTheme);
// // // // // //     document.documentElement.setAttribute("data-theme", storedTheme);

// // // // // //     const timer = setTimeout(() => {
// // // // // //       setShowHumanCard(true);
// // // // // //     }, 2000);

// // // // // //     return () => clearTimeout(timer);
// // // // // //   }, []);

// // // // // //   useEffect(() => {
// // // // // //     localStorage.setItem("theme", theme);
// // // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // // //   }, [theme]);

// // // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // // //     const newText = event.target.value;
// // // // // //     setText(newText);
// // // // // //     setWordCount(countWords(newText));
// // // // // //   };

// // // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // // //       event.preventDefault();
// // // // // //       sendMessage();
// // // // // //     }
// // // // // //   };

// // // // // //   const scrollToBottom = () => {
// // // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // // //   };

// // // // // //   useEffect(() => {
// // // // // //     scrollToBottom();
// // // // // //   }, [messages]);

// // // // // //   return (
// // // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900" : "bg-gray-100"} min-h-screen w-screen font-sans`}>
// // // // // //       <header className="fixed top-0 left-0 right-0 z-50 bg-opacity-90 backdrop-blur-sm">
// // // // // //         <div className="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
// // // // // //           <h1 className={`text-2xl font-bold ${theme === "dark" ? "text-white" : "text-gray-900"}`}>NoaiGPT</h1>
// // // // // //           <button 
// // // // // //             onClick={toggleTheme} 
// // // // // //             className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-gray-200" : "bg-gray-200 text-gray-800"}`}
// // // // // //           >
// // // // // //             {theme === "dark" ? <FiSun size={20} /> : <FiMoon size={20} />}
// // // // // //           </button>
// // // // // //         </div>
// // // // // //       </header>

// // // // // //       <main className="flex-grow mt-16 mb-24 px-4 overflow-hidden">
// // // // // //         <div className="max-w-6xl mx-auto">
// // // // // //           {!showChat && (
// // // // // //             <div className="text-center py-12">
// // // // // //               <h2 className={`text-3xl font-bold mb-4 ${theme === "dark" ? "text-white" : "text-gray-900"}`}>Welcome to NoaiGPT</h2>
// // // // // //               <p className={`text-lg mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// // // // // //                 Experience human-like paraphrasing that bypasses AI detection.
// // // // // //               </p>

// // // // // //               <div className="flex justify-center space-x-8 relative">
// // // // // //                 <motion.div
// // // // // //                   className={`w-1/2 p-6 rounded-lg shadow-xl ${theme === "dark" ? "bg-gray-800 text-white" : "bg-white text-gray-900"} border-2 ${theme === "dark" ? "border-blue-500" : "border-blue-300"}`}
// // // // // //                   initial={{ opacity: 1, scale: 1 }}
// // // // // //                   animate={{ opacity: showHumanCard ? 0.8 : 1, scale: showHumanCard ? 0.95 : 1 }}
// // // // // //                   transition={{ duration: 0.5 }}
// // // // // //                 >
// // // // // //                   <h3 className="text-xl font-bold mb-2 text-blue-500">AI Generated Text</h3>
// // // // // //                   <p className="text-sm leading-relaxed">
// // // // // //                     Software engineering is the systematic development and maintenance of software applications using engineering principles. It includes requirements analysis, design, coding, testing, and documentation. Key methodologies like Agile and DevOps ensure efficient project management and delivery. Collaboration and quality assurance are essential for creating reliable, scalable, and user-friendly software.
// // // // // //                   </p>
// // // // // //                 </motion.div>

// // // // // //                 <motion.div
// // // // // //                   className={`w-1/2 p-6 rounded-lg shadow-xl ${theme === "dark" ? "bg-gray-800 text-white" : "bg-white text-gray-900"} border-2 ${theme === "dark" ? "border-green-500" : "border-green-300"} absolute left-1/2`}
// // // // // //                   initial={{ opacity: 0, x: -50, scale: 0.9 }}
// // // // // //                   animate={{ opacity: showHumanCard ? 1 : 0, x: showHumanCard ? 0 : -50, scale: showHumanCard ? 1 : 0.9 }}
// // // // // //                   transition={{ duration: 0.5, ease: "easeOut" }}
// // // // // //                 >
// // // // // //                   <h3 className="text-xl font-bold mb-2 text-green-500">Human Rewritten Text</h3>
// // // // // //                   <p className="text-sm leading-relaxed">
// // // // // //                     Software engineering is the art and science of crafting digital solutions. Its a journey from concept to reality, involving careful planning, creative design, and meticulous execution. This field thrives on innovation, with methodologies like Agile and DevOps revolutionizing how we build and deploy software. At its heart, its about people working together to solve complex problems, ensuring that the end product is not just functional, but delightful to use.
// // // // // //                   </p>
// // // // // //                 </motion.div>
// // // // // //               </div>
// // // // // //             </div>
// // // // // //           )}

// // // // // //           {showChat && (
// // // // // //             <div className="space-y-4">
// // // // // //               {messages.map((message, index) => (
// // // // // //                 <div 
// // // // // //                   key={index}
// // // // // //                   className={`p-4 rounded-lg ${
// // // // // //                     message.sender === "user" 
// // // // // //                       ? "bg-blue-500 text-white ml-auto" 
// // // // // //                       : `${theme === "dark" ? "bg-gray-800 text-white" : "bg-white text-gray-900"}`
// // // // // //                   } max-w-[80%]`}
// // // // // //                 >
// // // // // //                   {message.text}
// // // // // //                   {message.sender === "bot" && message.versions && (
// // // // // //                     <div className="mt-2 flex justify-between items-center text-sm">
// // // // // //                       <button onClick={() => changeVersion(index, 'prev')} className="text-blue-300">
// // // // // //                         <FiChevronLeft />
// // // // // //                       </button>
// // // // // //                       <span className="text-blue-300">
// // // // // //                         {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // // //                       </span>
// // // // // //                       <button onClick={() => changeVersion(index, 'next')} className="text-blue-300">
// // // // // //                         <FiChevronRight />
// // // // // //                       </button>
// // // // // //                     </div>
// // // // // //                   )}
// // // // // //                   {message.sender === "bot" && (
// // // // // //                     <div className="mt-2 flex justify-end space-x-2">
// // // // // //                       <button onClick={() => copyToClipboard(message.text)} className="text-blue-300 hover:text-blue-400">
// // // // // //                         <FiCopy />
// // // // // //                       </button>
// // // // // //                       <button onClick={() => redoMessage(message.originalInput || '')} className="text-blue-300 hover:text-blue-400">
// // // // // //                         <FiRefreshCw />
// // // // // //                       </button>
// // // // // //                     </div>
// // // // // //                   )}
// // // // // //                 </div>
// // // // // //               ))}
// // // // // //               {loading && (
// // // // // //                 <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} max-w-[80%]`}>
// // // // // //                   <Skeleton count={3} />
// // // // // //                 </div>
// // // // // //               )}
// // // // // //               <div ref={messagesEndRef} />
// // // // // //             </div>
// // // // // //           )}
// // // // // //         </div>
// // // // // //       </main>
      
// // // // // //       <footer className="fixed bottom-0 left-0 right-0 p-4 bg-opacity-90 backdrop-blur-sm">
// // // // // //         <div className="max-w-3xl mx-auto">
// // // // // //           <div className={`flex items-center rounded-lg overflow-hidden ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-lg`}>
// // // // // //             <textarea 
// // // // // //               ref={textareaRef}
// // // // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-white" : "text-gray-900"} placeholder-gray-500`}
// // // // // //               rows={1}
// // // // // //               value={text} 
// // // // // //               onChange={handleTextAreaChange}
// // // // // //               onKeyDown={handleKeyDown}
// // // // // //               placeholder="Type your message here..." 
// // // // // //             />
// // // // // //             <button 
// // // // // //               className={`p-3 text-blue-500 hover:text-blue-600 focus:outline-none transition-colors duration-200 ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}
// // // // // //               onClick={sendMessage}
// // // // // //               disabled={loading || text.trim().length < 3}
// // // // // //             >
// // // // // //               {loading ? (
// // // // // //                 <div className="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
// // // // // //               ) : (
// // // // // //                 <FiArrowRight className="w-6 h-6" />
// // // // // //               )}
// // // // // //             </button>
// // // // // //           </div>
// // // // // //         </div>
// // // // // //       </footer>
// // // // // //       <ToastContainer />
// // // // // //     </div>
// // // // // //   );
// // // // // // }

// // // // // "use client";

// // // // // import axios from "axios";
// // // // // import "react-toastify/dist/ReactToastify.css";
// // // // // import { serverURL } from "@/utils/utils";
// // // // // import { useState, useEffect, useRef } from "react";
// // // // // import { ToastContainer, toast } from "react-toastify";
// // // // // import { FiMoon, FiSun, FiArrowRight, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // // import Skeleton from "react-loading-skeleton";
// // // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // // import { motion } from "framer-motion";

// // // // // function countWords(str: string) {
// // // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // // }

// // // // // interface Message {
// // // // //   text: string;
// // // // //   sender: string;
// // // // //   originalInput?: string;
// // // // //   versions?: { text: string; confidence: number }[];
// // // // //   currentVersionIndex?: number;
// // // // // }

// // // // // export default function Home() {
// // // // //   const [text, setText] = useState<string>("");
// // // // //   const [loading, setLoading] = useState<boolean>(false);
// // // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // // //   const [theme, setTheme] = useState<string>("dark");
// // // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // // //   const [showHumanCard, setShowHumanCard] = useState<boolean>(false);
// // // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // // //   const toggleTheme = () => {
// // // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // // //   };

// // // // //   const sendMessage = async () => {
// // // // //     if (text.trim().length < 3 || loading) return;
// // // // //     if (wordCount > 200) {
// // // // //       toast.error("Text exceeds 200 words limit.");
// // // // //       return;
// // // // //     }

// // // // //     setLoading(true);
// // // // //     setShowChat(true);
// // // // //     const userMessage = { text, sender: "user" };
// // // // //     setMessages(prevMessages => [...prevMessages, userMessage]);
// // // // //     setText("");

// // // // //     try {
// // // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // // //         text: text,
// // // // //         setting: 3,
// // // // //         output_format: "json"
// // // // //       });

// // // // //       setLoading(false);
      
// // // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // // //       setMessages(prevMessages => [...prevMessages, { 
// // // // //         text: humanLikeVersions[0].text, 
// // // // //         sender: "bot",
// // // // //         originalInput: text,
// // // // //         versions: humanLikeVersions,
// // // // //         currentVersionIndex: 0
// // // // //       }]);
// // // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // // //       scrollToBottom();
// // // // //     } catch (error: any) {
// // // // //       setLoading(false);
// // // // //       if (error.response?.status === 429) {
// // // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // // //         setTimeout(() => {
// // // // //           window.location.href = '/signup';
// // // // //         }, 3000);
// // // // //       } else {
// // // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // // //       }
// // // // //     }
// // // // //   };

// // // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // // //     setMessages(prevMessages => prevMessages.map((msg, idx) => {
// // // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // // //         let newIndex = direction === 'next' 
// // // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // // //         return {
// // // // //           ...msg,
// // // // //           text: msg.versions[newIndex].text,
// // // // //           currentVersionIndex: newIndex
// // // // //         };
// // // // //       }
// // // // //       return msg;
// // // // //     }));
// // // // //   };

// // // // //   const copyToClipboard = (text: string) => {
// // // // //     navigator.clipboard.writeText(text).then(() => {
// // // // //       toast.success("Copied to clipboard!");
// // // // //     }, (err) => {
// // // // //       console.error('Could not copy text: ', err);
// // // // //       toast.error("Failed to copy text.");
// // // // //     });
// // // // //   };

// // // // //   const redoMessage = (originalInput: string) => {
// // // // //     setText(originalInput);
// // // // //     textareaRef.current?.focus();
// // // // //   };

// // // // //   useEffect(() => {
// // // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // // //     setTheme(storedTheme);
// // // // //     document.documentElement.setAttribute("data-theme", storedTheme);

// // // // //     const timer = setTimeout(() => {
// // // // //       setShowHumanCard(true);
// // // // //     }, 2000);

// // // // //     return () => clearTimeout(timer);
// // // // //   }, []);

// // // // //   useEffect(() => {
// // // // //     localStorage.setItem("theme", theme);
// // // // //     document.documentElement.setAttribute("data-theme", theme);
// // // // //   }, [theme]);

// // // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // // //     const newText = event.target.value;
// // // // //     setText(newText);
// // // // //     setWordCount(countWords(newText));
// // // // //   };

// // // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // // //       event.preventDefault();
// // // // //       sendMessage();
// // // // //     }
// // // // //   };

// // // // //   const scrollToBottom = () => {
// // // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // // //   };

// // // // //   useEffect(() => {
// // // // //     scrollToBottom();
// // // // //   }, [messages]);

// // // // //   return (
// // // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900" : "bg-gray-100"} min-h-screen w-screen font-sans`}>
// // // // //       <header className="fixed top-0 left-0 right-0 z-50 bg-opacity-90 backdrop-blur-sm">
// // // // //         <div className="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
// // // // //           <h1 className={`text-2xl font-bold ${theme === "dark" ? "text-white" : "text-gray-900"}`}>NoaiGPT</h1>
// // // // //           <button 
// // // // //             onClick={toggleTheme} 
// // // // //             className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-gray-200" : "bg-gray-200 text-gray-800"}`}
// // // // //           >
// // // // //             {theme === "dark" ? <FiSun size={20} /> : <FiMoon size={20} />}
// // // // //           </button>
// // // // //         </div>
// // // // //       </header>

// // // // //       <main className="flex-grow mt-16 mb-24 px-4 overflow-hidden">
// // // // //         <div className="max-w-6xl mx-auto">
// // // // //           {!showChat && (
// // // // //             <div className="text-center py-12">
// // // // //               <h2 className={`text-3xl font-bold mb-4 ${theme === "dark" ? "text-white" : "text-gray-900"}`}>Welcome to NoaiGPT</h2>
// // // // //               <p className={`text-lg mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// // // // //                 Experience human-like paraphrasing that bypasses AI detection.
// // // // //               </p>

// // // // //               <div className="flex justify-center space-x-8 relative h-96">
// // // // //                 <motion.div
// // // // //                   className={`w-1/2 p-6 rounded-lg shadow-xl ${theme === "dark" ? "bg-gray-800 text-white" : "bg-white text-gray-900"} border-2 ${theme === "dark" ? "border-blue-500" : "border-blue-300"} absolute left-0 backdrop-blur-sm bg-opacity-80`}
// // // // //                   initial={{ opacity: 0, y: 50, rotateY: -10 }}
// // // // //                   animate={{ opacity: 1, y: 0, rotateY: 0 }}
// // // // //                   transition={{ duration: 1, ease: "easeOut" }}
// // // // //                 >
// // // // //                   <h3 className="text-xl font-bold mb-2 text-blue-500">AI Generated Text</h3>
// // // // //                   <p className="text-sm leading-relaxed">
// // // // //                     Software engineering is the systematic development and maintenance of software applications using engineering principles. It includes requirements analysis, design, coding, testing, and documentation. Key methodologies like Agile and DevOps ensure efficient project management and delivery. Collaboration and quality assurance are essential for creating reliable, scalable, and user-friendly software.
// // // // //                   </p>
// // // // //                 </motion.div>
// // // // //                 <motion.div
// // // // //                   className={`w-1/2 p-6 rounded-lg shadow-xl ${theme === "dark" ? "bg-gray-800 text-white" : "bg-white text-gray-900"} border-2 ${theme === "dark" ? "border-green-500" : "border-green-300"} absolute right-0 backdrop-blur-sm bg-opacity-80`}
// // // // //                   initial={{ opacity: 0, y: 50, rotateY: 10 }}
// // // // //                   animate={{ opacity: showHumanCard ? 1 : 0, y: showHumanCard ? 0 : 50, rotateY: showHumanCard ? 0 : 10 }}
// // // // //                   transition={{ duration: 1, ease: "easeOut", delay: 0.5 }}
// // // // //                 >
// // // // //                   <h3 className="text-xl font-bold mb-2 text-green-500">Human Rewritten Text</h3>
// // // // //                   <p className="text-sm leading-relaxed">
// // // // //                     Software engineering is the art and science of crafting digital solutions. It's a journey from concept to reality, involving careful planning, creative design, and meticulous execution. This field thrives on innovation, with methodologies like Agile and DevOps revolutionizing how we build and deploy software. At its heart, it's about people working together to solve complex problems, ensuring that the end product is not just functional, but delightful to use.
// // // // //                   </p>
// // // // //                 </motion.div>
// // // // //               </div>
// // // // //             </div>
// // // // //           )}

// // // // //           {showChat && (
// // // // //             <div className="space-y-4">
// // // // //               {messages.map((message, index) => (
// // // // //                 <div 
// // // // //                   key={index}
// // // // //                   className={`p-4 rounded-lg ${
// // // // //                     message.sender === "user" 
// // // // //                       ? "bg-blue-500 text-white ml-auto" 
// // // // //                       : `${theme === "dark" ? "bg-gray-800 text-white" : "bg-white text-gray-900"}`
// // // // //                   } max-w-[80%]`}
// // // // //                 >
// // // // //                   {message.text}
// // // // //                   {message.sender === "bot" && message.versions && (
// // // // //                     <div className="mt-2 flex justify-between items-center text-sm">
// // // // //                       <button onClick={() => changeVersion(index, 'prev')} className="text-blue-300">
// // // // //                         <FiChevronLeft />
// // // // //                       </button>
// // // // //                       <span className="text-blue-300">
// // // // //                         {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // // //                       </span>
// // // // //                       <button onClick={() => changeVersion(index, 'next')} className="text-blue-300">
// // // // //                         <FiChevronRight />
// // // // //                       </button>
// // // // //                     </div>
// // // // //                   )}
// // // // //                   {message.sender === "bot" && (
// // // // //                     <div className="mt-2 flex justify-end space-x-2">
// // // // //                       <button onClick={() => copyToClipboard(message.text)} className="text-blue-300 hover:text-blue-400">
// // // // //                         <FiCopy />
// // // // //                       </button>
// // // // //                       <button onClick={() => redoMessage(message.originalInput || '')} className="text-blue-300 hover:text-blue-400">
// // // // //                         <FiRefreshCw />
// // // // //                       </button>
// // // // //                     </div>
// // // // //                   )}
// // // // //                 </div>
// // // // //               ))}
// // // // //               {loading && (
// // // // //                 <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} max-w-[80%]`}>
// // // // //                   <Skeleton count={3} />
// // // // //                 </div>
// // // // //               )}
// // // // //               <div ref={messagesEndRef} />
// // // // //             </div>
// // // // //           )}
// // // // //         </div>
// // // // //       </main>
      
// // // // //       <footer className="fixed bottom-0 left-0 right-0 p-4 bg-opacity-90 backdrop-blur-sm">
// // // // //         <div className="max-w-3xl mx-auto">
// // // // //           <div className={`flex items-center rounded-lg overflow-hidden ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-lg`}>
// // // // //             <textarea 
// // // // //               ref={textareaRef}
// // // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-white" : "text-gray-900"} placeholder-gray-500`}
// // // // //               rows={1}
// // // // //               value={text} 
// // // // //               onChange={handleTextAreaChange}
// // // // //               onKeyDown={handleKeyDown}
// // // // //               placeholder="Type your message here..." 
// // // // //             />
// // // // //             <button 
// // // // //               className={`p-3 text-blue-500 hover:text-blue-600 focus:outline-none transition-colors duration-200 ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}
// // // // //               onClick={sendMessage}
// // // // //               disabled={loading || text.trim().length < 3}
// // // // //             >
// // // // //               {loading ? (
// // // // //                 <div className="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
// // // // //               ) : (
// // // // //                 <FiArrowRight className="w-6 h-6" />
// // // // //               )}
// // // // //             </button>
// // // // //           </div>
// // // // //         </div>
// // // // //       </footer>
// // // // //       <ToastContainer />
// // // // //     </div>
// // // // //   );
// // // // // }

// // // // "use client";

// // // // import axios from "axios";
// // // // import "react-toastify/dist/ReactToastify.css";
// // // // import { serverURL } from "@/utils/utils";
// // // // import { useState, useEffect, useRef } from "react";
// // // // import { ToastContainer, toast } from "react-toastify";
// // // // import { FiMoon, FiSun, FiArrowRight, FiChevronLeft, FiChevronRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // // import Skeleton from "react-loading-skeleton";
// // // // import "react-loading-skeleton/dist/skeleton.css";
// // // // import { motion, AnimatePresence } from "framer-motion";

// // // // function countWords(str: string) {
// // // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // // }

// // // // interface Message {
// // // //   text: string;
// // // //   sender: string;
// // // //   originalInput?: string;
// // // //   versions?: { text: string; confidence: number }[];
// // // //   currentVersionIndex?: number;
// // // // }

// // // // const exampleTexts = [
// // // //   {
// // // //     ai: "Artificial Intelligence (AI) is a branch of computer science that aims to create intelligent machines. It has become an essential part of the technology industry.",
// // // //     human: "AI isn't just a tech buzzword - it's the spark igniting a revolution in how we interact with machines. From your smartphone's voice assistant to complex problem-solving algorithms, AI is reshaping our world in ways we're only beginning to understand."
// // // //   },
// // // //   {
// // // //     ai: "Climate change is a long-term change in the average weather patterns that have come to define Earth's local, regional and global climates.",
// // // //     human: "Our planet is running a fever, and we're the cause. Climate change isn't just about warmer summers - it's a complex shift in weather patterns that threatens everything from our food supply to coastal cities. It's the biggest challenge of our generation, and the clock is ticking."
// // // //   },
// // // //   {
// // // //     ai: "Exercise is physical activity that is planned, structured, and repetitive for the purpose of conditioning the body. Exercise consists of cardiovascular conditioning, strength training, and flexibility.",
// // // //     human: "Sweat, breathe, move, repeat. Exercise isn't just about building muscle or losing weight - it's a celebration of what your body can do. It's your daily dose of endorphins, your stress-buster, your fountain of youth. Whether you're pumping iron or dancing in your living room, you're investing in a healthier, happier you."
// // // //   }
// // // // ];

// // // // export default function Home() {
// // // //   const [text, setText] = useState<string>("");
// // // //   const [loading, setLoading] = useState<boolean>(false);
// // // //   const [messages, setMessages] = useState<Message[]>([]);
// // // //   const [wordCount, setWordCount] = useState<number>(0);
// // // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // // //   const [theme, setTheme] = useState<string>("dark");
// // // //   const [showChat, setShowChat] = useState<boolean>(false);
// // // //   const [currentExampleIndex, setCurrentExampleIndex] = useState<number>(0);
// // // //   const [showHuman, setShowHuman] = useState<boolean>(false);
// // // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // // //   const toggleTheme = () => {
// // // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // // //   };

// // // //   const sendMessage = async () => {
// // // //     if (text.trim().length < 3 || loading) return;
// // // //     if (wordCount > 200) {
// // // //       toast.error("Text exceeds 200 words limit.");
// // // //       return;
// // // //     }

// // // //     setLoading(true);
// // // //     setShowChat(true);
// // // //     const userMessage = { text, sender: "user" };
// // // //     setMessages(prevMessages => [...prevMessages, userMessage]);
// // // //     setText("");

// // // //     try {
// // // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // // //         text: text,
// // // //         setting: 3,
// // // //         output_format: "json"
// // // //       });

// // // //       setLoading(false);
      
// // // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // // //       setMessages(prevMessages => [...prevMessages, { 
// // // //         text: humanLikeVersions[0].text, 
// // // //         sender: "bot",
// // // //         originalInput: text,
// // // //         versions: humanLikeVersions,
// // // //         currentVersionIndex: 0
// // // //       }]);
// // // //       setRemainingAttempts(response.data.remainingAttempts);
// // // //       scrollToBottom();
// // // //     } catch (error: any) {
// // // //       setLoading(false);
// // // //       if (error.response?.status === 429) {
// // // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // // //         setTimeout(() => {
// // // //           window.location.href = '/signup';
// // // //         }, 3000);
// // // //       } else {
// // // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // // //       }
// // // //     }
// // // //   };

// // // //   const changeVersion = (messageIndex: number, direction: 'next' | 'prev') => {
// // // //     setMessages(prevMessages => prevMessages.map((msg, idx) => {
// // // //       if (idx === messageIndex && msg.versions && msg.currentVersionIndex !== undefined) {
// // // //         let newIndex = direction === 'next' 
// // // //           ? (msg.currentVersionIndex + 1) % msg.versions.length
// // // //           : (msg.currentVersionIndex - 1 + msg.versions.length) % msg.versions.length;
// // // //         return {
// // // //           ...msg,
// // // //           text: msg.versions[newIndex].text,
// // // //           currentVersionIndex: newIndex
// // // //         };
// // // //       }
// // // //       return msg;
// // // //     }));
// // // //   };

// // // //   const copyToClipboard = (text: string) => {
// // // //     navigator.clipboard.writeText(text).then(() => {
// // // //       toast.success("Copied to clipboard!");
// // // //     }, (err) => {
// // // //       console.error('Could not copy text: ', err);
// // // //       toast.error("Failed to copy text.");
// // // //     });
// // // //   };

// // // //   const redoMessage = (originalInput: string) => {
// // // //     setText(originalInput);
// // // //     textareaRef.current?.focus();
// // // //   };

// // // //   useEffect(() => {
// // // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // // //     setTheme(storedTheme);
// // // //     document.documentElement.setAttribute("data-theme", storedTheme);

// // // //     const timer = setInterval(() => {
// // // //       setCurrentExampleIndex(prevIndex => (prevIndex + 1) % exampleTexts.length);
// // // //       setShowHuman(false);
// // // //       setTimeout(() => setShowHuman(true), 1500);
// // // //     }, 6000);

// // // //     return () => clearInterval(timer);
// // // //   }, []);

// // // //   useEffect(() => {
// // // //     localStorage.setItem("theme", theme);
// // // //     document.documentElement.setAttribute("data-theme", theme);
// // // //   }, [theme]);

// // // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // // //     const newText = event.target.value;
// // // //     setText(newText);
// // // //     setWordCount(countWords(newText));
// // // //   };

// // // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // // //     if (event.key === 'Enter' && !event.shiftKey) {
// // // //       event.preventDefault();
// // // //       sendMessage();
// // // //     }
// // // //   };

// // // //   const scrollToBottom = () => {
// // // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // // //   };

// // // //   useEffect(() => {
// // // //     scrollToBottom();
// // // //   }, [messages]);

// // // //   return (
// // // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900" : "bg-gray-100"} min-h-screen w-screen font-sans`}>
// // // //       <header className="fixed top-0 left-0 right-0 z-50 bg-opacity-90 backdrop-blur-sm">
// // // //         <div className="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
// // // //           <h1 className={`text-2xl font-bold ${theme === "dark" ? "text-white" : "text-gray-900"}`}>NoaiGPT</h1>
// // // //           <button 
// // // //             onClick={toggleTheme} 
// // // //             className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-gray-200" : "bg-gray-200 text-gray-800"}`}
// // // //           >
// // // //             {theme === "dark" ? <FiSun size={20} /> : <FiMoon size={20} />}
// // // //           </button>
// // // //         </div>
// // // //       </header>

// // // //       <main className="flex-grow mt-16 mb-24 px-4 overflow-hidden">
// // // //         <div className="max-w-6xl mx-auto">
// // // //           {!showChat && (
// // // //             <div className="text-center py-12">
// // // //               <h2 className={`text-3xl font-bold mb-4 ${theme === "dark" ? "text-white" : "text-gray-900"}`}>Welcome to NoaiGPT</h2>
// // // //               <p className={`text-lg mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// // // //                 NoaiGPT is an AI model trained on human-written texts, designed to convert AI-generated content into natural, human-like writing. It excels at bypassing AI detection systems, making it an invaluable tool for content creators, students, and professionals.
// // // //               </p>

// // // //               <div className="flex justify-center relative h-96">
// // // //                 <motion.div
// // // //                   className={`w-full max-w-2xl p-6 rounded-lg shadow-xl ${theme === "dark" ? "bg-gray-800 text-white" : "bg-white text-gray-900"} border-2 ${theme === "dark" ? "border-blue-500" : "border-blue-300"} absolute backdrop-blur-sm bg-opacity-80`}
// // // //                   initial={{ opacity: 0, y: 50 }}
// // // //                   animate={{ opacity: 1, y: 0 }}
// // // //                   transition={{ duration: 1, ease: "easeOut" }}
// // // //                 >
// // // //                   <AnimatePresence mode="wait">
// // // //                     <motion.div
// // // //                       key={currentExampleIndex + (showHuman ? "-human" : "-ai")}
// // // //                       initial={{ opacity: 0, y: 20 }}
// // // //                       animate={{ opacity: 1, y: 0 }}
// // // //                       exit={{ opacity: 0, y: -20 }}
// // // //                       transition={{ duration: 0.5 }}
// // // //                     >
// // // //                       <h3 className={`text-xl font-bold mb-2 ${showHuman ? "text-green-500" : "text-blue-500"}`}>
// // // //                         {showHuman ? "Human Rewritten Text" : "AI Generated Text"}
// // // //                       </h3>
// // // //                       <p className="text-sm leading-relaxed">
// // // //                         {showHuman ? exampleTexts[currentExampleIndex].human : exampleTexts[currentExampleIndex].ai}
// // // //                       </p>
// // // //                     </motion.div>
// // // //                   </AnimatePresence>
// // // //                 </motion.div>
// // // //               </div>
// // // //             </div>
// // // //           )}

// // // //           {showChat && (
// // // //             <div className="space-y-4">
// // // //               {messages.map((message, index) => (
// // // //                 <div 
// // // //                   key={index}
// // // //                   className={`p-4 rounded-lg ${
// // // //                     message.sender === "user" 
// // // //                       ? "bg-blue-500 text-white ml-auto" 
// // // //                       : `${theme === "dark" ? "bg-gray-800 text-white" : "bg-white text-gray-900"}`
// // // //                   } max-w-[80%]`}
// // // //                 >
// // // //                   {message.text}
// // // //                   {message.sender === "bot" && message.versions && (
// // // //                     <div className="mt-2 flex justify-between items-center text-sm">
// // // //                       <button onClick={() => changeVersion(index, 'prev')} className="text-blue-300">
// // // //                         <FiChevronLeft />
// // // //                       </button>
// // // //                       <span className="text-blue-300">
// // // //                         {`Human: ${(message.versions[message.currentVersionIndex || 0].confidence * 100).toFixed(2)}%`}
// // // //                       </span>
// // // //                       <button onClick={() => changeVersion(index, 'next')} className="text-blue-300">
// // // //                         <FiChevronRight />
// // // //                       </button>
// // // //                     </div>
// // // //                   )}
// // // //                   {message.sender === "bot" && (
// // // //                     <div className="mt-2 flex justify-end space-x-2">
// // // //                       <button onClick={() => copyToClipboard(message.text)} className="text-blue-300 hover:text-blue-400">
// // // //                         <FiCopy />
// // // //                       </button>
// // // //                       <button onClick={() => redoMessage(message.originalInput || '')} className="text-blue-300 hover:text-blue-400">
// // // //                         <FiRefreshCw />
// // // //                       </button>
// // // //                     </div>
// // // //                   )}
// // // //                 </div>
// // // //               ))}
// // // //               {loading && (
// // // //                 <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} max-w-[80%]`}>
// // // //                   <Skeleton count={3} />
// // // //                 </div>
// // // //               )}
// // // //               <div ref={messagesEndRef} />
// // // //             </div>
// // // //           )}
// // // //         </div>
// // // //       </main>
      
// // // //       <footer className="fixed bottom-0 left-0 right-0 p-4 bg-opacity-90 backdrop-blur-sm">
// // // //         <div className="max-w-3xl mx-auto">
// // // //           <div className={`flex items-center rounded-lg overflow-hidden ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-lg`}>
// // // //             <textarea 
// // // //               ref={textareaRef}
// // // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-white" : "text-gray-900"} placeholder-gray-500`}
// // // //               rows={1}
// // // //               value={text} 
// // // //               onChange={handleTextAreaChange}
// // // //               onKeyDown={handleKeyDown}
// // // //               placeholder="Enter your AI-generated text here..." 
// // // //             />
// // // //             <button 
// // // //               className={`p-3 text-blue-500 hover:text-blue-600 focus:outline-none transition-colors duration-200 ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}
// // // //               onClick={sendMessage}
// // // //               disabled={loading || text.trim().length < 3}
// // // //             >
// // // //               {loading ? (
// // // //                 <div className="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
// // // //               ) : (
// // // //                 <FiArrowRight className="w-6 h-6" />
// // // //               )}
// // // //             </button>
// // // //           </div>
// // // //         </div>
// // // //       </footer>
// // // //       <ToastContainer />
// // // //     </div>
// // // //   );
// // // // }

// // // "use client";

// // // import axios from "axios";
// // // import "react-toastify/dist/ReactToastify.css";
// // // import { serverURL } from "@/utils/utils";
// // // import { useState, useEffect, useRef } from "react";
// // // import { ToastContainer, toast } from "react-toastify";
// // // import { FiMoon, FiSun, FiArrowRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // // import Skeleton from "react-loading-skeleton";
// // // import "react-loading-skeleton/dist/skeleton.css";
// // // import { motion, AnimatePresence } from "framer-motion";

// // // function countWords(str: string) {
// // //   return str.trim().split(/\s+/).filter(Boolean).length;
// // // }

// // // interface Message {
// // //   text: string;
// // //   sender: string;
// // //   originalInput?: string;
// // //   versions?: { text: string; confidence: number }[];
// // //   currentVersionIndex?: number;
// // // }

// // // const exampleTexts = [
// // //   {
// // //     ai: "Artificial Intelligence (AI) is a branch of computer science that aims to create intelligent machines. It has become an essential part of the technology industry.",
// // //     human: "AI isn't just a tech buzzword - it's the spark igniting a revolution in how we interact with machines. From your smartphone's voice assistant to complex problem-solving algorithms, AI is reshaping our world in ways we're only beginning to understand."
// // //   },
// // //   {
// // //     ai: "Climate change is a long-term change in the average weather patterns that have come to define Earth's local, regional and global climates.",
// // //     human: "Our planet is running a fever, and we're the cause. Climate change isn't just about warmer summers - it's a complex shift in weather patterns that threatens everything from our food supply to coastal cities. It's the biggest challenge of our generation, and the clock is ticking."
// // //   },
// // //   {
// // //     ai: "Exercise is physical activity that is planned, structured, and repetitive for the purpose of conditioning the body. Exercise consists of cardiovascular conditioning, strength training, and flexibility.",
// // //     human: "Sweat, breathe, move, repeat. Exercise isn't just about building muscle or losing weight - it's a celebration of what your body can do. It's your daily dose of endorphins, your stress-buster, your fountain of youth. Whether you're pumping iron or dancing in your living room, you're investing in a healthier, happier you."
// // //   }
// // // ];

// // // export default function Home() {
// // //   const [text, setText] = useState<string>("");
// // //   const [loading, setLoading] = useState<boolean>(false);
// // //   const [messages, setMessages] = useState<Message[]>([]);
// // //   const [wordCount, setWordCount] = useState<number>(0);
// // //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// // //   const [theme, setTheme] = useState<string>("dark");
// // //   const [showChat, setShowChat] = useState<boolean>(false);
// // //   const [currentExampleIndex, setCurrentExampleIndex] = useState<number>(0);
// // //   const messagesEndRef = useRef<HTMLDivElement>(null);
// // //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// // //   const toggleTheme = () => {
// // //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// // //   };

// // //   const sendMessage = async () => {
// // //     if (text.trim().length < 3 || loading) return;
// // //     if (wordCount > 200) {
// // //       toast.error("Text exceeds 200 words limit.");
// // //       return;
// // //     }

// // //     setLoading(true);
// // //     setShowChat(true);
// // //     const userMessage = { text, sender: "user" };
// // //     setMessages(prevMessages => [...prevMessages, userMessage]);
// // //     setText("");

// // //     try {
// // //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// // //         text: text,
// // //         setting: 3,
// // //         output_format: "json"
// // //       });

// // //       setLoading(false);
      
// // //       const humanLikeVersions = response.data.humanLikeVersions;
      
// // //       setMessages(prevMessages => [...prevMessages, { 
// // //         text: humanLikeVersions[0].text, 
// // //         sender: "bot",
// // //         originalInput: text,
// // //         versions: humanLikeVersions,
// // //         currentVersionIndex: 0
// // //       }]);
// // //       setRemainingAttempts(response.data.remainingAttempts);
// // //       scrollToBottom();
// // //     } catch (error: any) {
// // //       setLoading(false);
// // //       if (error.response?.status === 429) {
// // //         toast.error("No more free attempts. Please sign up for more rewrites.");
// // //         setTimeout(() => {
// // //           window.location.href = '/signup';
// // //         }, 3000);
// // //       } else {
// // //         toast.error(error.response?.data?.error || "Something went wrong!");
// // //       }
// // //     }
// // //   };

// // //   const copyToClipboard = (text: string) => {
// // //     navigator.clipboard.writeText(text).then(() => {
// // //       toast.success("Copied to clipboard!");
// // //     }, (err) => {
// // //       console.error('Could not copy text: ', err);
// // //       toast.error("Failed to copy text.");
// // //     });
// // //   };

// // //   const redoMessage = (originalInput: string) => {
// // //     setText(originalInput);
// // //     textareaRef.current?.focus();
// // //   };

// // //   useEffect(() => {
// // //     const storedTheme = localStorage.getItem("theme") || "dark";
// // //     setTheme(storedTheme);
// // //     document.documentElement.setAttribute("data-theme", storedTheme);

// // //     const timer = setInterval(() => {
// // //       setCurrentExampleIndex(prevIndex => (prevIndex + 1) % exampleTexts.length);
// // //     }, 10000);

// // //     return () => clearInterval(timer);
// // //   }, []);

// // //   useEffect(() => {
// // //     localStorage.setItem("theme", theme);
// // //     document.documentElement.setAttribute("data-theme", theme);
// // //   }, [theme]);

// // //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// // //     const newText = event.target.value;
// // //     setText(newText);
// // //     setWordCount(countWords(newText));
// // //   };

// // //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// // //     if (event.key === 'Enter' && !event.shiftKey) {
// // //       event.preventDefault();
// // //       sendMessage();
// // //     }
// // //   };

// // //   const scrollToBottom = () => {
// // //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// // //   };

// // //   useEffect(() => {
// // //     scrollToBottom();
// // //   }, [messages, currentExampleIndex]);

// // //   return (
// // //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900" : "bg-gray-100"} min-h-screen w-screen font-sans`}>
// // //       <header className="fixed top-0 left-0 right-0 z-50 bg-opacity-90 backdrop-blur-sm">
// // //         <div className="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
// // //           <h1 className={`text-2xl font-bold ${theme === "dark" ? "text-white" : "text-gray-900"}`}>NoaiGPT</h1>
// // //           <button 
// // //             onClick={toggleTheme} 
// // //             className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-gray-200" : "bg-gray-200 text-gray-800"}`}
// // //           >
// // //             {theme === "dark" ? <FiSun size={20} /> : <FiMoon size={20} />}
// // //           </button>
// // //         </div>
// // //       </header>

// // //       <main className="flex-grow mt-16 mb-24 px-4 overflow-hidden">
// // //         <div className="max-w-2xl mx-auto">
// // //           <div className="text-center py-8">
// // //             <h2 className={`text-3xl font-bold mb-4 ${theme === "dark" ? "text-white" : "text-gray-900"}`}>Welcome to NoaiGPT</h2>
// // //             <p className={`text-lg mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// // //               NoaiGPT converts AI-generated content into natural, human-like writing that bypasses AI detection.
// // //             </p>
// // //           </div>

// // //           <div className="space-y-4">
// // //             <AnimatePresence mode="wait">
// // //               <motion.div
// // //                 key={currentExampleIndex}
// // //                 initial={{ opacity: 0, y: 20 }}
// // //                 animate={{ opacity: 1, y: 0 }}
// // //                 exit={{ opacity: 0, y: -20 }}
// // //                 transition={{ duration: 0.5 }}
// // //               >
// // //                 <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-md max-w-[80%]`}>
// // //                   <p className="text-sm mb-2 text-blue-500 font-semibold">AI Generated:</p>
// // //                   <p className="text-sm">{exampleTexts[currentExampleIndex].ai}</p>
// // //                 </div>
// // //                 <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-700" : "bg-gray-100"} shadow-md max-w-[80%] ml-auto mt-4`}>
// // //                   <p className="text-sm mb-2 text-green-500 font-semibold">Human Rewritten:</p>
// // //                   <p className="text-sm">{exampleTexts[currentExampleIndex].human}</p>
// // //                 </div>
// // //               </motion.div>
// // //             </AnimatePresence>

// // //             {showChat && messages.map((message, index) => (
// // //               <motion.div 
// // //                 key={index}
// // //                 initial={{ opacity: 0, y: 20 }}
// // //                 animate={{ opacity: 1, y: 0 }}
// // //                 transition={{ duration: 0.3 }}
// // //                 className={`p-4 rounded-lg shadow-md ${
// // //                   message.sender === "user" 
// // //                     ? `${theme === "dark" ? "bg-blue-600" : "bg-blue-500"} text-white ml-auto` 
// // //                     : `${theme === "dark" ? "bg-gray-800" : "bg-white"} ${theme === "dark" ? "text-white" : "text-gray-900"}`
// // //                 } max-w-[80%]`}
// // //               >
// // //                 <p className="text-sm">{message.text}</p>
// // //                 {message.sender === "bot" && (
// // //                   <div className="mt-2 flex justify-end space-x-2">
// // //                     <button onClick={() => copyToClipboard(message.text)} className="text-blue-300 hover:text-blue-400">
// // //                       <FiCopy size={14} />
// // //                     </button>
// // //                     <button onClick={() => redoMessage(message.originalInput || '')} className="text-blue-300 hover:text-blue-400">
// // //                       <FiRefreshCw size={14} />
// // //                     </button>
// // //                   </div>
// // //                 )}
// // //               </motion.div>
// // //             ))}
// // //             {loading && (
// // //               <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} max-w-[80%]`}>
// // //                 <Skeleton count={3} />
// // //               </div>
// // //             )}
// // //             <div ref={messagesEndRef} />
// // //           </div>
// // //         </div>
// // //       </main>
      
// // //       <footer className="fixed bottom-0 left-0 right-0 p-4 bg-opacity-90 backdrop-blur-sm">
// // //         <div className="max-w-2xl mx-auto">
// // //           <div className={`flex items-center rounded-lg overflow-hidden ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-lg`}>
// // //             <textarea 
// // //               ref={textareaRef}
// // //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-white" : "text-gray-900"} placeholder-gray-500`}
// // //               rows={1}
// // //               value={text} 
// // //               onChange={handleTextAreaChange}
// // //               onKeyDown={handleKeyDown}
// // //               placeholder="Enter your AI-generated text here..." 
// // //             />
// // //             <button 
// // //               className={`p-3 text-blue-500 hover:text-blue-600 focus:outline-none transition-colors duration-200 ${loading ? 'opacity-50 cursor-not-allowed' : ''}`}
// // //               onClick={sendMessage}
// // //               disabled={loading || text.trim().length < 3}
// // //             >
// // //               {loading ? (
// // //                 <div className="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
// // //               ) : (
// // //                 <FiArrowRight className="w-6 h-6" />
// // //               )}
// // //             </button>
// // //           </div>
// // //         </div>
// // //       </footer>
// // //       <ToastContainer />
// // //     </div>
// // //   );
// // // }

// // "use client";

// // import axios from "axios";
// // import "react-toastify/dist/ReactToastify.css";
// // import { serverURL } from "@/utils/utils";
// // import { useState, useEffect, useRef } from "react";
// // import { ToastContainer, toast } from "react-toastify";
// // import { FiMoon, FiSun, FiArrowRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// // import Skeleton from "react-loading-skeleton";
// // import "react-loading-skeleton/dist/skeleton.css";
// // import { motion, AnimatePresence } from "framer-motion";
// // import { useSpring, animated } from "react-spring";

// // function countWords(str: string) {
// //   return str.trim().split(/\s+/).filter(Boolean).length;
// // }

// // interface Message {
// //   text: string;
// //   sender: string;
// //   originalInput?: string;
// //   versions?: { text: string; confidence: number }[];
// //   currentVersionIndex?: number;
// // }

// // const exampleTexts = [
// //   {
// //     ai: "Artificial Intelligence (AI) is a branch of computer science that aims to create intelligent machines. It has become an essential part of the technology industry.",
// //     human: "AI isn't just a tech buzzword - it's the spark igniting a revolution in how we interact with machines. From your smartphone's voice assistant to complex problem-solving algorithms, AI is reshaping our world in ways we're only beginning to understand."
// //   },
// //   {
// //     ai: "Climate change is a long-term change in the average weather patterns that have come to define Earth's local, regional and global climates.",
// //     human: "Our planet is running a fever, and we're the cause. Climate change isn't just about warmer summers - it's a complex shift in weather patterns that threatens everything from our food supply to coastal cities. It's the biggest challenge of our generation, and the clock is ticking."
// //   },
// //   {
// //     ai: "Exercise is physical activity that is planned, structured, and repetitive for the purpose of conditioning the body. Exercise consists of cardiovascular conditioning, strength training, and flexibility.",
// //     human: "Sweat, breathe, move, repeat. Exercise isn't just about building muscle or losing weight - it's a celebration of what your body can do. It's your daily dose of endorphins, your stress-buster, your fountain of youth. Whether you're pumping iron or dancing in your living room, you're investing in a healthier, happier you."
// //   }
// // ];

// // export default function Home() {
// //   const [text, setText] = useState<string>("");
// //   const [loading, setLoading] = useState<boolean>(false);
// //   const [messages, setMessages] = useState<Message[]>([]);
// //   const [wordCount, setWordCount] = useState<number>(0);
// //   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
// //   const [theme, setTheme] = useState<string>("dark");
// //   const [showChat, setShowChat] = useState<boolean>(false);
// //   const [currentExampleIndex, setCurrentExampleIndex] = useState<number>(0);
// //   const messagesEndRef = useRef<HTMLDivElement>(null);
// //   const textareaRef = useRef<HTMLTextAreaElement>(null);

// //   const toggleTheme = () => {
// //     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
// //   };

// //   const sendMessage = async () => {
// //     if (text.trim().length < 3 || loading) return;
// //     if (wordCount > 200) {
// //       toast.error("Text exceeds 200 words limit.");
// //       return;
// //     }

// //     setLoading(true);
// //     setShowChat(true);
// //     const userMessage = { text, sender: "user" };
// //     setMessages(prevMessages => [...prevMessages, userMessage]);
// //     setText("");

// //     try {
// //       const response = await axios.post(`${serverURL}/free/rewrite`, {
// //         text: text,
// //         setting: 3,
// //         output_format: "json"
// //       });

// //       setLoading(false);
      
// //       const humanLikeVersions = response.data.humanLikeVersions;
      
// //       setMessages(prevMessages => [...prevMessages, { 
// //         text: humanLikeVersions[0].text, 
// //         sender: "bot",
// //         originalInput: text,
// //         versions: humanLikeVersions,
// //         currentVersionIndex: 0
// //       }]);
// //       setRemainingAttempts(response.data.remainingAttempts);
// //       scrollToBottom();
// //     } catch (error: any) {
// //       setLoading(false);
// //       if (error.response?.status === 429) {
// //         toast.error("No more free attempts. Please sign up for more rewrites.");
// //         setTimeout(() => {
// //           window.location.href = '/signup';
// //         }, 3000);
// //       } else {
// //         toast.error(error.response?.data?.error || "Something went wrong!");
// //       }
// //     }
// //   };

// //   const copyToClipboard = (text: string) => {
// //     navigator.clipboard.writeText(text).then(() => {
// //       toast.success("Copied to clipboard!");
// //     }, (err) => {
// //       console.error('Could not copy text: ', err);
// //       toast.error("Failed to copy text.");
// //     });
// //   };

// //   const redoMessage = (originalInput: string) => {
// //     setText(originalInput);
// //     textareaRef.current?.focus();
// //   };

// //   useEffect(() => {
// //     const storedTheme = localStorage.getItem("theme") || "dark";
// //     setTheme(storedTheme);
// //     document.documentElement.setAttribute("data-theme", storedTheme);

// //     const timer = setInterval(() => {
// //       setCurrentExampleIndex(prevIndex => (prevIndex + 1) % exampleTexts.length);
// //     }, 10000);

// //     return () => clearInterval(timer);
// //   }, []);

// //   useEffect(() => {
// //     localStorage.setItem("theme", theme);
// //     document.documentElement.setAttribute("data-theme", theme);
// //   }, [theme]);

// //   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
// //     const newText = event.target.value;
// //     setText(newText);
// //     setWordCount(countWords(newText));
// //   };

// //   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
// //     if (event.key === 'Enter' && !event.shiftKey) {
// //       event.preventDefault();
// //       sendMessage();
// //     }
// //   };

// //   const scrollToBottom = () => {
// //     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
// //   };

// //   useEffect(() => {
// //     scrollToBottom();
// //   }, [messages, currentExampleIndex]);

// //   const fadeIn = useSpring({
// //     opacity: 1,
// //     from: { opacity: 0 },
// //     config: { duration: 1000 }
// //   });

// //   const backgroundAnimation = useSpring({
// //     from: { backgroundPosition: '0% 50%' },
// //     to: { backgroundPosition: '100% 50%' },
// //     config: { duration: 20000, loop: true },
// //     reset: true,
// //   });

// //   return (
// //     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900" : "bg-gray-100"} min-h-screen w-screen font-sans relative overflow-hidden`}>
// //       <animated.div
// //         style={{
// //           ...backgroundAnimation,
// //           position: 'absolute',
// //           top: 0,
// //           left: 0,
// //           right: 0,
// //           bottom: 0,
// //           background: theme === "dark" 
// //             ? 'linear-gradient(45deg, #111827, #1f2937, #374151, #111827)'
// //             : 'linear-gradient(45deg, #f3f4f6, #e5e7eb, #d1d5db, #f3f4f6)',
// //           backgroundSize: '400% 400%',
// //         }}
// //       />
// //       <header className="fixed top-0 left-0 right-0 z-50 bg-opacity-90 backdrop-blur-sm">
// //         <div className="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
// //           <h1 className={`text-2xl font-bold ${theme === "dark" ? "text-white" : "text-gray-900"}`}>NoaiGPT</h1>
// //           <button 
// //             onClick={toggleTheme} 
// //             className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-gray-200" : "bg-gray-200 text-gray-800"} transition-all duration-300 hover:scale-110`}
// //           >
// //             {theme === "dark" ? <FiSun size={20} /> : <FiMoon size={20} />}
// //           </button>
// //         </div>
// //       </header>

// //       <main className="flex-grow mt-16 mb-24 px-4 overflow-hidden relative z-10">
// //         <animated.div style={fadeIn} className="max-w-2xl mx-auto">
// //           <div className="text-center py-8">
// //             <h2 className={`text-4xl font-bold mb-4 ${theme === "dark" ? "text-white" : "text-gray-900"}`}>Welcome to NoaiGPT</h2>
// //             <p className={`text-lg mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
// //               NoaiGPT converts AI-generated content into natural, human-like writing that bypasses AI detection.
// //             </p>
// //           </div>

// //           <div className="space-y-4">
// //             <AnimatePresence mode="wait">
// //               <motion.div
// //                 key={currentExampleIndex}
// //                 initial={{ opacity: 0, y: 20 }}
// //                 animate={{ opacity: 1, y: 0 }}
// //                 exit={{ opacity: 0, y: -20 }}
// //                 transition={{ duration: 0.5 }}
// //               >
// //                 <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-lg max-w-[90%] transform hover:scale-105 transition-all duration-300`}>
// //                   <p className="text-sm mb-2 text-blue-500 font-semibold">AI Generated:</p>
// //                   <p className="text-sm">{exampleTexts[currentExampleIndex].ai}</p>
// //                 </div>
// //                 <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-700" : "bg-gray-100"} shadow-lg max-w-[90%] ml-auto mt-4 transform hover:scale-105 transition-all duration-300`}>
// //                   <p className="text-sm mb-2 text-green-500 font-semibold">Human Rewritten:</p>
// //                   <p className="text-sm">{exampleTexts[currentExampleIndex].human}</p>
// //                 </div>
// //               </motion.div>
// //             </AnimatePresence>

// //             {showChat && messages.map((message, index) => (
// //               <motion.div 
// //                 key={index}
// //                 initial={{ opacity: 0, y: 20 }}
// //                 animate={{ opacity: 1, y: 0 }}
// //                 transition={{ duration: 0.3 }}
// //                 className={`p-4 rounded-lg shadow-lg ${
// //                   message.sender === "user" 
// //                     ? `${theme === "dark" ? "bg-blue-600" : "bg-blue-500"} text-white ml-auto` 
// //                     : `${theme === "dark" ? "bg-gray-800" : "bg-white"} ${theme === "dark" ? "text-white" : "text-gray-900"}`
// //                 } max-w-[90%] transform hover:scale-105 transition-all duration-300`}
// //               >
// //                 <p className="text-sm">{message.text}</p>
// //                 {message.sender === "bot" && (
// //                   <div className="mt-2 flex justify-end space-x-2">
// //                     <button onClick={() => copyToClipboard(message.text)} className="text-blue-300 hover:text-blue-400 transition-colors duration-200">
// //                       <FiCopy size={14} />
// //                     </button>
// //                     <button onClick={() => redoMessage(message.originalInput || '')} className="text-blue-300 hover:text-blue-400 transition-colors duration-200">
// //                       <FiRefreshCw size={14} />
// //                     </button>
// //                   </div>
// //                 )}
// //               </motion.div>
// //             ))}
// //             {loading && (
// //               <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} max-w-[90%]`}>
// //                 <Skeleton count={3} />
// //               </div>
// //             )}
// //             <div ref={messagesEndRef} />
// //           </div>
// //         </animated.div>
// //       </main>
      
// //       <footer className="fixed bottom-0 left-0 right-0 p-4 bg-opacity-90 backdrop-blur-sm">
// //         <div className="max-w-2xl mx-auto">
// //           <div className={`flex items-center rounded-lg overflow-hidden ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-lg transition-all duration-300 hover:shadow-xl`}>
// //             <textarea 
// //               ref={textareaRef}
// //               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-white" : "text-gray-900"} placeholder-gray-500`}
// //               rows={1}
// //               value={text} 
// //               onChange={handleTextAreaChange}
// //               onKeyDown={handleKeyDown}
// //               placeholder="Enter your AI-generated text here..." 
// //             />
// //             <button 
// //               className={`p-3 text-blue-500 hover:text-blue-600 focus:outline-none transition-all duration-300 ${loading ? 'opacity-50 cursor-not-allowed' : 'hover:scale-110'}`}
// //               onClick={sendMessage}
// //               disabled={loading || text.trim().length < 3}
// //             >
// //               {loading ? (
// //                 <div className="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
// //               ) : (
// //                 <FiArrowRight className="w-6 h-6" />
// //               )}
// //             </button>
// //           </div>
// //         </div>
// //       </footer>
// //       <ToastContainer 
// //         position="bottom-right"
// //         autoClose={3000}
// //         hideProgressBar={false}
// //         newestOnTop={false}
// //         closeOnClick
// //         rtl={false}
// //         pauseOnFocusLoss
// //         draggable
// //         pauseOnHover
// //       />
// //     </div>
// //   );
// // }


// "use client";

// import axios from "axios";
// import "react-toastify/dist/ReactToastify.css";
// import { serverURL } from "@/utils/utils";
// import { useState, useEffect, useRef } from "react";
// import { ToastContainer, toast } from "react-toastify";
// import { FiMoon, FiSun, FiArrowRight, FiCopy, FiRefreshCw } from "react-icons/fi";
// import Skeleton from "react-loading-skeleton";
// import "react-loading-skeleton/dist/skeleton.css";
// import { motion, AnimatePresence } from "framer-motion";
// import { useSpring, animated } from "react-spring";

// function countWords(str: string) {
//   return str.trim().split(/\s+/).filter(Boolean).length;
// }

// interface Message {
//   text: string;
//   sender: string;
//   originalInput?: string;
//   versions?: { text: string; confidence: number }[];
//   currentVersionIndex?: number;
// }

// const exampleTexts = [
//   {
//     ai: "Artificial Intelligence (AI) is a branch of computer science that aims to create intelligent machines. It has become an essential part of the technology industry.",
//     human: "AI isn't just a tech buzzword - it's the spark igniting a revolution in how we interact with machines. From your smartphone's voice assistant to complex problem-solving algorithms, AI is reshaping our world in ways we're only beginning to understand."
//   },
//   {
//     ai: "Climate change is a long-term change in the average weather patterns that have come to define Earth's local, regional and global climates.",
//     human: "Our planet is running a fever, and we're the cause. Climate change isn't just about warmer summers - it's a complex shift in weather patterns that threatens everything from our food supply to coastal cities. It's the biggest challenge of our generation, and the clock is ticking."
//   },
//   {
//     ai: "Exercise is physical activity that is planned, structured, and repetitive for the purpose of conditioning the body. Exercise consists of cardiovascular conditioning, strength training, and flexibility.",
//     human: "Sweat, breathe, move, repeat. Exercise isn't just about building muscle or losing weight - it's a celebration of what your body can do. It's your daily dose of endorphins, your stress-buster, your fountain of youth. Whether you're pumping iron or dancing in your living room, you're investing in a healthier, happier you."
//   }
// ];

// export default function Home() {
//   const [text, setText] = useState<string>("");
//   const [loading, setLoading] = useState<boolean>(false);
//   const [messages, setMessages] = useState<Message[]>([]);
//   const [wordCount, setWordCount] = useState<number>(0);
//   const [remainingAttempts, setRemainingAttempts] = useState<number>(5);
//   const [theme, setTheme] = useState<string>("dark");
//   const [showLanding, setShowLanding] = useState<boolean>(true);
//   const [currentExampleIndex, setCurrentExampleIndex] = useState<number>(0);
//   const messagesEndRef = useRef<HTMLDivElement>(null);
//   const textareaRef = useRef<HTMLTextAreaElement>(null);

//   const toggleTheme = () => {
//     setTheme(prevTheme => prevTheme === "light" ? "dark" : "light");
//   };

//   const sendMessage = async () => {
//     if (text.trim().length < 3 || loading) return;
//     if (wordCount > 200) {
//       toast.error("Text exceeds 200 words limit.");
//       return;
//     }

//     setLoading(true);
//     setShowLanding(false);
//     const userMessage = { text, sender: "user" };
//     setMessages(prevMessages => [...prevMessages, userMessage]);
//     setText("");

//     try {
//       const response = await axios.post(`${serverURL}/free/rewrite`, {
//         text: text,
//         setting: 3,
//         output_format: "json"
//       });

//       setLoading(false);
      
//       const humanLikeVersions = response.data.humanLikeVersions;
      
//       setMessages(prevMessages => [...prevMessages, { 
//         text: humanLikeVersions[0].text, 
//         sender: "bot",
//         originalInput: text,
//         versions: humanLikeVersions,
//         currentVersionIndex: 0
//       }]);
//       setRemainingAttempts(response.data.remainingAttempts);
//       scrollToBottom();
//     } catch (error: any) {
//       setLoading(false);
//       if (error.response?.status === 429) {
//         toast.error("No more free attempts. Please sign up for more rewrites.");
//         setTimeout(() => {
//           window.location.href = '/signup';
//         }, 3000);
//       } else {
//         toast.error(error.response?.data?.error || "Something went wrong!");
//       }
//     }
//   };

//   const copyToClipboard = (text: string) => {
//     navigator.clipboard.writeText(text).then(() => {
//       toast.success("Copied to clipboard!");
//     }, (err) => {
//       console.error('Could not copy text: ', err);
//       toast.error("Failed to copy text.");
//     });
//   };

//   const redoMessage = (originalInput: string) => {
//     setText(originalInput);
//     textareaRef.current?.focus();
//   };

//   useEffect(() => {
//     const storedTheme = localStorage.getItem("theme") || "dark";
//     setTheme(storedTheme);
//     document.documentElement.setAttribute("data-theme", storedTheme);

//     const timer = setInterval(() => {
//       setCurrentExampleIndex(prevIndex => (prevIndex + 1) % exampleTexts.length);
//     }, 10000);

//     return () => clearInterval(timer);
//   }, []);

//   useEffect(() => {
//     localStorage.setItem("theme", theme);
//     document.documentElement.setAttribute("data-theme", theme);
//   }, [theme]);

//   const handleTextAreaChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {
//     const newText = event.target.value;
//     setText(newText);
//     setWordCount(countWords(newText));
//   };

//   const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {
//     if (event.key === 'Enter' && !event.shiftKey) {
//       event.preventDefault();
//       sendMessage();
//     }
//   };

//   const scrollToBottom = () => {
//     messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
//   };

//   useEffect(() => {
//     scrollToBottom();
//   }, [messages, currentExampleIndex]);

//   const fadeIn = useSpring({
//     opacity: 1,
//     from: { opacity: 0 },
//     config: { duration: 1000 }
//   });

//   const backgroundAnimation = useSpring({
//     from: { backgroundPosition: '0% 50%' },
//     to: { backgroundPosition: '100% 50%' },
//     config: { duration: 20000, loop: true },
//     reset: true,
//   });

//   return (
//     <div className={`flex flex-col ${theme === "dark" ? "bg-gray-900" : "bg-gray-50"} min-h-screen w-screen font-sans relative overflow-hidden`}>
//       <animated.div
//         style={{
//           ...backgroundAnimation,
//           position: 'absolute',
//           top: 0,
//           left: 0,
//           right: 0,
//           bottom: 0,
//           background: theme === "dark" 
//             ? 'linear-gradient(45deg, #111827, #1f2937, #374151, #111827)'
//             : 'linear-gradient(45deg, #ffffff, #f9fafb, #f3f4f6, #ffffff)', // Lighter, milk-like color
//           backgroundSize: '400% 400%',
//         }}
//       />
//       <header className="fixed top-0 left-0 right-0 z-50 bg-opacity-90 backdrop-blur-sm">
//         <div className="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
//           <h1 className={`text-2xl font-bold ${theme === "dark" ? "text-white" : "text-gray-900"}`}>NoaiGPT</h1>
//           <button 
//             onClick={toggleTheme} 
//             className={`p-2 rounded-full ${theme === "dark" ? "bg-gray-800 text-gray-200" : "bg-gray-200 text-gray-800"} transition-all duration-300 hover:scale-110`}
//           >
//             {theme === "dark" ? <FiSun size={20} /> : <FiMoon size={20} />}
//           </button>
//         </div>
//       </header>

//       <main className="flex-grow mt-16 mb-24 px-4 overflow-hidden relative z-10">
//         <animated.div style={fadeIn} className="max-w-2xl mx-auto">
//           {showLanding && (
//             <div className="text-center py-8">
//               <h2 className={`text-4xl font-bold mb-4 ${theme === "dark" ? "text-white" : "text-gray-900"}`}>Welcome to NoaiGPT</h2>
//               <p className={`text-lg mb-8 ${theme === "dark" ? "text-gray-300" : "text-gray-700"}`}>
//                 NoaiGPT converts AI-generated content into natural, human-like writing that bypasses AI detection.
//               </p>
//             </div>
//           )}

//           <div className="space-y-4">
//             {showLanding && (
//               <AnimatePresence mode="wait">
//                 <motion.div
//                   key={currentExampleIndex}
//                   initial={{ opacity: 0, y: 20 }}
//                   animate={{ opacity: 1, y: 0 }}
//                   exit={{ opacity: 0, y: -20 }}
//                   transition={{ duration: 0.5 }}
//                 >
//                   <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-lg max-w-[90%] transform hover:scale-105 transition-all duration-300`}>
//                     <p className="text-sm mb-2 text-blue-500 font-semibold">AI Generated:</p>
//                     <p className="text-sm">{exampleTexts[currentExampleIndex].ai}</p>
//                   </div>
//                   <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-700" : "bg-gray-100"} shadow-lg max-w-[90%] ml-auto mt-4 transform hover:scale-105 transition-all duration-300`}>
//                     <p className="text-sm mb-2 text-green-500 font-semibold">Human Rewritten:</p>
//                     <p className="text-sm">{exampleTexts[currentExampleIndex].human}</p>
//                   </div>
//                 </motion.div>
//               </AnimatePresence>
//             )}

//             {messages.map((message, index) => (
//               <motion.div 
//                 key={index}
//                 initial={{ opacity: 0, y: 20 }}
//                 animate={{ opacity: 1, y: 0 }}
//                 transition={{ duration: 0.3 }}
//                 className={`p-4 rounded-lg shadow-lg ${
//                   message.sender === "user" 
//                     ? `${theme === "dark" ? "bg-blue-600" : "bg-blue-500"} text-white ml-auto` 
//                     : `${theme === "dark" ? "bg-gray-800" : "bg-white"} ${theme === "dark" ? "text-white" : "text-gray-900"}`
//                 } max-w-[90%] transform hover:scale-105 transition-all duration-300`}
//               >
//                 <p className="text-sm">{message.text}</p>
//                 {message.sender === "bot" && (
//                   <div className="mt-2 flex justify-end space-x-2">
//                     <button onClick={() => copyToClipboard(message.text)} className="text-blue-300 hover:text-blue-400 transition-colors duration-200">
//                       <FiCopy size={14} />
//                     </button>
//                     <button onClick={() => redoMessage(message.originalInput || '')} className="text-blue-300 hover:text-blue-400 transition-colors duration-200">
//                       <FiRefreshCw size={14} />
//                     </button>
//                   </div>
//                 )}
//               </motion.div>
//             ))}
//             {loading && (
//               <div className={`p-4 rounded-lg ${theme === "dark" ? "bg-gray-800" : "bg-white"} max-w-[90%]`}>
//                 <Skeleton count={3} />
//               </div>
//             )}
//             <div ref={messagesEndRef} />
//           </div>
//         </animated.div>
//       </main>
      
//       <footer className="fixed bottom-0 left-0 right-0 p-4 bg-opacity-90 backdrop-blur-sm">
//         <div className="max-w-2xl mx-auto">
//           <div className={`flex items-center rounded-lg overflow-hidden ${theme === "dark" ? "bg-gray-800" : "bg-white"} shadow-lg transition-all duration-300 hover:shadow-xl`}
//                style={{
//                  boxShadow: theme === "dark"
//                    ? "0 0 15px rgba(59, 130, 246, 0.5), 0 0 30px rgba(59, 130, 246, 0.3), 0 0 45px rgba(59, 130, 246, 0.1)"
//                    : "0 0 15px rgba(59, 130, 246, 0.3), 0 0 30px rgba(59, 130, 246, 0.2), 0 0 45px rgba(59, 130, 246, 0.1)"
//                }}>
//             <textarea 
//               ref={textareaRef}
//               className={`flex-1 p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none ${theme === "dark" ? "text-white" : "text-gray-900"} placeholder-gray-500`}
//               rows={1}
//               value={text} 
//               onChange={handleTextAreaChange}
//               onKeyDown={handleKeyDown}
//               placeholder="Enter your AI-generated text here..." 
//             />
//             <button 
//               className={`p-3 text-blue-500 hover:text-blue-600 focus:outline-none transition-all duration-300 ${loading ? 'opacity-50 cursor-not-allowed' : 'hover:scale-110'}`}
//               onClick={sendMessage}
//               disabled={loading || text.trim().length < 3}
//             >
//               {loading ? (
//                 <div className="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
//               ) : (
//                 <FiArrowRight className="w-6 h-6" />
//               )}
//             </button>
//           </div>
//         </div>
//       </footer>
//       <ToastContainer 
//         position="bottom-right"
//         autoClose={3000}
//         hideProgressBar={false}
//         newestOnTop={false}
//         closeOnClick
//         rtl={false}
//         pauseOnFocusLoss
//         draggable
//         pauseOnHover
//         // theme={theme}
//       />
//     </div>
//   );
// }
